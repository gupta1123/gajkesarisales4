exports.id=1109,exports.ids=[1109],exports.modules={1109:(e,a,s)=>{"use strict";s.a(e,async(e,l)=>{try{s.r(a),s.d(a,{default:()=>v});var t=s(6689),r=s(9222),i=s(1617),n=s(1079),c=s(5725),d=s(2546),o=s(5474),m=s(7231),h=s(291),u=s(467),f=s(3780),x=s.n(f),j=s(997),p=e([r,i,n,d,o,m,h,u]);function y(e,a){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);a&&(l=l.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,l)}return s}function w(e){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?y(Object(s),!0).forEach(function(a){var l,t;l=a,t=s[a],(l=function(e){var a=function(e,a){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var l=s.call(e,a||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:String(a)}(l))in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}[r,i,n,d,o,m,h,u]=p.then?(await p)():p;let v=({authToken:e})=>{let{0:a,1:s}=(0,t.useState)([]),{0:l,1:f}=(0,t.useState)({}),{0:p,1:y}=(0,t.useState)({}),{0:v,1:b}=(0,t.useState)(1),{0:N,1:g}=(0,t.useState)([]),{0:k,1:C}=(0,t.useState)({}),{0:P,1:S}=(0,t.useState)(!1),{0:A,1:R}=(0,t.useState)({});(0,t.useEffect)(()=>{let e=()=>S(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let I=(0,t.useCallback)(async()=>{try{let a=await fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:`Bearer ${e}`}}),l=(await a.json()).sort((e,a)=>e.firstName.localeCompare(a.firstName));s(l)}catch(e){console.error("Error fetching employees:",e)}},[e]),K=(0,t.useCallback)(async()=>{try{let a=await fetch("https://api.gajkesaristeels.in/travel-rates/getAll",{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw Error("Failed to fetch travel rates");let s=await a.json();g(s)}catch(e){console.error("Error fetching travel rates:",e)}},[e]);(0,t.useEffect)(()=>{I(),K()},[I,K]);let O=(e,a,s)=>{y(l=>w(w({},l),{},{[e]:w(w({},l[e]),{},{[a]:s})})),("carRatePerKm"===a||"bikeRatePerKm"===a)&&C(l=>w(w({},l),{},{[e]:w(w({},l[e]),{},{[a]:parseFloat(s)||0})}))},E=async a=>{let s=p[a],l=k[a];if(s)try{let t=await fetch("https://api.gajkesaristeels.in/employee/setSalary",{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({travelAllowance:s.travelAllowance,dearnessAllowance:s.dearnessAllowance,fullMonthSalary:s.fullMonthSalary,employeeId:a})});if(l){let s=N.find(e=>e.employeeId===a);if(s){if(!(await fetch(`https://api.gajkesaristeels.in/travel-rates/edit?id=${s.id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({bikeRatePerKm:l.bikeRatePerKm,carRatePerKm:l.carRatePerKm})})).ok)throw Error("Failed to update travel rates")}else console.error("Travel rate entry not found for employee:",a)}let r=await t.text();if("Salary Updated!"===r)I(),K(),f(e=>w(w({},e),{},{[a]:!1})),c.notification.success({message:"Success",description:"Salary and travel rates updated successfully!"});else throw Error("Failed to update salary")}catch(e){console.error("Error saving changes:",e),c.notification.error({message:"Error",description:"Error saving changes."})}},M=e=>{f(a=>w(w({},a),{},{[e]:!0})),y(s=>w(w({},s),{},{[e]:{travelAllowance:a.find(a=>a.id===e)?.travelAllowance,dearnessAllowance:a.find(a=>a.id===e)?.dearnessAllowance,fullMonthSalary:a.find(a=>a.id===e)?.fullMonthSalary}})),C(a=>w(w({},a),{},{[e]:N.find(a=>a.employeeId===e)||{carRatePerKm:0,bikeRatePerKm:0}}))},z=e=>{f(a=>w(w({},a),{},{[e]:!1})),y(a=>{let s=w({},a);return delete s[e],s}),C(a=>{let s=w({},a);return delete s[e],s})},D=10*v,$=a.slice(D-10,D),_=Math.ceil(a.length/10),T=(e,a)=>`${e.charAt(0)}${a.charAt(0)}`.toUpperCase(),B=e=>{R(a=>w(w({},a),{},{[e]:!a[e]}))};return(0,j.jsxs)("div",{className:x().allowanceContainer,children:[j.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Allowance Details"}),P?j.jsx("div",{className:"space-y-4",children:$.map(e=>(0,j.jsxs)(o.Zb,{className:"overflow-hidden",children:[j.jsx(o.Ol,{className:"pb-2",children:(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-4",children:[j.jsx(m.qE,{className:"h-12 w-12 bg-blue-500",children:j.jsx(m.Q5,{children:T(e.firstName,e.lastName)})}),j.jsx(o.ll,{children:`${e.firstName} ${e.lastName}`})]}),j.jsx(r.z,{variant:"ghost",size:"sm",onClick:()=>B(e.id),children:A[e.id]?j.jsx(h.ChevronUpIcon,{className:"h-5 w-5"}):j.jsx(h.ChevronDownIcon,{className:"h-5 w-5"})})]})}),A[e.id]&&(0,j.jsxs)(o.aY,{children:[(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-2",children:[j.jsx(u.CurrencyDollarIcon,{className:"h-5 w-5 text-green-500"}),j.jsx("span",{className:"font-medium",children:"DA:"})]}),l[e.id]?j.jsx(d.I,{type:"number",value:p[e.id]?.dearnessAllowance||e.dearnessAllowance,onChange:a=>O(e.id,"dearnessAllowance",a.target.value),className:"w-24 text-right"}):j.jsx("span",{className:"font-semibold",children:e.dearnessAllowance})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-2",children:[j.jsx(u.CurrencyDollarIcon,{className:"h-5 w-5 text-blue-500"}),j.jsx("span",{className:"font-medium",children:"Salary:"})]}),l[e.id]?j.jsx(d.I,{type:"number",value:p[e.id]?.fullMonthSalary||e.fullMonthSalary,onChange:a=>O(e.id,"fullMonthSalary",a.target.value),className:"w-24 text-right"}):j.jsx("span",{className:"font-semibold",children:e.fullMonthSalary})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-2",children:[j.jsx(u.TruckIcon,{className:"h-5 w-5 text-yellow-500"}),j.jsx("span",{className:"font-medium",children:"Car Rate:"})]}),l[e.id]?j.jsx(d.I,{type:"number",value:k[e.id]?.carRatePerKm||N.find(a=>a.employeeId===e.id)?.carRatePerKm||0,onChange:a=>O(e.id,"carRatePerKm",a.target.value),className:"w-24 text-right"}):j.jsx("span",{className:"font-semibold",children:N.find(a=>a.employeeId===e.id)?.carRatePerKm||0})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-2",children:[j.jsx(u.TruckIcon,{className:"h-5 w-5 text-purple-500"}),j.jsx("span",{className:"font-medium",children:"Bike Rate:"})]}),l[e.id]?j.jsx(d.I,{type:"number",value:k[e.id]?.bikeRatePerKm||N.find(a=>a.employeeId===e.id)?.bikeRatePerKm||0,onChange:a=>O(e.id,"bikeRatePerKm",a.target.value),className:"w-24 text-right"}):j.jsx("span",{className:"font-semibold",children:N.find(a=>a.employeeId===e.id)?.bikeRatePerKm||0})]})]}),j.jsx("div",{className:"mt-4",children:l[e.id]?(0,j.jsxs)("div",{className:"flex space-x-2",children:[j.jsx(r.z,{onClick:()=>E(e.id),className:"flex-1",children:"Save"}),j.jsx(r.z,{onClick:()=>z(e.id),variant:"outline",className:"flex-1",children:"Cancel"})]}):j.jsx(r.z,{onClick:()=>M(e.id),className:"w-full",children:"Edit"})})]})]},e.id))}):(0,j.jsxs)(i.iA,{children:[j.jsx(i.xD,{children:(0,j.jsxs)(i.SC,{children:[j.jsx(i.ss,{children:"Employee"}),j.jsx(i.ss,{children:"DA"}),j.jsx(i.ss,{children:"Salary"}),j.jsx(i.ss,{children:"Car Rate (per km)"}),j.jsx(i.ss,{children:"Bike Rate (per km)"}),j.jsx(i.ss,{children:"Action"})]})}),j.jsx(i.RM,{children:$.map(e=>(0,j.jsxs)(i.SC,{children:[(0,j.jsxs)(i.pj,{children:[e.firstName," ",e.lastName]}),j.jsx(i.pj,{children:l[e.id]?j.jsx(d.I,{type:"number",value:p[e.id]?.dearnessAllowance||e.dearnessAllowance,onChange:a=>O(e.id,"dearnessAllowance",a.target.value),className:"w-full"}):e.dearnessAllowance}),j.jsx(i.pj,{children:l[e.id]?j.jsx(d.I,{type:"number",value:p[e.id]?.fullMonthSalary||e.fullMonthSalary,onChange:a=>O(e.id,"fullMonthSalary",a.target.value),className:"w-full"}):e.fullMonthSalary}),j.jsx(i.pj,{children:l[e.id]?j.jsx(d.I,{type:"number",value:k[e.id]?.carRatePerKm||N.find(a=>a.employeeId===e.id)?.carRatePerKm||0,onChange:a=>O(e.id,"carRatePerKm",a.target.value),className:"w-full"}):N.find(a=>a.employeeId===e.id)?.carRatePerKm||0}),j.jsx(i.pj,{children:l[e.id]?j.jsx(d.I,{type:"number",value:k[e.id]?.bikeRatePerKm||N.find(a=>a.employeeId===e.id)?.bikeRatePerKm||0,onChange:a=>O(e.id,"bikeRatePerKm",a.target.value),className:"w-full"}):N.find(a=>a.employeeId===e.id)?.bikeRatePerKm||0}),j.jsx(i.pj,{children:l[e.id]?(0,j.jsxs)("div",{className:"flex space-x-2",children:[j.jsx(r.z,{onClick:()=>E(e.id),className:"flex-1",children:"Save"}),j.jsx(r.z,{onClick:()=>z(e.id),variant:"outline",className:"flex-1",children:"Cancel"})]}):j.jsx(r.z,{onClick:()=>M(e.id),className:"w-full",children:"Edit"})})]},e.id))})]}),j.jsx(n.tl,{className:"mt-4",children:(0,j.jsxs)(n.ng,{children:[v>1&&j.jsx(n.nt,{children:j.jsx(n.dN,{onClick:()=>b(v-1)})}),[...Array(_)].map((e,a)=>j.jsx(n.nt,{children:j.jsx(n.kN,{isActive:v===a+1,onClick:()=>b(a+1),children:a+1})},a)),v<_&&j.jsx(n.nt,{children:j.jsx(n.$0,{onClick:()=>b(v+1)})})]})})]})};l()}catch(e){l(e)}})},3780:e=>{e.exports={allowanceContainer:"Allowance_allowanceContainer__E2utl",table:"Allowance_table__yBLYf",noDataMessage:"Allowance_noDataMessage__y_QMT"}}};