(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[227],{18190:function(e,r,n){"use strict";n.d(r,{I:function(){return u}});var t=n(59499),a=n(4730),s=n(67294),l=n(82359),i=n(85893),c=["className","type"];function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}var u=s.forwardRef(function(e,r){var n=e.className,s=e.type,u=(0,a.Z)(e,c);return(0,i.jsx)("input",function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach(function(r){(0,t.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}({type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:r},u))});u.displayName="Input"},96071:function(e,r,n){"use strict";n.d(r,{RM:function(){return y},Rn:function(){return k},SC:function(){return N},iA:function(){return j},pj:function(){return g},ss:function(){return w},xD:function(){return b}});var t=n(59499),a=n(4730),s=n(67294),l=n(82359),i=n(85893),c=["className"],o=["className"],u=["className"],d=["className"],f=["className"],m=["className"],p=["className"],h=["className"];function x(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function v(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?x(Object(n),!0).forEach(function(r){(0,t.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var j=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,c);return(0,i.jsx)("div",{className:"relative w-full overflow-auto",children:(0,i.jsx)("table",v({ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",n)},t))})});j.displayName="Table";var b=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,o);return(0,i.jsx)("thead",v({ref:r,className:(0,l.cn)("[&_tr]:border-b",n)},t))});b.displayName="TableHeader";var y=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,u);return(0,i.jsx)("tbody",v({ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",n)},t))});y.displayName="TableBody",s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,d);return(0,i.jsx)("tfoot",v({ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n)},t))}).displayName="TableFooter";var N=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,f);return(0,i.jsx)("tr",v({ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n)},t))});N.displayName="TableRow";var w=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,m);return(0,i.jsx)("th",v({ref:r,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},t))});w.displayName="TableHead";var g=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,p);return(0,i.jsx)("td",v({ref:r,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n)},t))});g.displayName="TableCell";var k=s.forwardRef(function(e,r){var n=e.className,t=(0,a.Z)(e,h);return(0,i.jsx)("caption",v({ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",n)},t))});k.displayName="TableCaption"},40227:function(e,r,n){"use strict";n.r(r);var t=n(27812),a=n(59499),s=n(50029),l=n(64687),i=n.n(l),c=n(67294),o=n(74824),u=n(96071),d=n(5411),f=n(16741),m=n(18190),p=n(82422),h=n(5101),x=n(32604),v=n(64053),j=n(49874),b=n(35879),y=n(45349),N=n.n(y),w=n(85893);function g(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function k(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?g(Object(n),!0).forEach(function(r){(0,a.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}r.default=function(e){var r,n=e.authToken,l=(0,c.useState)([]),y=l[0],g=l[1],O=(0,c.useState)({}),P=O[0],R=O[1],S=(0,c.useState)({}),C=S[0],A=S[1],Z=(0,c.useState)(1),E=Z[0],K=Z[1],I=(0,c.useState)([]),D=I[0],M=I[1],_=(0,c.useState)({}),T=_[0],z=_[1],B=(0,c.useState)(!1),F=B[0],U=B[1],L=(0,c.useState)({}),H=L[0],J=L[1];(0,c.useEffect)(function(){var e=function(){return U(window.innerWidth<768)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var Q=(0,c.useCallback)((0,s.Z)(i().mark(function e(){var r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(n)}});case 3:return r=e.sent,e.next=6,r.json();case 6:g(e.sent.sort(function(e,r){return e.firstName.localeCompare(r.firstName)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),[n]),Y=(0,c.useCallback)((0,s.Z)(i().mark(function e(){var r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/travel-rates/getAll",{headers:{Authorization:"Bearer ".concat(n)}});case 3:if((r=e.sent).ok){e.next=6;break}throw Error("Failed to fetch travel rates");case 6:return e.next=8,r.json();case 8:M(e.sent),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error fetching travel rates:",e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])})),[n]);(0,c.useEffect)(function(){Q(),Y()},[Q,Y]);var q=function(e,r,n){A(function(t){return k(k({},t),{},(0,a.Z)({},e,k(k({},t[e]),{},(0,a.Z)({},r,n))))}),("carRatePerKm"===r||"bikeRatePerKm"===r)&&z(function(t){return k(k({},t),{},(0,a.Z)({},e,k(k({},t[e]),{},(0,a.Z)({},r,parseFloat(n)||0))))})},W=(r=(0,s.Z)(i().mark(function e(r){var t,s,l,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C[r],s=T[r],t){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,fetch("https://api.gajkesaristeels.in/employee/setSalary",{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({travelAllowance:t.travelAllowance,dearnessAllowance:t.dearnessAllowance,fullMonthSalary:t.fullMonthSalary,employeeId:r})});case 7:if(l=e.sent,!s){e.next=19;break}if(!(c=D.find(function(e){return e.employeeId===r}))){e.next=18;break}return e.next=13,fetch("https://api.gajkesaristeels.in/travel-rates/edit?id=".concat(c.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({bikeRatePerKm:s.bikeRatePerKm,carRatePerKm:s.carRatePerKm})});case 13:if(e.sent.ok){e.next=16;break}throw Error("Failed to update travel rates");case 16:e.next=19;break;case 18:console.error("Travel rate entry not found for employee:",r);case 19:return e.next=21,l.text();case 21:if("Salary Updated!"!==e.sent){e.next=29;break}Q(),Y(),R(function(e){return k(k({},e),{},(0,a.Z)({},r,!1))}),f.ZP.success({message:"Success",description:"Salary and travel rates updated successfully!"}),e.next=30;break;case 29:throw Error("Failed to update salary");case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(4),console.error("Error saving changes:",e.t0),f.ZP.error({message:"Error",description:"Error saving changes."});case 36:case"end":return e.stop()}},e,null,[[4,32]])})),function(e){return r.apply(this,arguments)}),$=function(e){R(function(r){return k(k({},r),{},(0,a.Z)({},e,!0))}),A(function(r){var n,t,s;return k(k({},r),{},(0,a.Z)({},e,{travelAllowance:null===(n=y.find(function(r){return r.id===e}))||void 0===n?void 0:n.travelAllowance,dearnessAllowance:null===(t=y.find(function(r){return r.id===e}))||void 0===t?void 0:t.dearnessAllowance,fullMonthSalary:null===(s=y.find(function(r){return r.id===e}))||void 0===s?void 0:s.fullMonthSalary}))}),z(function(r){return k(k({},r),{},(0,a.Z)({},e,D.find(function(r){return r.employeeId===e})||{carRatePerKm:0,bikeRatePerKm:0}))})},G=function(e){R(function(r){return k(k({},r),{},(0,a.Z)({},e,!1))}),A(function(r){var n=k({},r);return delete n[e],n}),z(function(r){var n=k({},r);return delete n[e],n})},V=10*E,X=y.slice(V-10,V),ee=Math.ceil(y.length/10),er=function(e){J(function(r){return k(k({},r),{},(0,a.Z)({},e,!r[e]))})};return(0,w.jsxs)("div",{className:N().allowanceContainer,children:[(0,w.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Allowance Details"}),F?(0,w.jsx)("div",{className:"space-y-4",children:X.map(function(e){var r,n,t,a,s,l,i,c,u,d;return(0,w.jsxs)(p.Zb,{className:"overflow-hidden",children:[(0,w.jsx)(p.Ol,{className:"pb-2",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,w.jsx)(h.qE,{className:"h-12 w-12 bg-blue-500",children:(0,w.jsx)(h.Q5,{children:(u=e.firstName,d=e.lastName,"".concat(u.charAt(0)).concat(d.charAt(0)).toUpperCase())})}),(0,w.jsx)(p.ll,{children:"".concat(e.firstName," ").concat(e.lastName)})]}),(0,w.jsx)(o.z,{variant:"ghost",size:"sm",onClick:function(){return er(e.id)},children:H[e.id]?(0,w.jsx)(x.Z,{className:"h-5 w-5"}):(0,w.jsx)(v.Z,{className:"h-5 w-5"})})]})}),H[e.id]&&(0,w.jsxs)(p.aY,{children:[(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(j.Z,{className:"h-5 w-5 text-green-500"}),(0,w.jsx)("span",{className:"font-medium",children:"DA:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(r=C[e.id])||void 0===r?void 0:r.dearnessAllowance)||e.dearnessAllowance,onChange:function(r){return q(e.id,"dearnessAllowance",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:e.dearnessAllowance})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(j.Z,{className:"h-5 w-5 text-blue-500"}),(0,w.jsx)("span",{className:"font-medium",children:"Salary:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(n=C[e.id])||void 0===n?void 0:n.fullMonthSalary)||e.fullMonthSalary,onChange:function(r){return q(e.id,"fullMonthSalary",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:e.fullMonthSalary})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(b.Z,{className:"h-5 w-5 text-yellow-500"}),(0,w.jsx)("span",{className:"font-medium",children:"Car Rate:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(t=T[e.id])||void 0===t?void 0:t.carRatePerKm)||(null===(a=D.find(function(r){return r.employeeId===e.id}))||void 0===a?void 0:a.carRatePerKm)||0,onChange:function(r){return q(e.id,"carRatePerKm",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:(null===(s=D.find(function(r){return r.employeeId===e.id}))||void 0===s?void 0:s.carRatePerKm)||0})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(b.Z,{className:"h-5 w-5 text-purple-500"}),(0,w.jsx)("span",{className:"font-medium",children:"Bike Rate:"})]}),P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(l=T[e.id])||void 0===l?void 0:l.bikeRatePerKm)||(null===(i=D.find(function(r){return r.employeeId===e.id}))||void 0===i?void 0:i.bikeRatePerKm)||0,onChange:function(r){return q(e.id,"bikeRatePerKm",r.target.value)},className:"w-24 text-right"}):(0,w.jsx)("span",{className:"font-semibold",children:(null===(c=D.find(function(r){return r.employeeId===e.id}))||void 0===c?void 0:c.bikeRatePerKm)||0})]})]}),(0,w.jsx)("div",{className:"mt-4",children:P[e.id]?(0,w.jsxs)("div",{className:"flex space-x-2",children:[(0,w.jsx)(o.z,{onClick:function(){return W(e.id)},className:"flex-1",children:"Save"}),(0,w.jsx)(o.z,{onClick:function(){return G(e.id)},variant:"outline",className:"flex-1",children:"Cancel"})]}):(0,w.jsx)(o.z,{onClick:function(){return $(e.id)},className:"w-full",children:"Edit"})})]})]},e.id)})}):(0,w.jsxs)(u.iA,{children:[(0,w.jsx)(u.xD,{children:(0,w.jsxs)(u.SC,{children:[(0,w.jsx)(u.ss,{children:"Employee"}),(0,w.jsx)(u.ss,{children:"DA"}),(0,w.jsx)(u.ss,{children:"Salary"}),(0,w.jsx)(u.ss,{children:"Car Rate (per km)"}),(0,w.jsx)(u.ss,{children:"Bike Rate (per km)"}),(0,w.jsx)(u.ss,{children:"Action"})]})}),(0,w.jsx)(u.RM,{children:X.map(function(e){var r,n,t,a,s,l,i,c;return(0,w.jsxs)(u.SC,{children:[(0,w.jsxs)(u.pj,{children:[e.firstName," ",e.lastName]}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(r=C[e.id])||void 0===r?void 0:r.dearnessAllowance)||e.dearnessAllowance,onChange:function(r){return q(e.id,"dearnessAllowance",r.target.value)},className:"w-full"}):e.dearnessAllowance}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(n=C[e.id])||void 0===n?void 0:n.fullMonthSalary)||e.fullMonthSalary,onChange:function(r){return q(e.id,"fullMonthSalary",r.target.value)},className:"w-full"}):e.fullMonthSalary}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(t=T[e.id])||void 0===t?void 0:t.carRatePerKm)||(null===(a=D.find(function(r){return r.employeeId===e.id}))||void 0===a?void 0:a.carRatePerKm)||0,onChange:function(r){return q(e.id,"carRatePerKm",r.target.value)},className:"w-full"}):(null===(s=D.find(function(r){return r.employeeId===e.id}))||void 0===s?void 0:s.carRatePerKm)||0}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsx)(m.I,{type:"number",value:(null===(l=T[e.id])||void 0===l?void 0:l.bikeRatePerKm)||(null===(i=D.find(function(r){return r.employeeId===e.id}))||void 0===i?void 0:i.bikeRatePerKm)||0,onChange:function(r){return q(e.id,"bikeRatePerKm",r.target.value)},className:"w-full"}):(null===(c=D.find(function(r){return r.employeeId===e.id}))||void 0===c?void 0:c.bikeRatePerKm)||0}),(0,w.jsx)(u.pj,{children:P[e.id]?(0,w.jsxs)("div",{className:"flex space-x-2",children:[(0,w.jsx)(o.z,{onClick:function(){return W(e.id)},className:"flex-1",children:"Save"}),(0,w.jsx)(o.z,{onClick:function(){return G(e.id)},variant:"outline",className:"flex-1",children:"Cancel"})]}):(0,w.jsx)(o.z,{onClick:function(){return $(e.id)},className:"w-full",children:"Edit"})})]},e.id)})})]}),(0,w.jsx)(d.tl,{className:"mt-4",children:(0,w.jsxs)(d.ng,{children:[E>1&&(0,w.jsx)(d.nt,{children:(0,w.jsx)(d.dN,{onClick:function(){return K(E-1)}})}),(0,t.Z)(Array(ee)).map(function(e,r){return(0,w.jsx)(d.nt,{children:(0,w.jsx)(d.kN,{isActive:E===r+1,onClick:function(){return K(r+1)},children:r+1})},r)}),E<ee&&(0,w.jsx)(d.nt,{children:(0,w.jsx)(d.$0,{onClick:function(){return K(E+1)}})})]})})]})}},45349:function(e){e.exports={allowanceContainer:"Allowance_allowanceContainer__E2utl",table:"Allowance_table__yBLYf",noDataMessage:"Allowance_noDataMessage__y_QMT"}}}]);