"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4896],{74824:function(e,t,s){s.d(t,{d:function(){return m},z:function(){return p}});var n=s(59499),a=s(4730),r=s(67294),i=s(88426),c=s(45139),l=s(82359),o=s(85893),d=["className","variant","size","asChild"];function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}var m=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),p=r.forwardRef(function(e,t){var s=e.className,r=e.variant,c=e.size,p=e.asChild,f=(0,a.Z)(e,d),x=void 0!==p&&p?i.g7:"button";return(0,o.jsx)(x,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({className:(0,l.cn)(m({variant:r,size:c,className:s})),ref:t},f))});p.displayName="Button"},82422:function(e,t,s){s.d(t,{Ol:function(){return y},SZ:function(){return j},Zb:function(){return h},aY:function(){return b},eW:function(){return v},ll:function(){return g}});var n=s(59499),a=s(4730),r=s(67294),i=s(82359),c=s(85893),l=["className"],o=["className"],d=["className"],u=["className"],m=["className"],p=["className"];function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var h=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,l);return(0,c.jsx)("div",x({ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",s)},n))});h.displayName="Card";var y=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,o);return(0,c.jsx)("div",x({ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s)},n))});y.displayName="CardHeader";var g=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,d);return(0,c.jsx)("h3",x({ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",s)},n))});g.displayName="CardTitle";var j=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,u);return(0,c.jsx)("p",x({ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s)},n))});j.displayName="CardDescription";var b=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,m);return(0,c.jsx)("div",x({ref:t,className:(0,i.cn)("p-6 pt-0",s)},n))});b.displayName="CardContent";var v=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,p);return(0,c.jsx)("div",x({ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s)},n))});v.displayName="CardFooter"},5411:function(e,t,s){s.d(t,{$0:function(){return D},Dj:function(){return k},dN:function(){return w},kN:function(){return N},ng:function(){return b},nt:function(){return v},tl:function(){return j}});var n=s(59499),a=s(4730),r=s(67294),i=s(62469),c=s(82359),l=s(74824),o=s(85893),d=["className"],u=["className"],m=["className"],p=["className","isActive","size"],f=["className"],x=["className"],h=["className"];function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var j=function(e){var t=e.className,s=(0,a.Z)(e,d);return(0,o.jsx)("nav",g({role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",t)},s))};j.displayName="Pagination";var b=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,u);return(0,o.jsx)("ul",g({ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",s)},n))});b.displayName="PaginationContent";var v=r.forwardRef(function(e,t){var s=e.className,n=(0,a.Z)(e,m);return(0,o.jsx)("li",g({ref:t,className:(0,c.cn)("",s)},n))});v.displayName="PaginationItem";var N=function(e){var t=e.className,s=e.isActive,n=e.size,r=(0,a.Z)(e,p);return(0,o.jsx)("a",g({"aria-current":s?"page":void 0,className:(0,c.cn)((0,l.d)({variant:s?"outline":"ghost",size:void 0===n?"icon":n}),t)},r))};N.displayName="PaginationLink";var w=function(e){var t=e.className,s=(0,a.Z)(e,f);return(0,o.jsxs)(N,g(g({"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",t)},s),{},{children:[(0,o.jsx)(i.wyc,{className:"h-4 w-4"}),(0,o.jsx)("span",{children:"Previous"})]}))};w.displayName="PaginationPrevious";var D=function(e){var t=e.className,s=(0,a.Z)(e,x);return(0,o.jsxs)(N,g(g({"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",t)},s),{},{children:[(0,o.jsx)("span",{children:"Next"}),(0,o.jsx)(i.XCv,{className:"h-4 w-4"})]}))};D.displayName="PaginationNext";var k=function(e){var t=e.className,s=(0,a.Z)(e,h);return(0,o.jsxs)("span",g(g({"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",t)},s),{},{children:[(0,o.jsx)(i.nWS,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"More pages"})]}))};k.displayName="PaginationEllipsis"},22306:function(e,t,s){s.r(t);var n=s(67294),a=s(34145),r=s(56846),i=s(30449),c=s(85893);t.default=function(e){var t=e.selectedOption,s=e.onDateRangeChange,l=(0,n.useState)(!1),o=l[0],d=l[1],u=(0,n.useState)(!1),m=u[0],p=u[1],f=(0,n.useState)((0,a.WU)(new Date,"yyyy-MM-dd")),x=f[0],h=f[1],y=(0,n.useState)((0,a.WU)(new Date,"yyyy-MM-dd")),g=y[0],j=y[1],b=function(e){if(d(!1),"Custom Date Range"===e)p(!0);else{var t="",n="";switch(e){case"Today":t=(0,a.WU)(new Date,"yyyy-MM-dd"),n=(0,a.WU)(new Date,"yyyy-MM-dd");break;case"Last 7 Days":t=(0,a.WU)((0,r.k)(new Date,7),"yyyy-MM-dd"),n=(0,a.WU)(new Date,"yyyy-MM-dd");break;case"Last 15 Days":t=(0,a.WU)((0,r.k)(new Date,15),"yyyy-MM-dd"),n=(0,a.WU)(new Date,"yyyy-MM-dd");break;case"Last 30 Days":t=(0,a.WU)((0,r.k)(new Date,30),"yyyy-MM-dd"),n=(0,a.WU)(new Date,"yyyy-MM-dd")}s(t,n,e)}};return(0,c.jsxs)("div",{className:"relative inline-block text-left",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",id:"options-menu","aria-haspopup":"true","aria-expanded":o,onClick:function(){d(!o)},children:[t,(0,c.jsx)(i.Z,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]})}),o&&(0,c.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:(0,c.jsx)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:["Today","Last 7 Days","Last 15 Days","Last 30 Days","Custom Date Range"].map(function(e){return(0,c.jsx)("a",{href:"#",className:"".concat(e===t?"bg-gray-100 text-gray-900":"text-gray-700"," block px-4 py-2 text-sm"),role:"menuitem",onClick:function(){return b(e)},children:e},e)})})}),m&&(0,c.jsx)("div",{className:"fixed inset-0 z-20 overflow-y-auto",children:(0,c.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-6 pb-20 text-center sm:block sm:p-0",children:[(0,c.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,c.jsx)("div",{className:"absolute inset-0 bg-gray-900 opacity-75"})}),(0,c.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,c.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,c.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,c.jsx)("div",{children:(0,c.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:text-left",children:[(0,c.jsx)("h3",{className:"text-2xl leading-6 font-semibold text-gray-900 mb-4",children:"Custom Date Range"}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,c.jsx)("input",{type:"date",name:"startDate",id:"startDate",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:x,onChange:function(e){return h(e.target.value)}})]}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,c.jsx)("input",{type:"date",name:"endDate",id:"endDate",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",value:g,onChange:function(e){return j(e.target.value)}})]})]})})}),(0,c.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,c.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-6 py-3 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){s(x,g,"Custom Date Range"),p(!1)},children:"Apply"}),(0,c.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-6 py-3 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){return p(!1)},children:"Cancel"})]})]})]})})]})}},44896:function(e,t,s){s.r(t);var n=s(27812),a=s(16835),r=s(67294),i=s(34145),c=s(47034),l=s(61805),o=s(30449),d=s(22692),u=s(71573),m=s(50333),p=s(72161),f=s(32723),x=s(25737),h=s(63157),y=s(45091),g=s(82422),j=s(74824),b=s(5411),v=s(20373),N=s(22306),w=s(11163),D=s(85893),k=function(e){var t=e.title,s=e.value;return(0,D.jsxs)(g.Zb,{children:[(0,D.jsx)(g.Ol,{children:(0,D.jsx)(g.ll,{children:t})}),(0,D.jsx)(g.aY,{children:(0,D.jsx)("p",{className:"text-4xl font-bold",children:s})})]})},O=function(e){var t=e.data;return(0,D.jsxs)(g.Zb,{children:[(0,D.jsx)(g.Ol,{children:(0,D.jsx)(g.ll,{children:"Visits by Purpose"})}),(0,D.jsx)(g.aY,{children:(0,D.jsx)(d.h,{width:"100%",height:300,children:(0,D.jsxs)(u.v,{data:t,children:[(0,D.jsx)(m.q,{strokeDasharray:"3 3"}),(0,D.jsx)(p.K,{dataKey:"purpose"}),(0,D.jsx)(f.B,{}),(0,D.jsx)(x.u,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"none"}}),(0,D.jsx)(h.D,{}),(0,D.jsx)(y.$,{dataKey:"visits",fill:"#1a202c"})]})})})]})},C=function(e){var t=e.visits,s=e.onViewDetails,d=e.currentPage,u=e.onPageChange,m=r.useState("desc"),p=(0,a.Z)(m,2),f=p[0],x=p[1],h=r.useState("visit_date"),y=(0,a.Z)(h,2),j=y[0],v=y[1],N=r.useState(null),w=(0,a.Z)(N,2),k=w[0],O=w[1],C=function(e){e===j?x("asc"===f?"desc":"asc"):(v(e),x("desc")),O(e)},P=Math.ceil(t.length/10),Z=(0,n.Z)(t).sort(function(e,t){var s=e[j],n=t[j];return null==s?1:null==n?-1:"string"==typeof s&&"string"==typeof n?"asc"===f?s.localeCompare(n):n.localeCompare(s):s<n?"asc"===f?-1:1:s>n?"asc"===f?1:-1:0}),M=(d-1)*10,S=Z.slice(M,M+10);return(0,D.jsxs)(g.Zb,{children:[(0,D.jsx)(g.Ol,{children:(0,D.jsx)(g.ll,{children:"Recent Completed Visits"})}),(0,D.jsx)(g.aY,{children:(0,D.jsxs)("table",{className:"w-full",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsxs)("th",{className:"px-4 py-2 cursor-pointer",onClick:function(){return C("storeName")},children:["Store","storeName"===k&&("asc"===f?(0,D.jsx)(l.Z,{className:"w-4 h-4 inline-block ml-1"}):(0,D.jsx)(o.Z,{className:"w-4 h-4 inline-block ml-1"}))]}),(0,D.jsxs)("th",{className:"px-4 py-2 cursor-pointer",onClick:function(){return C("employeeName")},children:["Employee","employeeName"===k&&("asc"===f?(0,D.jsx)(l.Z,{className:"w-4 h-4 inline-block ml-1"}):(0,D.jsx)(o.Z,{className:"w-4 h-4 inline-block ml-1"}))]}),(0,D.jsxs)("th",{className:"px-4 py-2 cursor-pointer",onClick:function(){return C("visit_date")},children:["Date","visit_date"===k&&("asc"===f?(0,D.jsx)(l.Z,{className:"w-4 h-4 inline-block ml-1"}):(0,D.jsx)(o.Z,{className:"w-4 h-4 inline-block ml-1"}))]}),(0,D.jsxs)("th",{className:"px-4 py-2 cursor-pointer",onClick:function(){return C("purpose")},children:["Purpose","purpose"===k&&("asc"===f?(0,D.jsx)(l.Z,{className:"w-4 h-4 inline-block ml-1"}):(0,D.jsx)(o.Z,{className:"w-4 h-4 inline-block ml-1"}))]}),(0,D.jsxs)("th",{className:"px-4 py-2 cursor-pointer",onClick:function(){return C("employeeState")},children:["City","employeeState"===k&&("asc"===f?(0,D.jsx)(l.Z,{className:"w-4 h-4 inline-block ml-1"}):(0,D.jsx)(o.Z,{className:"w-4 h-4 inline-block ml-1"}))]}),(0,D.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,D.jsx)("th",{className:"px-4 py-2",children:"Actions"})]})}),(0,D.jsxs)("tbody",{children:[S.map(function(e){var t=e.checkinTime&&e.checkoutTime?{emoji:"✅",status:"Completed",color:"bg-purple-100 text-purple-800"}:e.checkoutTime?{emoji:"⏱️",status:"Checked Out",color:"bg-orange-100 text-orange-800"}:e.checkinTime?{emoji:"\uD83D\uDD70️",status:"On Going",color:"bg-green-100 text-green-800"}:{emoji:"\uD83D\uDCC5",status:"Assigned",color:"bg-blue-100 text-blue-800"},n=t.emoji,a=t.status,r=t.color;return"Completed"!==a?null:(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"px-4 py-2",children:e.storeName}),(0,D.jsx)("td",{className:"px-4 py-2 capitalize",children:e.employeeName}),(0,D.jsx)("td",{className:"px-4 py-2",children:(0,i.WU)((0,c.D)(e.visit_date),"dd MMM ''yy")}),(0,D.jsx)("td",{className:"px-4 py-2",children:e.purpose}),(0,D.jsx)("td",{className:"px-4 py-2 capitalize",children:e.employeeState}),(0,D.jsxs)("td",{className:"px-4 py-2 ".concat(r),children:[n," ",a]}),(0,D.jsx)("td",{className:"px-4 py-2",children:(0,D.jsx)("button",{className:"text-blue-500 hover:text-blue-700",onClick:function(){return s(e.id)},children:"View"})})]},e.id)}),0===S.length&&(0,D.jsx)("tr",{children:(0,D.jsx)("td",{className:"px-4 py-2 text-center",colSpan:7,children:"No visits available"})})]})]})}),P>1&&S.length>0&&(0,D.jsx)(b.tl,{children:(0,D.jsxs)(b.ng,{children:[(0,D.jsx)(b.nt,{children:(0,D.jsx)(b.kN,{onClick:function(){return u(d-1)},className:1===d?"pointer-events-none opacity-50":"",children:"Previous"})}),Array.from({length:P},function(e,t){return(0,D.jsx)(b.nt,{children:(0,D.jsx)(b.kN,{onClick:function(){return u(t+1)},className:d===t+1?"bg-gray-300":"",children:t+1})},t)}),(0,D.jsx)(b.nt,{children:(0,D.jsx)(b.kN,{onClick:function(){return u(d+1)},className:d===P?"pointer-events-none opacity-50":"",children:"Next"})})]})})]})};t.default=function(e){var t=e.employeeDetails,s=e.selectedEmployee,n=e.setSelectedEmployee,i=e.handleDateRangeChange,c=e.selectedOption,l=(e.handleViewDetails,e.currentPage),o=e.setCurrentPage,d=e.isLoading,u=(0,w.useRouter)(),m=(0,r.useMemo)(function(){return t&&t.visitDto?Object.entries(t.visitDto.filter(function(e){return e.checkinTime&&e.checkoutTime}).reduce(function(e,t){var s=t.purpose?t.purpose.trim().toLowerCase():"unknown";return e[s]||(e[s]=0),e[s]++,e},{})).map(function(e){var t=(0,a.Z)(e,2),s=t[0],n=t[1];return{purpose:s.charAt(0).toUpperCase()+s.slice(1),visits:Number(n)}}):[]},[t]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,D.jsx)("h1",{className:"text-3xl font-bold capitalize",children:s}),(0,D.jsx)(j.z,{variant:"ghost",size:"lg",onClick:function(){return n(null)},children:"Back"})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,D.jsx)(k,{title:"Total Completed Visits",value:t.statsDto?t.statsDto.completedVisitCount:0}),(0,D.jsx)(k,{title:"Full Days",value:t.statsDto?t.statsDto.fullDays:0}),(0,D.jsx)(k,{title:"Half Days",value:t.statsDto?t.statsDto.halfDays:0}),(0,D.jsx)(k,{title:"Absences",value:t.statsDto?t.statsDto.absences:0})]}),(0,D.jsx)("div",{className:"mb-8",children:(0,D.jsx)(N.default,{selectedOption:c,onDateRangeChange:i})}),d?(0,D.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,D.jsx)(v.Z,{color:"#4A90E2",size:50})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(C,{visits:t.visitDto||[],onViewDetails:function(e){u.push({pathname:"/VisitDetailPage/".concat(e),query:{returnTo:"employeeDetails",employeeId:s,startDate:c.split(",")[0],endDate:c.split(",")[1]}})},currentPage:l,onPageChange:o}),(0,D.jsx)("div",{className:"mt-8",children:(0,D.jsx)(O,{data:m})})]})]})}}}]);