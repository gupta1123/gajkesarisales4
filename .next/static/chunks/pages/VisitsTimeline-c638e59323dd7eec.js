(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{74824:function(e,r,t){"use strict";t.d(r,{d:function(){return f},z:function(){return m}});var n=t(59499),a=t(4730),s=t(67294),i=t(88426),c=t(45139),o=t(82359),l=t(85893),u=["className","variant","size","asChild"];function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}var f=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=s.forwardRef(function(e,r){var t=e.className,s=e.variant,c=e.size,m=e.asChild,p=(0,a.Z)(e,u),v=void 0!==m&&m?i.g7:"button";return(0,l.jsx)(v,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({className:(0,o.cn)(f({variant:s,size:c,className:t})),ref:r},p))});m.displayName="Button"},82422:function(e,r,t){"use strict";t.d(r,{Ol:function(){return j},SZ:function(){return x},Zb:function(){return h},aY:function(){return b},eW:function(){return g},ll:function(){return N}});var n=t(59499),a=t(4730),s=t(67294),i=t(82359),c=t(85893),o=["className"],l=["className"],u=["className"],d=["className"],f=["className"],m=["className"];function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var h=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,o);return(0,c.jsx)("div",v({ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",t)},n))});h.displayName="Card";var j=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,l);return(0,c.jsx)("div",v({ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t)},n))});j.displayName="CardHeader";var N=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,u);return(0,c.jsx)("h3",v({ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",t)},n))});N.displayName="CardTitle";var x=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,d);return(0,c.jsx)("p",v({ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t)},n))});x.displayName="CardDescription";var b=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,f);return(0,c.jsx)("div",v({ref:r,className:(0,i.cn)("p-6 pt-0",t)},n))});b.displayName="CardContent";var g=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,m);return(0,c.jsx)("div",v({ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t)},n))});g.displayName="CardFooter"},5411:function(e,r,t){"use strict";t.d(r,{$0:function(){return w},Dj:function(){return P},dN:function(){return O},kN:function(){return y},ng:function(){return b},nt:function(){return g},tl:function(){return x}});var n=t(59499),a=t(4730),s=t(67294),i=t(62469),c=t(82359),o=t(74824),l=t(85893),u=["className"],d=["className"],f=["className"],m=["className","isActive","size"],p=["className"],v=["className"],h=["className"];function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var x=function(e){var r=e.className,t=(0,a.Z)(e,u);return(0,l.jsx)("nav",N({role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",r)},t))};x.displayName="Pagination";var b=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,d);return(0,l.jsx)("ul",N({ref:r,className:(0,c.cn)("flex flex-row items-center gap-1",t)},n))});b.displayName="PaginationContent";var g=s.forwardRef(function(e,r){var t=e.className,n=(0,a.Z)(e,f);return(0,l.jsx)("li",N({ref:r,className:(0,c.cn)("",t)},n))});g.displayName="PaginationItem";var y=function(e){var r=e.className,t=e.isActive,n=e.size,s=(0,a.Z)(e,m);return(0,l.jsx)("a",N({"aria-current":t?"page":void 0,className:(0,c.cn)((0,o.d)({variant:t?"outline":"ghost",size:void 0===n?"icon":n}),r)},s))};y.displayName="PaginationLink";var O=function(e){var r=e.className,t=(0,a.Z)(e,p);return(0,l.jsxs)(y,N(N({"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",r)},t),{},{children:[(0,l.jsx)(i.wyc,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Previous"})]}))};O.displayName="PaginationPrevious";var w=function(e){var r=e.className,t=(0,a.Z)(e,v);return(0,l.jsxs)(y,N(N({"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",r)},t),{},{children:[(0,l.jsx)("span",{children:"Next"}),(0,l.jsx)(i.XCv,{className:"h-4 w-4"})]}))};w.displayName="PaginationNext";var P=function(e){var r=e.className,t=(0,a.Z)(e,h);return(0,l.jsxs)("span",N(N({"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",r)},t),{},{children:[(0,l.jsx)(i.nWS,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"More pages"})]}))};P.displayName="PaginationEllipsis"},62128:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var n=t(50029),a=t(64687),s=t.n(a),i=t(67294),c=t(82422);t(73321);var o=t(41664),l=t.n(o),u=t(45007),d=t(74824),f=t(5411),m=t(85893);function p(e){var r,t=e.storeId,a=(0,i.useState)([]),o=a[0],p=a[1],v=(0,i.useState)(!0),h=v[0],j=v[1],N=(0,i.useState)(null),x=N[0],b=N[1],g=(0,i.useState)(1),y=g[0],O=g[1],w=(0,i.useState)(!1),P=w[0],k=w[1],Z=(0,u.v9)(function(e){return e.auth.token}),D=(0,i.useCallback)((0,n.Z)(s().mark(function e(){var r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/visit/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(Z)}});case 3:return r=e.sent,e.next=6,r.json();case 6:p(e.sent.sort(function(e,r){return new Date(r.visit_date).getTime()-new Date(e.visit_date).getTime()})),j(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),b("Failed to fetch visits."),j(!1);case 16:case"end":return e.stop()}},e,null,[[0,12]])})),[t,Z]);if((0,i.useEffect)(function(){t&&Z&&D()},[t,Z,D]),h)return(0,m.jsx)("div",{children:"Loading visits..."});if(x)return(0,m.jsxs)("div",{children:["Error: ",x]});var C=3*y,S=P?o.slice(C-3,C):o.slice(0,3),E=Math.ceil(o.length/3);return(0,m.jsxs)(c.Zb,{children:[(0,m.jsx)(c.Ol,{children:(0,m.jsx)(c.ll,{children:"Visits Timeline"})}),(0,m.jsxs)(c.aY,{children:[(0,m.jsx)("div",{className:"timeline",children:S.map(function(e){return(0,m.jsxs)("div",{className:"timeline-item",children:[(0,m.jsx)("div",{className:"timeline-point"}),(0,m.jsxs)("div",{className:"timeline-content",children:[(0,m.jsxs)("div",{className:"timeline-header",children:[(0,m.jsx)("div",{className:"timeline-date",children:e.visit_date}),(0,m.jsx)(l(),{href:"/VisitDetailPage/[id]",as:"/VisitDetailPage/".concat(e.id),passHref:!0,children:(0,m.jsxs)("div",{className:"timeline-visit-id",children:["Visit ID: ",e.id]})})]}),(0,m.jsx)("div",{className:"timeline-title",children:e.purpose}),(0,m.jsxs)("div",{className:"timeline-description",children:[(0,m.jsxs)("p",{children:["Store: ",e.storeName]}),(0,m.jsxs)("p",{children:["Employee: ",e.employeeName]}),e.feedback&&(0,m.jsxs)("p",{children:["Feedback: ",e.feedback]})]})]})]},e.id)})}),o.length>3&&(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)(d.z,{onClick:function(){return k(!P)},children:P?"Show Less":"Show More"})}),P&&(0,m.jsx)("div",{className:"pagination-container mt-4",children:(0,m.jsxs)(f.tl,{children:[(0,m.jsx)(f.dN,{onClick:function(){return O(function(e){return Math.max(e-1,1)})},className:1===y?"disabled":"",children:"Previous"}),(0,m.jsx)(f.ng,{children:(r=3*Math.floor((y-1)/3),[,,,].fill(0).map(function(e,t){return r+t+1}).filter(function(e){return e<=E})).map(function(e,r){return(0,m.jsx)(f.nt,{children:(0,m.jsx)(f.kN,{isActive:e===y,onClick:function(){return O(e)},children:e})},r)})}),(0,m.jsx)(f.$0,{onClick:function(){return O(function(e){return Math.min(e+1,E)})},className:y===E?"disabled":"",children:"Next"})]})})]})]})}},58612:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/VisitsTimeline",function(){return t(62128)}])},73321:function(){}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=58612)}),_N_E=e.O()}]);