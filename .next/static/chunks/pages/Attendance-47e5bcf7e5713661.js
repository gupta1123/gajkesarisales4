(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{18190:function(e,t,r){"use strict";r.d(t,{I:function(){return d}});var n=r(59499),a=r(4730),s=r(67294),c=r(82359),i=r(85893),o=["className","type"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var d=s.forwardRef(function(e,t){var r=e.className,s=e.type,d=(0,a.Z)(e,o);return(0,i.jsx)("input",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:s,className:(0,c.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t},d))});d.displayName="Input"},14031:function(e,t,r){"use strict";r.d(t,{Bw:function(){return O},Ph:function(){return j},Ql:function(){return k},i4:function(){return g},ki:function(){return b}});var n=r(59499),a=r(4730),s=r(67294),c=r(62469),i=r(72116),o=r(82359),l=r(85893),d=["className","children"],u=["className"],f=["className"],m=["className","children","position"],p=["className"],h=["className","children"],x=["className"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var j=i.fC;i.ZA;var b=i.B4,g=s.forwardRef(function(e,t){var r=e.className,n=e.children,s=(0,a.Z)(e,d);return(0,l.jsxs)(i.xz,v(v({ref:t,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},s),{},{children:[n,(0,l.jsx)(i.JO,{asChild:!0,children:(0,l.jsx)(c.jnn,{className:"h-4 w-4 opacity-50"})})]}))});g.displayName=i.xz.displayName;var N=s.forwardRef(function(e,t){var r=e.className,n=(0,a.Z)(e,u);return(0,l.jsx)(i.u_,v(v({ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r)},n),{},{children:(0,l.jsx)(c.g8U,{})}))});N.displayName=i.u_.displayName;var w=s.forwardRef(function(e,t){var r=e.className,n=(0,a.Z)(e,f);return(0,l.jsx)(i.$G,v(v({ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",r)},n),{},{children:(0,l.jsx)(c.v4q,{})}))});w.displayName=i.$G.displayName;var O=s.forwardRef(function(e,t){var r=e.className,n=e.children,s=e.position,c=void 0===s?"popper":s,d=(0,a.Z)(e,m);return(0,l.jsx)(i.h_,{children:(0,l.jsxs)(i.VY,v(v({ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:c},d),{},{children:[(0,l.jsx)(N,{}),(0,l.jsx)(i.l_,{className:(0,o.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,l.jsx)(w,{})]}))})});O.displayName=i.VY.displayName,s.forwardRef(function(e,t){var r=e.className,n=(0,a.Z)(e,p);return(0,l.jsx)(i.__,v({ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r)},n))}).displayName=i.__.displayName;var k=s.forwardRef(function(e,t){var r=e.className,n=e.children,s=(0,a.Z)(e,h);return(0,l.jsxs)(i.ck,v(v({ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},s),{},{children:[(0,l.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(i.wU,{children:(0,l.jsx)(c.nQG,{className:"h-4 w-4"})})}),(0,l.jsx)(i.eT,{children:n})]}))});k.displayName=i.ck.displayName,s.forwardRef(function(e,t){var r=e.className,n=(0,a.Z)(e,x);return(0,l.jsx)(i.Z0,v({ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",r)},n))}).displayName=i.Z0.displayName},95758:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(59499),a=r(50029),s=r(64687),c=r.n(s),i=r(67294),o=r(45007),l=r(81934),d=r(14031),u=r(18190);let f=i.createContext({});function m({count:e=1,wrapper:t,className:r,containerClassName:n,containerTestId:a,circle:s=!1,style:c,...o}){var l,d,u;let m=i.useContext(f),p={...o};for(let[e,t]of Object.entries(o))void 0===t&&delete p[e];let h={...m,...p,circle:s},x={...c,...function({baseColor:e,highlightColor:t,width:r,height:n,borderRadius:a,circle:s,direction:c,duration:i,enableAnimation:o=!0}){let l={};return"rtl"===c&&(l["--animation-direction"]="reverse"),"number"==typeof i&&(l["--animation-duration"]=`${i}s`),o||(l["--pseudo-element-display"]="none"),("string"==typeof r||"number"==typeof r)&&(l.width=r),("string"==typeof n||"number"==typeof n)&&(l.height=n),("string"==typeof a||"number"==typeof a)&&(l.borderRadius=a),s&&(l.borderRadius="50%"),void 0!==e&&(l["--base-color"]=e),void 0!==t&&(l["--highlight-color"]=t),l}(h)},y="react-loading-skeleton";r&&(y+=` ${r}`);let v=null!==(l=h.inline)&&void 0!==l&&l,j=[],b=Math.ceil(e);for(let t=0;t<b;t++){let r=x;if(b>e&&t===b-1){let t=null!==(d=r.width)&&void 0!==d?d:"100%",n=e%1,a="number"==typeof t?t*n:`calc(${t} * ${n})`;r={...r,width:a}}let n=i.createElement("span",{className:y,style:r,key:t},"â€Œ");v?j.push(n):j.push(i.createElement(i.Fragment,{key:t},n,i.createElement("br",null)))}return i.createElement("span",{className:n,"data-testid":a,"aria-live":"polite","aria-busy":null===(u=h.enableAnimation)||void 0===u||u},t?j.map((e,r)=>i.createElement(t,{key:r},e)):j)}r(1796);var p=r(85893),h=(0,i.createContext)(void 0),x=function(e){var t=e.children,r=(0,i.useState)({startDate:null,endDate:null,employeeName:""}),n=r[0],a=r[1];return(0,p.jsx)(h.Provider,{value:{filters:n,setFilters:a},children:t})},y=r(29746);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}r(69436);var b=function(){var e,t=(0,i.useState)([]),r=t[0],n=t[1],s=(0,i.useState)([]),f=s[0],h=s[1],v=(0,i.useState)(new Date().getFullYear()),b=v[0],g=v[1],N=(0,i.useState)(new Date().getMonth()),w=N[0],O=N[1],k=(0,i.useState)(""),D=k[0],S=k[1],C=(0,i.useState)(""),_=C[0],P=C[1],E=(0,i.useState)(!0),A=E[0],Z=E[1],F=(0,i.useState)(!1),R=F[0],L=F[1],B=(0,i.useState)([]),M=B[0],z=B[1],I=(0,i.useState)(""),T=I[0],Y=I[1],G=(0,i.useState)(""),J=G[0],$=G[1],V=Array.from({length:27},function(e,t){return 2024+t}),X=(0,o.v9)(function(e){return e.auth.token}),Q=(0,i.useCallback)((0,a.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=3;break}return console.error("Auth token is missing"),e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(X)}});case 6:if((t=e.sent).ok){e.next=9;break}throw Error("Failed to fetch employees");case 9:return e.next=11,t.json();case 11:h(e.sent),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error("Error fetching employees:",e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])})),[X]),H=(0,i.useCallback)((0,a.Z)(c().mark(function e(){var t,r,a,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Z(!0),X){e.next=4;break}return console.error("Auth token is missing"),e.abrupt("return");case 4:return t=new Date(b,w,1).toISOString().split("T")[0],r=new Date(b,w+1,0).toISOString().split("T")[0],e.prev=6,e.next=9,fetch("https://api.gajkesaristeels.in/attendance-log/getForRange1?start=".concat(t,"&end=").concat(r),{headers:{Authorization:"Bearer ".concat(X)}});case 9:if((a=e.sent).ok){e.next=12;break}throw Error("Failed to fetch attendance data");case 12:return e.next=14,a.json();case 14:n((s=e.sent).map(function(e){return"Present"===e.attendanceStatus?j(j({},e),{},{attendanceStatus:"Absent"}):e})),S(""),0===s.length&&S("No data available for the selected month and year. Please choose a different month or year."),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(6),console.error("Error fetching attendance data:",e.t0),n([]),S("No data available for the selected month and year. Please choose a different month or year.");case 26:Z(!1);case 27:case"end":return e.stop()}},e,null,[[6,21]])})),[X,b,w]),U=(0,i.useCallback)((e=(0,a.Z)(c().mark(function e(t,r){var n,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=3;break}return console.error("Auth token is missing"),e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch("https://api.gajkesaristeels.in/visit/getByDateSorted?startDate=".concat(t,"&endDate=").concat(t,"&employeeName=").concat(r,"&page=0&size=100&sort=id,desc"),{headers:{Authorization:"Bearer ".concat(X)}});case 6:if((n=e.sent).ok){e.next=9;break}throw Error("Failed to fetch visit data");case 9:return e.next=11,n.json();case 11:z((a=e.sent.content.filter(function(e){return e.employeeName===r}))||[]),Y(t),$(r),L(!0),0===a.length&&z([]),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),console.error("Error fetching visit data:",e.t0),z([]);case 24:case"end":return e.stop()}},e,null,[[3,20]])})),function(t,r){return e.apply(this,arguments)}),[X]);(0,i.useEffect)(function(){H(),Q()},[b,w,X,H,Q]);var W=f.filter(function(e){return"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(_.toLowerCase())}).sort(function(e,t){var r="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),n="".concat(t.firstName," ").concat(t.lastName).toLowerCase();return r.localeCompare(n)});return(0,p.jsx)(x,{children:(0,p.jsxs)("div",{className:"container mx-auto py-8 px-4 sm:px-8",children:[(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,p.jsx)("div",{className:"w-full sm:w-auto",children:(0,p.jsxs)(d.Ph,{value:b.toString(),onValueChange:function(e){return g(parseInt(e))},children:[(0,p.jsx)(d.i4,{className:"w-[180px]",children:(0,p.jsx)(d.ki,{placeholder:"Select a year"})}),(0,p.jsx)(d.Bw,{children:V.map(function(e){return(0,p.jsx)(d.Ql,{value:e.toString(),children:e},e)})})]})}),(0,p.jsx)("div",{children:(0,p.jsxs)(d.Ph,{value:w.toString(),onValueChange:function(e){return O(parseInt(e))},children:[(0,p.jsx)(d.i4,{className:"w-[180px]",children:(0,p.jsx)(d.ki,{placeholder:"Select a month"})}),(0,p.jsx)(d.Bw,{children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(e,t){return(0,p.jsx)(d.Ql,{value:t.toString(),children:e},e)})})]})}),(0,p.jsx)("div",{children:(0,p.jsx)(u.I,{type:"text",placeholder:"Filter by name",value:_,onChange:function(e){return P(e.target.value)}})})]}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("p",{className:"text-lg font-bold",children:"Legend:"}),(0,p.jsxs)("div",{className:"flex space-x-4",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"w-4 h-4 bg-green-500 mr-2"}),(0,p.jsx)("p",{children:"Full Day"})]}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"w-4 h-4 bg-yellow-500 mr-2"}),(0,p.jsx)("p",{children:"Half Day"})]}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("div",{className:"w-4 h-4 bg-red-500 mr-2"}),(0,p.jsx)("p",{children:"Absent"})]})]})]})]}),D&&(0,p.jsx)("p",{className:"mb-4 text-red-500",children:D}),(0,p.jsx)("div",{className:"space-y-4",children:A?Array.from({length:5}).map(function(e,t){return(0,p.jsx)(m,{height:200},t)}):(0,p.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:W.map(function(e){return(0,p.jsx)(l.default,{employee:e,initialSummary:{fullDays:0,halfDays:0,absentDays:0},selectedYear:b,selectedMonth:w,attendanceData:r.filter(function(t){return t.employeeId===e.id}),onDateClick:function(e,t){return U(e,t)}},e.id)})})}),(0,p.jsx)(y.default,{isOpen:R,onClose:function(){return L(!1)},visitData:M,selectedDate:T,employeeName:J})]})})}},81934:function(e,t,r){"use strict";r.r(t);var n=r(67294),a=r(57187),s=r(99603),c=r(59417),i=r(2110),o=r.n(i),l=r(85893);t.default=n.memo(function(e){var t=e.employee,r=e.attendanceData,i=e.selectedYear,d=e.selectedMonth,u=e.initialSummary,f=e.onDateClick,m=(0,n.useState)(u),p=m[0],h=m[1],x=(0,n.useCallback)(function(e){h(e)},[]),y=(0,n.useMemo)(function(){return r.filter(function(e){return e.employeeId===t.id})},[r,t.id]),v=(0,n.useMemo)(function(){return"".concat(t.firstName," ").concat(t.lastName)},[t.firstName,t.lastName]),j=(0,n.useCallback)(function(e){f(e,v)},[f,v]);return(0,l.jsxs)("div",{className:o()["info-card"],children:[(0,l.jsxs)("div",{className:o().info,children:[(0,l.jsx)("h2",{children:v}),(0,l.jsxs)("div",{className:o().stats,children:[(0,l.jsxs)("div",{className:o()["stat-box"],children:[(0,l.jsx)(s.G,{icon:c.enB}),(0,l.jsx)("p",{children:"Full"}),(0,l.jsx)("h3",{children:p.fullDays})]}),(0,l.jsxs)("div",{className:o()["stat-box"],children:[(0,l.jsx)(s.G,{icon:c.S9Y}),(0,l.jsx)("p",{children:"Half"}),(0,l.jsx)("h3",{children:p.halfDays})]}),(0,l.jsxs)("div",{className:o()["stat-box"],children:[(0,l.jsx)(s.G,{icon:c.nYk}),(0,l.jsx)("p",{children:"Absent"}),(0,l.jsx)("h3",{children:p.absentDays})]})]})]}),(0,l.jsx)("div",{className:o()["calendar-container"],children:(0,l.jsx)(a.default,{month:d,year:i,attendanceData:y,onSummaryChange:x,onDateClick:j,employeeName:v})})]})})},57187:function(e,t,r){"use strict";r.r(t);var n=r(67294);r(99806);var a=r(85893);t.default=function(e){var t=e.month,r=e.year,s=e.attendanceData,c=e.onSummaryChange,i=e.onDateClick,o=e.employeeName,l=(0,n.useRef)(null);return(0,n.useEffect)(function(){!function(){if(l.current){l.current.innerHTML="";for(var e=new Date(r,t,1).getDay(),n=new Date(r,t+1,0).getDate(),a=0,d=0,u=0,f=0;f<e;f++){var m,p=document.createElement("div");p.classList.add("empty"),null===(m=l.current)||void 0===m||m.appendChild(p)}for(var h=1;h<=n;h++)!function(){var e,n,c=document.createElement("div");c.textContent=h.toString();var f="".concat(r,"-").concat(String(t+1).padStart(2,"0"),"-").concat(String(h).padStart(2,"0")),m=null===(e=s.find(function(e){return e.checkinDate.startsWith(f)}))||void 0===e?void 0:e.attendanceStatus,p=new Date(r,t,h),x=document.createElement("span");x.classList.add("calendar-tooltip"),0===p.getDay()?(c.classList.add("full-day"),a++,x.textContent="Full Day"):m&&(c.classList.add(m.toLowerCase().replace(" ","-")),x.textContent=" ".concat(m),"full day"===m?a++:"half day"===m?d++:"Absent"===m&&u++),c.appendChild(x),c.addEventListener("mouseover",function(){var e=c.getBoundingClientRect(),t=x.getBoundingClientRect(),r=l.current.getBoundingClientRect();x.style.left="",x.style.right="",x.style.transform="",e.left-t.width/2<r.left?(x.style.left="0",x.style.transform="translateX(0)"):e.right+t.width/2>r.right?(x.style.right="0",x.style.left="auto",x.style.transform="translateX(0)"):(x.style.left="50%",x.style.transform="translateX(-50%)")}),c.addEventListener("click",function(){i(f,o)}),null===(n=l.current)||void 0===n||n.appendChild(c)}();c({fullDays:a,halfDays:d,absentDays:u})}}()},[t,r,s,c,o,i]),(0,a.jsxs)("div",{className:"custom-calendar",children:[(0,a.jsxs)("div",{className:"calendar-days",children:[(0,a.jsx)("div",{children:"S"}),(0,a.jsx)("div",{children:"M"}),(0,a.jsx)("div",{children:"T"}),(0,a.jsx)("div",{children:"W"}),(0,a.jsx)("div",{children:"T"}),(0,a.jsx)("div",{children:"F"}),(0,a.jsx)("div",{children:"S"})]}),(0,a.jsx)("div",{className:"calendar-dates",ref:l})]})}},71080:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Attendance",function(){return r(95758)}])},1796:function(){},69436:function(){},99806:function(){},2110:function(e){e.exports={"info-card":"AttendanceCard_info-card__wfYJ8",info:"AttendanceCard_info__6_k7V",stats:"AttendanceCard_stats__dmS2f","stat-box":"AttendanceCard_stat-box__FJ2Fd","calendar-container":"AttendanceCard_calendar-container__5jx23"}}},function(e){e.O(0,[4976,9545,6066,2116,9603,3387,9746,2888,9774,179],function(){return e(e.s=71080)}),_N_E=e.O()}]);