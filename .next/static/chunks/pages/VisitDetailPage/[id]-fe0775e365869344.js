(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5062],{39498:function(e,t,n){"use strict";n.d(t,{f:function(){return p}});var a=n(77191),r=n(36864),s=n(59499),i=n(4730);n(67294);var c=n(62469),o=n(19160),l=n(82359),d=n(74824),u=n(85893),m=["className","classNames","showOutsideDays"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e){var t=e.className,n=e.classNames,s=e.showOutsideDays,f=(0,i.Z)(e,m);return(0,u.jsx)(o._W,h({showOutsideDays:void 0===s||s,className:(0,l.cn)("p-3",t),classNames:h({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,l.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===f.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,l.cn)((0,d.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"},n),components:{IconLeft:function(e){return(0,r.Z)({},((0,a.Z)(e),e)),(0,u.jsx)(c.wyc,{className:"h-4 w-4"})},IconRight:function(e){return(0,r.Z)({},((0,a.Z)(e),e)),(0,u.jsx)(c.XCv,{className:"h-4 w-4"})}}},f))}p.displayName="Calendar"},5411:function(e,t,n){"use strict";n.d(t,{$0:function(){return w},Dj:function(){return O},dN:function(){return k},kN:function(){return b},ng:function(){return N},nt:function(){return y},tl:function(){return j}});var a=n(59499),r=n(4730),s=n(67294),i=n(62469),c=n(82359),o=n(74824),l=n(85893),d=["className"],u=["className"],m=["className"],f=["className","isActive","size"],h=["className"],p=["className"],v=["className"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){var t=e.className,n=(0,r.Z)(e,d);return(0,l.jsx)("nav",g({role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",t)},n))};j.displayName="Pagination";var N=s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,u);return(0,l.jsx)("ul",g({ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",n)},a))});N.displayName="PaginationContent";var y=s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,m);return(0,l.jsx)("li",g({ref:t,className:(0,c.cn)("",n)},a))});y.displayName="PaginationItem";var b=function(e){var t=e.className,n=e.isActive,a=e.size,s=(0,r.Z)(e,f);return(0,l.jsx)("a",g({"aria-current":n?"page":void 0,className:(0,c.cn)((0,o.d)({variant:n?"outline":"ghost",size:void 0===a?"icon":a}),t)},s))};b.displayName="PaginationLink";var k=function(e){var t=e.className,n=(0,r.Z)(e,h);return(0,l.jsxs)(b,g(g({"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",t)},n),{},{children:[(0,l.jsx)(i.wyc,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Previous"})]}))};k.displayName="PaginationPrevious";var w=function(e){var t=e.className,n=(0,r.Z)(e,p);return(0,l.jsxs)(b,g(g({"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",t)},n),{},{children:[(0,l.jsx)("span",{children:"Next"}),(0,l.jsx)(i.XCv,{className:"h-4 w-4"})]}))};w.displayName="PaginationNext";var O=function(e){var t=e.className,n=(0,r.Z)(e,v);return(0,l.jsxs)("span",g(g({"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",t)},n),{},{children:[(0,l.jsx)(i.nWS,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"More pages"})]}))};O.displayName="PaginationEllipsis"},59447:function(e,t,n){"use strict";n.d(t,{J2:function(){return u},xo:function(){return m},yk:function(){return f}});var a=n(59499),r=n(4730),s=n(67294),i=n(13677),c=n(82359),o=n(85893),l=["className","align","sideOffset"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var u=i.fC,m=i.xz;i.ee;var f=s.forwardRef(function(e,t){var n=e.className,s=e.align,u=e.sideOffset,m=(0,r.Z)(e,l);return(0,o.jsx)(i.h_,{children:(0,o.jsx)(i.VY,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({ref:t,align:void 0===s?"center":s,sideOffset:void 0===u?4:u,className:(0,c.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n)},m))})});f.displayName=i.VY.displayName},14031:function(e,t,n){"use strict";n.d(t,{Bw:function(){return w},Ph:function(){return j},Ql:function(){return O},i4:function(){return y},ki:function(){return N}});var a=n(59499),r=n(4730),s=n(67294),i=n(62469),c=n(72116),o=n(82359),l=n(85893),d=["className","children"],u=["className"],m=["className"],f=["className","children","position"],h=["className"],p=["className","children"],v=["className"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=c.fC;c.ZA;var N=c.B4,y=s.forwardRef(function(e,t){var n=e.className,a=e.children,s=(0,r.Z)(e,d);return(0,l.jsxs)(c.xz,g(g({ref:t,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n)},s),{},{children:[a,(0,l.jsx)(c.JO,{asChild:!0,children:(0,l.jsx)(i.jnn,{className:"h-4 w-4 opacity-50"})})]}))});y.displayName=c.xz.displayName;var b=s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,u);return(0,l.jsx)(c.u_,g(g({ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",n)},a),{},{children:(0,l.jsx)(i.g8U,{})}))});b.displayName=c.u_.displayName;var k=s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,m);return(0,l.jsx)(c.$G,g(g({ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",n)},a),{},{children:(0,l.jsx)(i.v4q,{})}))});k.displayName=c.$G.displayName;var w=s.forwardRef(function(e,t){var n=e.className,a=e.children,s=e.position,i=void 0===s?"popper":s,d=(0,r.Z)(e,f);return(0,l.jsx)(c.h_,{children:(0,l.jsxs)(c.VY,g(g({ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:i},d),{},{children:[(0,l.jsx)(b,{}),(0,l.jsx)(c.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,l.jsx)(k,{})]}))})});w.displayName=c.VY.displayName,s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,h);return(0,l.jsx)(c.__,g({ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",n)},a))}).displayName=c.__.displayName;var O=s.forwardRef(function(e,t){var n=e.className,a=e.children,s=(0,r.Z)(e,p);return(0,l.jsxs)(c.ck,g(g({ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n)},s),{},{children:[(0,l.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(c.wU,{children:(0,l.jsx)(i.nQG,{className:"h-4 w-4"})})}),(0,l.jsx)(c.eT,{children:a})]}))});O.displayName=c.ck.displayName,s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,v);return(0,l.jsx)(c.Z0,g({ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",n)},a))}).displayName=c.Z0.displayName},10054:function(e,t,n){"use strict";n.d(t,{SP:function(){return v},dr:function(){return p},mQ:function(){return h},nU:function(){return x}});var a=n(59499),r=n(4730),s=n(67294),i=n(60434),c=n(82359),o=n(85893),l=["className"],d=["className"],u=["className"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=i.fC,p=s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,l);return(0,o.jsx)(i.aV,f({ref:t,className:(0,c.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n)},a))});p.displayName=i.aV.displayName;var v=s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,d);return(0,o.jsx)(i.xz,f({ref:t,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n)},a))});v.displayName=i.xz.displayName;var x=s.forwardRef(function(e,t){var n=e.className,a=(0,r.Z)(e,u);return(0,o.jsx)(i.VY,f({ref:t,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},a))});x.displayName=i.VY.displayName},17596:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var a=n(59499),r=n(27812),s=n(50029),i=n(64687),c=n.n(i),o=n(67294),l=n(11163),d=n(9008),u=n.n(d),m=n(87066),f=n(30112),h=n(78166),p=n(6499),v=n(71459),x=n(8395),g=n(48672),j=n(26581),N=n(87462),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},b=n(76888),k=o.forwardRef(function(e,t){return o.createElement(b.Z,(0,N.Z)({},e,{ref:t,icon:y}))}),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},O=o.forwardRef(function(e,t){return o.createElement(b.Z,(0,N.Z)({},e,{ref:t,icon:w}))}),Z=n(45007),D=n(59447),P=n(41664),C=n.n(P),T=n(34145),S=n(47034),I=n(25675),A=n.n(I),E=n(33526),_=n(10054),z=n(25141),B=n(14031),V=n(39498),R=n(8593),U=n(5411);n(40165);var q=n(25139),M=n(52217),L=n(85893);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=function(){var e,t,n,a,i,d,N,y,b,w,P,I,F,W,H,Y,$=(0,l.useRouter)(),G=(0,o.useState)(null),J=G[0],X=G[1],K=(0,o.useState)("metrics"),ee=K[0],et=K[1],en=(0,o.useState)("visit-info"),ea=en[0],er=en[1],es=(0,o.useState)([]),ei=es[0],ec=es[1],eo=(0,o.useState)([]),el=eo[0],ed=eo[1],eu=(0,o.useState)([]),em=eu[0],ef=eu[1],eh=(0,o.useState)([]),ep=eh[0],ev=eh[1],ex=(0,Z.v9)(function(e){return e.auth.token}),eg=(0,o.useState)([]),ej=eg[0],eN=eg[1],ey=(0,o.useState)([]),eb=ey[0],ek=ey[1],ew=(0,o.useState)("");ew[0],ew[1];var eO=(0,o.useState)("");eO[0],eO[1];var eZ=(0,o.useState)(!0),eD=(eZ[0],eZ[1]),eP=(0,o.useState)(null),eC=(eP[0],eP[1]),eT=(0,o.useState)(1),eS=eT[0],eI=eT[1],eA=(0,o.useState)(""),eE=eA[0],e_=eA[1],ez=(0,o.useState)(!1),eB=ez[0],eV=ez[1],eR=(0,o.useState)({});eR[0],eR[1];var eU=(0,o.useState)({});eU[0],eU[1];var eq=(0,o.useState)([]),eM=eq[0],eL=eq[1],eF=(0,o.useState)(!1),eQ=eF[0],eW=eF[1],eH=(0,o.useState)(!1),eY=eH[0],e$=eH[1],eG=(0,o.useState)(""),eJ=eG[0],eX=eG[1],eK=(0,o.useState)(null),e0=eK[0],e1=eK[1],e2=$.query,e4=e2.id;e2.returnTo,e2.employeeId,e2.startDate,e2.endDate;var e3=(0,o.useState)(null),e9=e3[0],e7=e3[1],e8=(0,o.useState)("All");e8[0],e8[1];var e6=(0,o.useState)("All");e6[0],e6[1];var e5=(0,o.useState)("all"),te=e5[0],tt=e5[1],tn=(0,o.useState)([]),ta=tn[0],tr=tn[1],ts=(0,o.useState)([]),ti=ts[0],tc=ts[1],to=(0,o.useState)(!1),tl=to[0],td=to[1],tu=(0,o.useState)("general"),tm=tu[0],tf=tu[1],th=(0,o.useState)([]),tp=th[0],tv=th[1],tx=(0,o.useState)([]),tg=tx[0],tj=tx[1],tN=(0,o.useState)({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:0,storeName:"",storeCity:"",visitId:Number(e4),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),ty=tN[0],tb=tN[1],tk=(0,o.useState)(0);tk[0],tk[1];var tw=3*eS,tO=ep.slice(tw-3,tw),tZ=Math.ceil(ep.length/3),tD=function(e){eI(e)},tP=(e=(0,s.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(ex)}});case 3:return t=e.sent,e.next=6,t.json();case 6:tv(e.sent),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return e.apply(this,arguments)}),tC=(t=(0,s.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/store/names",{headers:{Authorization:"Bearer ".concat(ex)}});case 3:return t=e.sent,e.next=6,t.json();case 6:tj(e.sent),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching stores:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return t.apply(this,arguments)}),tT=function(e){tt(e)},tS=(0,o.useCallback)((n=(0,s.Z)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/visit/getById?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:X(n=e.sent.data),ek(n.brandProCons),t_(n.checkinTime,n.checkoutTime),tz(t),tB(t),tV(t,"requirement",ed),tV(t,"complaint",ef),tA(n.storeId),tI(t,n.attachmentResponse),tR(t),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching visit detail:",e.t0);case 20:case"end":return e.stop()}},e,null,[[0,17]])})),function(e){return n.apply(this,arguments)}),[ex]),tI=(a=(0,s.Z)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(n.filter(function(e){return"check-in"===e.tag}).map(function(){var e=(0,s.Z)(c().mark(function e(n){var a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("https://api.gajkesaristeels.in/visit/downloadFile/".concat(t,"/check-in/").concat(n.fileName),{headers:{Authorization:"Bearer ".concat(ex)},responseType:"blob"});case 2:return a=e.sent,e.abrupt("return",URL.createObjectURL(a.data));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:eL(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching check-in images:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t){return a.apply(this,arguments)}),tA=(0,o.useCallback)((i=(0,s.Z)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/visit/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:return n=e.sent,e.next=6,n.json();case 6:ev(e.sent.sort(function(e,t){return new Date(t.checkinDate).getTime()-new Date(e.checkinDate).getTime()})),eD(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),eC("Failed to fetch visits."),eD(!1);case 16:case"end":return e.stop()}},e,null,[[0,12]])})),function(e){return i.apply(this,arguments)}),[ex]),tE=(0,o.useCallback)(function(){var e=function(e){return"all"===te?e:e.filter(function(e){return e.priority===te})};tr(e(el)),tc(e(em))},[te,el,em]),t_=function(e,t){var n=new Date("1970-01-01T".concat(e,"Z")),a=new Date(new Date("1970-01-01T".concat(t,"Z")).getTime()-n.getTime()),s=a.getUTCHours(),i=a.getUTCMinutes(),c="0";(s>0||i>0)&&(c="".concat(s>0?"".concat(s," hour").concat(s>1?"s":""," "):"").concat(i>0?"".concat(i," minute").concat(i>1?"s":""):"").trim()),ec(function(e){var t=e.filter(function(e){return"Visit Duration"!==e.title});return[].concat((0,r.Z)(t),[{title:"Visit Duration",value:c}])})},tz=(d=(0,s.Z)(c().mark(function e(t){var n,a,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/intent-audit/getByVisit?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:s=(null===(n=(a=e.sent.data)[a.length-1])||void 0===n?void 0:n.newIntentLevel)||"N/A",ec(function(e){var t=e.filter(function(e){return"Intent Level"!==e.title});return[].concat((0,r.Z)(t),[{title:"Intent Level",value:s}])}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching intent level:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return d.apply(this,arguments)}),tB=(N=(0,s.Z)(c().mark(function e(t){var n,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/monthly-sale/getByVisit?visitId=".concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:n=e.sent.data,a="".concat(n[0].newMonthlySale.toLocaleString()," tons"),ec(function(e){var t=e.filter(function(e){return"Monthly Sales"!==e.title});return[].concat((0,r.Z)(t),[{title:"Monthly Sales",value:a}])}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching monthly sales:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return N.apply(this,arguments)}),tV=(y=(0,s.Z)(c().mark(function e(t,n,a){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/task/getByVisit?type=".concat(n,"&visitId=").concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:a(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching ".concat(n,"s:"),e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return y.apply(this,arguments)}),tR=(b=(0,s.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.get("https://api.gajkesaristeels.in/notes/getByVisit?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:eN(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching notes:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return b.apply(this,arguments)}),tU=function(e){eX(e.content),e$(!0),e1(e.id),e7({employeeId:e.employeeId,storeId:e.storeId}),eW(!0)},tq=(w=(0,s.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eJ.trim()){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!(eY&&null!==e0)){e.next=12;break}if(!e9){e.next=10;break}return e.next=7,m.Z.put("https://api.gajkesaristeels.in/notes/edit?id=".concat(e0),{content:eJ,employeeId:e9.employeeId,storeId:e9.storeId},{headers:{Authorization:"Bearer ".concat(ex)}});case 7:eN(ej.map(function(e){return e.id===e0?Q(Q({},e),{},{content:eJ}):e})),f.ZP.success("Note updated successfully!");case 10:e.next=19;break;case 12:if(!J){e.next=19;break}return e.next=15,m.Z.post("https://api.gajkesaristeels.in/notes/create",{content:eJ,employeeId:J.employeeId,storeId:J.storeId,visitId:J.id},{headers:{Authorization:"Bearer ".concat(ex)}});case 15:eN([{id:e.sent.data.id,content:eJ,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],createdTime:new Date().toISOString(),updatedTime:new Date().toISOString(),employeeId:J.employeeId,employeeName:J.employeeName,storeId:J.storeId,storeName:J.storeName,visitId:J.id}].concat((0,r.Z)(ej))),f.ZP.success("Note added successfully!");case 19:eW(!1),eX(""),e$(!1),e1(null),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(2),console.error("Error saving note:",e.t0),f.ZP.error("Error saving note.");case 29:case"end":return e.stop()}},e,null,[[2,25]])})),function(){return w.apply(this,arguments)}),tM=(P=(0,s.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.delete("https://api.gajkesaristeels.in/notes/delete?id=".concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:eN(ej.filter(function(e){return e.id!==t})),f.ZP.success("Note deleted successfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting note:",e.t0),f.ZP.error("Error deleting note.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return P.apply(this,arguments)}),tL=function(e){return e.split(" ").map(function(e){return e[0]}).join("").toUpperCase().slice(0,2)},tF=function(){$.back()},tQ=(I=(0,s.Z)(c().mark(function e(t){var n,a,s,i,o,l,d,u,m,f;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d=Q(Q({},ty),{},{taskType:t,storeId:null!==(n=null==J?void 0:J.storeId)&&void 0!==n?n:0}),e.next=4,fetch("https://api.gajkesaristeels.in/task/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ex)},body:JSON.stringify(d)});case 4:return u=e.sent,e.next=7,u.json();case 7:m=e.sent,f=Q(Q({},ty),{},{id:m.id,assignedToName:(null===(a=tp.find(function(e){return e.id===ty.assignedToId}))||void 0===a?void 0:a.firstName)+" "+(null===(s=tp.find(function(e){return e.id===ty.assignedToId}))||void 0===s?void 0:s.lastName)||"Unknown",storeName:(null===(i=tg.find(function(e){return e.id===ty.storeId}))||void 0===i?void 0:i.storeName)||"",storeId:null!==(o=null==J?void 0:J.storeId)&&void 0!==o?o:0}),"requirement"===t?ed(function(e){var t;return[Q(Q({},f),{},{storeId:null!==(t=f.storeId)&&void 0!==t?t:0})].concat((0,r.Z)(e))}):ef(function(e){var t;return[Q(Q({},f),{},{storeId:null!==(t=f.storeId)&&void 0!==t?t:0})].concat((0,r.Z)(e))}),tb({id:0,taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:97,assignedByName:"",storeId:null!==(l=null==J?void 0:J.storeId)&&void 0!==l?l:0,storeName:"",storeCity:"",visitId:Number(e4),visitDate:"",status:"Assigned",priority:"low",taskType:"requirement",attachment:[],attachmentResponse:[],createdAt:"",updatedAt:"",createdTime:"",updatedTime:""}),td(!1),tV(e4,t,"requirement"===t?ed:ef),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Error creating task:",e.t0);case 18:case"end":return e.stop()}},e,null,[[0,15]])})),function(e){return I.apply(this,arguments)}),tW=function(){return"string"==typeof e4?e4:Array.isArray(e4)?e4[0]:""},tH=function(e){var t={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800";return(0,L.jsx)("span",{className:"status-badge ".concat(t),children:e})},tY=(F=(0,s.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.put("https://api.gajkesaristeels.in/visit/checkout?id=".concat(null==J?void 0:J.id),{checkoutLatitude:25,checkoutLongitude:-25,outcome:"done"},{headers:{Authorization:"Bearer ".concat(ex)}});case 3:e.sent,f.ZP.success("Checked out Successfully!"),tS(e4),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?e.t0.response.data.includes("Cant check out without Checking in")?f.ZP.error("Error Checking out: Cant check out without Checking in!"):e.t0.response.data.includes("Already Checked Out")?f.ZP.error("Error Checking out: Already Checked Out!"):f.ZP.error("Error Checking out!"):f.ZP.error("Error Checking out!");case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return F.apply(this,arguments)});(0,o.useEffect)(function(){var e=tW();e&&ex&&tS(e)},[e4,ex]),(0,o.useEffect)(function(){tE()},[el,em,te,tE]);var t$=(W=(0,s.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.delete("https://api.gajkesaristeels.in/task/deleteById?taskId=".concat(t),{headers:{Authorization:"Bearer ".concat(ex)}});case 3:ed(function(e){return e.filter(function(e){return e.id!==t})}),ef(function(e){return e.filter(function(e){return e.id!==t})}),f.ZP.success("Task deleted!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error deleting task:",e.t0),f.ZP.error("Error Deleting Task: Task Not Found!");case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return W.apply(this,arguments)});(0,o.useEffect)(function(){tl&&(tP(),tC())},[tl]);var tG=(H=(0,s.Z)(c().mark(function e(t,n,a){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.put("https://api.gajkesaristeels.in/task/updateTask?taskId=".concat(t),{status:n,priority:a},{headers:{Authorization:"Bearer ".concat(ex)}});case 3:ed(function(e){return e.map(function(e){return e.id===t?Q(Q({},e),{},{status:n}):e})}),ef(function(e){return e.map(function(e){return e.id===t?Q(Q({},e),{},{status:n}):e})}),f.ZP.success("Status updated successfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error updating status:",e.t0),f.ZP.error("Error updating status.");case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e,t,n){return H.apply(this,arguments)}),tJ=function(e){var t={Assigned:"bg-blue-100 text-blue-800","Work in Progress":"bg-orange-100 text-orange-800",Complete:"bg-green-100 text-green-800"},n=e in t?t[e]:"bg-gray-100 text-gray-800";return(0,L.jsx)("span",{className:"status-badge ".concat(n),children:e})},tX=null!=J&&J.checkinTime&&null!=J&&J.checkoutTime?{emoji:"✅",status:"Completed",color:"bg-purple-100 text-purple-800",isOngoing:!1}:null!=J&&J.checkoutTime?{emoji:"⏱️",status:"Checked Out",color:"bg-orange-100 text-orange-800",isOngoing:!1}:null!=J&&J.checkinTime?{emoji:"\uD83D\uDD70️",status:"On Going",color:"bg-green-100 text-green-800",isOngoing:!0}:{emoji:"\uD83D\uDCC5",status:"Assigned",color:"bg-blue-100 text-blue-800",isOngoing:!1},tK=(0,o.useState)(!1),t0=tK[0],t1=tK[1],t2=(0,o.useState)(null),t4=t2[0],t3=t2[1],t9=function(e){t3(e),t1(!0)};return(0,L.jsxs)("div",{className:"container main-content",children:[(0,L.jsxs)(u(),{children:[(0,L.jsx)("title",{children:"Visit Detail Page"}),(0,L.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap",rel:"stylesheet"}),(0,L.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),(0,L.jsxs)("div",{className:"visit-details",children:[(0,L.jsxs)("aside",{className:"left-panel",children:[(0,L.jsxs)("div",{className:"back-button-container",children:[(0,L.jsxs)("div",{className:"back-button",onClick:tF,children:[(0,L.jsx)("i",{className:"fas fa-arrow-left"})," Back"]}),(0,L.jsx)("div",{className:"status-badge-wrapper",children:(0,L.jsxs)("div",{className:"status-badge ".concat(tX.color),children:[function(e){switch(e){case"Assigned":return(0,L.jsx)(j.Z,{className:"w-4 h-4 mr-2"});case"On Going":return(0,L.jsx)(k,{className:"w-4 h-4 mr-2"});case"Checked Out":case"Completed":return(0,L.jsx)(O,{className:"w-4 h-4 mr-2"});default:return null}}(tX.status),tX.status]})})]}),(0,L.jsxs)("div",{className:"profile",children:[(0,L.jsx)("div",{className:"avatar",children:(0,L.jsx)("span",{children:tL((null==J?void 0:J.employeeName)||"")})}),(0,L.jsx)("h2",{children:null==J?void 0:J.employeeName}),(0,L.jsx)("p",{className:"store-name",children:null==J?void 0:J.storeName})]}),(0,L.jsxs)("div",{className:"action-buttons",children:[(0,L.jsxs)("button",{className:"action-button",onClick:function(){J&&J.storeId?$.push("/CustomerDetailPage/".concat(J.storeId)):f.ZP.error("Store information is not available")},children:[(0,L.jsx)("i",{className:"fas fa-store"})," View Store"]}),(0,L.jsxs)("button",{className:"action-button",onClick:function(){return td(!0)},children:[(0,L.jsx)("i",{className:"fas fa-plus"})," Add Requirement"]}),(0,L.jsxs)("button",{className:"action-button",onClick:function(){tb(Q(Q({},ty),{},{taskType:"complaint"})),td(!0)},children:[(0,L.jsx)("i",{className:"fas fa-plus"})," Add Complaint"]})]}),(0,L.jsx)("button",{className:"complete-visit-btn ".concat(tX.isOngoing?"":"disabled"),onClick:tY,disabled:!tX.isOngoing,children:"Complete Visit"}),(0,L.jsxs)("div",{className:"last-activity",children:[(0,L.jsx)("i",{className:"fas fa-clock"})," Visit Duration:"," ",null===(Y=ei.find(function(e){return"Visit Duration"===e.title}))||void 0===Y?void 0:Y.value]}),(0,L.jsxs)("div",{className:"info-tabs",children:[(0,L.jsx)("div",{className:"info-tab ".concat("visit-info"===ea?"active":""),onClick:function(){return er("visit-info")},children:"Visit Info"}),(0,L.jsx)("div",{className:"info-tab ".concat("store-info"===ea?"active":""),onClick:function(){return er("store-info")},children:"Store Info"})]}),(0,L.jsxs)("div",{className:"info-content ".concat("visit-info"===ea?"active":""),id:"visit-info",children:[(0,L.jsxs)("div",{className:"info-item",children:[(0,L.jsxs)("div",{className:"info-label",children:[(0,L.jsx)("i",{className:"fas fa-tasks"})," Purpose"]}),(0,L.jsx)("div",{children:null==J?void 0:J.purpose})]}),(0,L.jsxs)("div",{className:"info-item",children:[(0,L.jsxs)("div",{className:"info-label",children:[(0,L.jsx)("i",{className:"fas fa-map-marker-alt"})," Location"]}),(0,L.jsx)("div",{children:null!=J&&J.checkinLatitude&&null!=J&&J.checkinLongitude?(0,L.jsx)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(J.checkinLatitude,",").concat(J.checkinLongitude),target:"_blank",rel:"noopener noreferrer",className:"location-link",children:"Location"}):(0,L.jsx)("span",{children:"Location not available"})})]}),(0,L.jsxs)("div",{className:"info-item",children:[(0,L.jsxs)("div",{className:"info-label",children:[(0,L.jsx)("i",{className:"fas fa-sign-in-alt"})," Check-in"]}),(0,L.jsx)("div",{children:null!=J&&J.checkinDate&&null!=J&&J.checkinTime?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:(0,T.WU)(new Date(J.checkinDate),"dd MMM yyyy")}),(0,L.jsx)("div",{children:(0,T.WU)((0,S.D)("1970-01-01T".concat(J.checkinTime)),"h:mm a")})]}):"Check-in not available"})]}),(0,L.jsxs)("div",{className:"info-item",children:[(0,L.jsxs)("div",{className:"info-label",children:[(0,L.jsx)("i",{className:"fas fa-sign-out-alt"})," Check-out"]}),(0,L.jsx)("div",{children:null!=J&&J.checkoutDate&&null!=J&&J.checkoutTime?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{children:(0,T.WU)(new Date(J.checkoutDate),"dd MMM yyyy")}),(0,L.jsx)("div",{children:(0,T.WU)((0,S.D)("1970-01-01T".concat(J.checkoutTime)),"h:mm a")})]}):"Check-out not available"})]})]}),(0,L.jsx)("div",{className:"info-content ".concat("store-info"===ea?"active":""),id:"store-info",children:(0,L.jsxs)("div",{className:"info-item",children:[(0,L.jsxs)("div",{className:"info-label",children:[(0,L.jsx)("i",{className:"fas fa-store"})," Store Name"]}),(0,L.jsx)("div",{children:null==J?void 0:J.storeName})]})})]}),(0,L.jsxs)("section",{className:"activity-details",children:[(0,L.jsxs)("div",{className:"tabs",children:[(0,L.jsxs)("button",{className:"tab ".concat("metrics"===ee?"active":""),onClick:function(){return et("metrics")},children:[(0,L.jsx)("i",{className:"fas fa-chart-line"})," Metrics"]}),(0,L.jsxs)("button",{className:"tab ".concat("visits"===ee?"active":""),onClick:function(){return et("visits")},children:[(0,L.jsx)("i",{className:"fas fa-calendar-check"})," Visits"]}),(0,L.jsxs)("button",{className:"tab ".concat("brands"===ee?"active":""),onClick:function(){return et("brands")},children:[(0,L.jsx)("i",{className:"fas fa-tags"})," Brands"]}),(0,L.jsxs)("button",{className:"tab ".concat("requirements"===ee?"active":""),onClick:function(){return et("requirements")},children:[(0,L.jsx)("i",{className:"fas fa-clipboard-list"})," Requirements"]}),(0,L.jsxs)("button",{className:"tab ".concat("complaints"===ee?"active":""),onClick:function(){return et("complaints")},children:[(0,L.jsx)("i",{className:"fas fa-exclamation-circle"})," Complaints"]})]}),(0,L.jsxs)("div",{className:"tab-content ".concat("visits"===ee?"active":""),id:"visits",children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsx)(h.Z,{placeholder:"Search by Visit Purpose",value:eE,onChange:function(e){return e_(e.target.value)},style:{width:200}})}),(0,L.jsx)("div",{className:"visits-list",children:tO.map(function(e){return(0,L.jsxs)("div",{className:"visit-item",children:[(0,L.jsxs)("div",{className:"item-header",children:[(0,L.jsx)("span",{className:"item-title",children:e.purpose}),(0,L.jsx)("span",{className:"item-status",children:e.checkinDate&&e.checkinTime?"".concat((0,T.WU)(new Date(e.checkinDate),"dd MMM ''yy")," ").concat((0,T.WU)((0,S.D)("1970-01-01T".concat(e.checkinTime)),"h:mm a")):"Check-in time not available"})]}),(0,L.jsxs)("div",{className:"item-content",children:[(0,L.jsxs)("p",{children:["Employee: ",e.employeeName]}),(0,L.jsxs)("p",{children:["Store: ",e.storeName]}),(0,L.jsx)(C(),{href:"/VisitDetailPage/[id]",as:"/VisitDetailPage/".concat(e.id),passHref:!0,children:(0,L.jsxs)("div",{className:"timeline-visit-id",children:["Visit ID: ",e.id]})})]})]},e.id)})}),ep.length>3&&(0,L.jsxs)("div",{className:"mt-4",children:[(0,L.jsx)(p.ZP,{onClick:function(){return eV(!eB)},children:eB?"Show Less":"Show More"}),eB&&(0,L.jsxs)(U.tl,{children:[(0,L.jsx)(U.dN,{onClick:function(){return eS>1&&tD(eS-1)},className:1===eS?"pointer-events-none opacity-50":"",children:"Previous"}),(0,L.jsx)(U.ng,{children:function(){for(var e=[],t=function(t){1===t||t===tZ||t>=eS-1&&t<=eS+1?e.push((0,L.jsx)(U.nt,{children:(0,L.jsx)(U.kN,{isActive:eS===t,onClick:function(){return tD(t)},children:t})},t)):(t===eS-2&&t>2||t===eS+2&&t<tZ-1)&&e.push((0,L.jsx)(U.nt,{children:(0,L.jsx)(U.Dj,{})},t))},n=1;n<=tZ;n++)t(n);return e}()}),(0,L.jsx)(U.$0,{onClick:function(){return eS<tZ&&tD(eS+1)},className:eS===tZ?"pointer-events-none opacity-50":"",children:"Next"})]})]})]}),(0,L.jsx)("div",{className:"tab-content ".concat("metrics"===ee?"active":""),id:"metrics",children:(0,L.jsx)("div",{className:"metrics-grid",children:ei.map(function(e,t){return(0,L.jsxs)("div",{className:"metric-card",children:[(0,L.jsx)("h3",{children:e.title}),(0,L.jsx)("div",{className:"value",children:e.value})]},t)})})}),(0,L.jsx)("div",{className:"tab-content ".concat("brands"===ee?"active":""),id:"brands",children:(0,L.jsx)(q.default,{brands:eb,setBrands:ek,visitId:tW(),token:ex,fetchVisitDetail:tS})}),(0,L.jsxs)("div",{className:"tab-content ".concat("requirements"===ee?"active":""),id:"requirements",children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsxs)(B.Ph,{value:te,onValueChange:tT,children:[(0,L.jsx)(B.i4,{className:"w-[180px]",children:(0,L.jsx)(B.ki,{placeholder:"Filter by Priority"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"all",children:"All Priorities"}),(0,L.jsx)(B.Ql,{value:"low",children:"Low"}),(0,L.jsx)(B.Ql,{value:"medium",children:"Medium"}),(0,L.jsx)(B.Ql,{value:"high",children:"High"})]})]})}),(0,L.jsx)("div",{className:"requirements-list",children:ta.map(function(e,t){return(0,L.jsxs)("div",{className:"requirement-item",children:[(0,L.jsxs)("div",{className:"item-header",children:[(0,L.jsx)("span",{className:"item-title primary-blue",children:e.taskTitle}),(0,L.jsxs)("div",{className:"item-status-wrapper",style:{display:"flex",gap:"8px"},children:[tH(e.priority),tJ(e.status)]})]}),(0,L.jsxs)("div",{className:"item-footer",children:[(0,L.jsxs)("span",{children:["Due: ",e.dueDate]}),(0,L.jsxs)("div",{className:"assigned-to",children:[(0,L.jsx)("div",{className:"avatar",children:tL(e.assignedToName)}),(0,L.jsxs)("span",{children:["Assigned to ",e.assignedToName]})]}),(0,L.jsx)(v.Z,{overlay:(0,L.jsxs)(x.Z,{onClick:function(t){return tG(e.id,t.key,e.priority)},children:[(0,L.jsx)(x.Z.Item,{children:"Assigned"},"Assigned"),(0,L.jsx)(x.Z.Item,{children:"Work in Progress"},"Work in Progress"),(0,L.jsx)(x.Z.Item,{children:"Complete"},"Complete")]}),children:(0,L.jsx)(p.ZP,{children:e.status})}),(0,L.jsx)(p.ZP,{type:"link",className:"red-delete-icon",icon:(0,L.jsx)("i",{className:"fas fa-trash-alt"}),onClick:function(){return t$(e.id)}})]})]},t)})})]}),(0,L.jsxs)("div",{className:"tab-content ".concat("complaints"===ee?"active":""),id:"complaints",children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsxs)(B.Ph,{value:te,onValueChange:tT,children:[(0,L.jsx)(B.i4,{className:"w-[180px]",children:(0,L.jsx)(B.ki,{placeholder:"Filter by Priority"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"all",children:"All Priorities"}),(0,L.jsx)(B.Ql,{value:"low",children:"Low"}),(0,L.jsx)(B.Ql,{value:"medium",children:"Medium"}),(0,L.jsx)(B.Ql,{value:"high",children:"High"})]})]})}),(0,L.jsx)("div",{className:"complaints-list",children:ti.map(function(e,t){return(0,L.jsxs)("div",{className:"complaint-item",children:[(0,L.jsxs)("div",{className:"item-header",children:[(0,L.jsx)("span",{className:"item-title primary-blue",children:e.taskTitle}),(0,L.jsxs)("div",{className:"item-status-wrapper",style:{display:"flex",gap:"8px"},children:[tH(e.priority),tJ(e.status)]})]}),(0,L.jsxs)("div",{className:"item-footer",children:[(0,L.jsxs)("span",{children:["Reported: ",e.dueDate]}),(0,L.jsxs)("div",{className:"assigned-to",children:[(0,L.jsx)("div",{className:"avatar",children:tL(e.assignedToName)}),(0,L.jsxs)("span",{children:["Handled by ",e.assignedToName]})]}),(0,L.jsx)(v.Z,{overlay:(0,L.jsxs)(x.Z,{onClick:function(t){return tG(e.id,t.key,e.priority)},children:[(0,L.jsx)(x.Z.Item,{children:"Assigned"},"Assigned"),(0,L.jsx)(x.Z.Item,{children:"Work in Progress"},"Work in Progress"),(0,L.jsx)(x.Z.Item,{children:"Complete"},"Complete")]}),children:(0,L.jsx)(p.ZP,{children:e.status})}),(0,L.jsx)(p.ZP,{type:"link",className:"red-delete-icon",icon:(0,L.jsx)("i",{className:"fas fa-trash-alt"}),onClick:function(){return t$(e.id)}})]})]},t)})})]})]}),(0,L.jsxs)("aside",{className:"right-panel",children:[(0,L.jsx)("div",{className:"section-title",children:"Check-in Images"}),(0,L.jsx)("div",{className:"image-gallery",children:eM.length>0?eM.map(function(e,t){return(0,L.jsx)("div",{className:"image-container",children:(0,L.jsx)(A(),{src:e,alt:"Check-in image ".concat(t+1),className:"rounded-lg shadow-md",width:300,height:200,onClick:function(){return t9(e)}})},t)}):(0,L.jsx)("p",{children:"No images available"})}),(null==J?void 0:J.checkinLatitude)&&(null==J?void 0:J.checkinLongitude)&&(0,L.jsx)("div",{className:"mt-4",children:(0,L.jsx)(M.default,{latitude:J.checkinLatitude,longitude:J.checkinLongitude})}),(0,L.jsx)("div",{className:"section-title",children:"Notes"}),(0,L.jsxs)("div",{className:"notes-section",children:[(0,L.jsxs)(p.ZP,{className:"add-note-btn",onClick:function(){e$(!1),eX(""),eW(!0)},children:[(0,L.jsx)("i",{className:"fas fa-plus"})," Add Note"]}),(0,L.jsx)("div",{className:"notes-list",children:ej.map(function(e){return(0,L.jsxs)("div",{className:"note-item",children:[(0,L.jsxs)("div",{className:"note-header",children:[(0,L.jsx)("span",{className:"note-date",children:e.createdDate}),(0,L.jsxs)("div",{className:"note-actions",children:[(0,L.jsx)("a",{href:"#",onClick:function(){return tU(e)},children:"Edit"}),(0,L.jsx)("a",{href:"#",className:"note-delete",onClick:function(){return tM(e.id)},children:"Delete"})]})]}),(0,L.jsx)("div",{className:"note-content",children:e.content})]},e.id)})})]})]})]}),(0,L.jsx)(g.Z,{title:eY?"Edit Note":"Add Note",visible:eQ,onOk:tq,onCancel:function(){return eW(!1)},okText:eY?"Update":"Add",children:(0,L.jsx)(h.Z.TextArea,{placeholder:"Enter note content",value:eJ,onChange:function(e){return eX(e.target.value)},rows:4})}),(0,L.jsx)(E.Vq,{open:tl,onOpenChange:td,children:(0,L.jsxs)(E.cZ,{className:"sm:max-w-[600px]",children:[(0,L.jsxs)(E.fK,{children:[(0,L.jsxs)(E.$N,{children:["Create ","requirement"===ty.taskType?"Requirement":"Complaint"]}),(0,L.jsx)(E.Be,{children:"Fill in the details."})]}),(0,L.jsxs)(_.mQ,{value:tm,children:[(0,L.jsxs)(_.dr,{className:"mb-4",children:[(0,L.jsx)(_.SP,{value:"general",onClick:function(){return tf("general")},children:"General"}),(0,L.jsx)(_.SP,{value:"details",onClick:function(){return tf("details")},children:"Details"})]}),(0,L.jsx)(_.nU,{value:"general",children:(0,L.jsxs)("div",{className:"grid gap-4",children:[(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsxs)(z._,{htmlFor:"taskTitle",children:["requirement"===ty.taskType?"Requirement":"Complaint"," Title"]}),(0,L.jsx)(h.Z,{id:"taskTitle",placeholder:"Enter ".concat(ty.taskType," title"),value:ty.taskTitle,onChange:function(e){return tb(Q(Q({},ty),{},{taskTitle:e.target.value}))}})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsxs)(z._,{htmlFor:"taskDesciption",children:["requirement"===ty.taskType?"Requirement":"Complaint"," Description"]}),(0,L.jsx)(h.Z,{id:"taskDesciption",placeholder:"Enter ".concat(ty.taskType," description"),value:ty.taskDesciption,onChange:function(e){return tb(Q(Q({},ty),{},{taskDesciption:e.target.value}))}})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"category",children:"Category"}),(0,L.jsxs)(B.Ph,{value:ty.taskType,onValueChange:function(e){return tb(Q(Q({},ty),{},{taskType:e}))},children:[(0,L.jsx)(B.i4,{className:"w-[280px]",children:(0,L.jsx)(B.ki,{placeholder:"Select a category"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"requirement",children:"Requirement"}),(0,L.jsx)(B.Ql,{value:"complaint",children:"Complaint"})]})]})]}),(0,L.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,L.jsx)(p.ZP,{onClick:function(){return td(!1)},className:"bg-gray-200 text-gray-800",children:"Cancel"}),(0,L.jsx)(p.ZP,{onClick:function(){tf("details")},children:"Next"})]})]})}),(0,L.jsx)(_.nU,{value:"details",children:(0,L.jsxs)("div",{className:"grid gap-4",children:[(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"dueDate",children:"Due Date"}),(0,L.jsxs)(D.J2,{children:[(0,L.jsx)(D.xo,{asChild:!0,children:(0,L.jsxs)(p.ZP,{className:"w-[280px] justify-start text-left font-normal ".concat(!ty.dueDate&&"text-muted-foreground"),children:[(0,L.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),ty.dueDate?(0,T.WU)(new Date(ty.dueDate),"PPP"):(0,L.jsx)("span",{children:"Pick a date"})]})}),(0,L.jsx)(D.yk,{className:"w-auto p-0",children:(0,L.jsx)(V.f,{mode:"single",selected:ty.dueDate?new Date(ty.dueDate):void 0,onSelect:function(e){return tb(Q(Q({},ty),{},{dueDate:(null==e?void 0:e.toISOString())||""}))},initialFocus:!0})})]})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"assignedToId",children:"Assigned To"}),(0,L.jsx)(h.Z,{id:"assignedToId",value:J?"".concat(J.employeeName):"",disabled:!0})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"priority",children:"Priority"}),(0,L.jsxs)(B.Ph,{value:ty.priority,onValueChange:function(e){return tb(Q(Q({},ty),{},{priority:e}))},children:[(0,L.jsx)(B.i4,{className:"w-[280px]",children:(0,L.jsx)(B.ki,{placeholder:"Select a priority"})}),(0,L.jsxs)(B.Bw,{children:[(0,L.jsx)(B.Ql,{value:"low",children:"Low"}),(0,L.jsx)(B.Ql,{value:"medium",children:"Medium"}),(0,L.jsx)(B.Ql,{value:"high",children:"High"})]})]})]}),(0,L.jsxs)("div",{className:"grid gap-2",children:[(0,L.jsx)(z._,{htmlFor:"storeId",children:"Store"}),(0,L.jsx)(h.Z,{id:"storeId",value:J?"".concat(J.storeName):"",disabled:!0})]}),(0,L.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,L.jsx)(p.ZP,{onClick:tF,className:"bg-gray-200 text-gray-800",children:"Back"}),(0,L.jsxs)(p.ZP,{onClick:function(){return tQ(ty.taskType)},children:["Create ","requirement"===ty.taskType?"Requirement":"Complaint"]})]})]})})]})]})}),(0,L.jsx)(g.Z,{title:null,visible:t0,onCancel:function(){return t1(!1)},footer:null,centered:!0,bodyStyle:{padding:0,textAlign:"center"},children:(0,L.jsx)("img",{src:t4||"",alt:"Preview Image",style:{maxWidth:"100%",maxHeight:"80vh"}})})]})}},65296:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/VisitDetailPage/[id]",function(){return n(17596)}])},40165:function(){},47034:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var a=n(89751);function r(e,t){var n,r,f,h=null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2,p=function(e){var t,n={},a=e.split(s.dateTimeDelimiter);if(a.length>2)return n;if(/:/.test(a[0])?t=a[0]:(n.date=a[0],t=a[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=s.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e);if(p.date){var v=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:NaN,restDateString:""};var r=a[1]?parseInt(a[1]):null,s=a[2]?parseInt(a[2]):null;return{year:null===s?r:100*s,restDateString:e.slice((a[1]||a[2]).length)}}(p.date,h);r=function(e,t){if(null===t)return new Date(NaN);var n,a,r=e.match(i);if(!r)return new Date(NaN);var s=!!r[4],c=l(r[1]),o=l(r[2])-1,d=l(r[3]),f=l(r[4]),h=l(r[5])-1;if(s)return f>=1&&f<=53&&h>=0&&h<=6?((n=new Date(0)).setUTCFullYear(t,0,4),a=n.getUTCDay()||7,n.setUTCDate(n.getUTCDate()+((f-1)*7+h+1-a)),n):new Date(NaN);var p=new Date(0);return o>=0&&o<=11&&d>=1&&d<=(u[o]||(m(t)?29:28))&&c>=1&&c<=(m(t)?366:365)?(p.setUTCFullYear(t,o,Math.max(c,d)),p):new Date(NaN)}(v.restDateString,v.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var x=r.getTime(),g=0;if(p.time&&isNaN(g=function(e){var t=e.match(c);if(!t)return NaN;var n=d(t[1]),r=d(t[2]),s=d(t[3]);return(24===n?0===r&&0===s:s>=0&&s<60&&r>=0&&r<60&&n>=0&&n<25)?n*a.vh+r*a.yJ+1e3*s:NaN}(p.time)))return new Date(NaN);if(p.timezone){if(isNaN(f=function(e){if("Z"===e)return 0;var t=e.match(o);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return s>=0&&s<=59?n*(r*a.vh+s*a.yJ):NaN}(p.timezone)))return new Date(NaN)}else{var j=new Date(x+g),N=new Date(0);return N.setFullYear(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate()),N.setHours(j.getUTCHours(),j.getUTCMinutes(),j.getUTCSeconds(),j.getUTCMilliseconds()),N}return new Date(x+g+f)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,o=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(e){return e?parseInt(e):1}function d(e){return e&&parseFloat(e.replace(",","."))||0}var u=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}}},function(e){e.O(0,[9545,6066,2116,4145,8482,398,4480,8076,4237,5675,5139,2217,2888,9774,179],function(){return e(e.s=65296)}),_N_E=e.O()}]);