(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2418],{86439:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.350.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s=(0,n(53526).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},55044:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.350.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s=(0,n(53526).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},39498:function(e,t,n){"use strict";n.d(t,{f:function(){return x}});var s=n(77191),r=n(36864),a=n(59499),i=n(4730);n(67294);var c=n(62469),l=n(19160),o=n(82359),d=n(74824),u=n(85893),h=["className","classNames","showOutsideDays"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e){var t=e.className,n=e.classNames,a=e.showOutsideDays,m=(0,i.Z)(e,h);return(0,u.jsx)(l._W,p({showOutsideDays:void 0===a||a,className:(0,o.cn)("p-3",t),classNames:p({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,o.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===m.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,o.cn)((0,d.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"},n),components:{IconLeft:function(e){return(0,r.Z)({},((0,s.Z)(e),e)),(0,u.jsx)(c.wyc,{className:"h-4 w-4"})},IconRight:function(e){return(0,r.Z)({},((0,s.Z)(e),e)),(0,u.jsx)(c.XCv,{className:"h-4 w-4"})}}},m))}x.displayName="Calendar"},59447:function(e,t,n){"use strict";n.d(t,{J2:function(){return u},xo:function(){return h},yk:function(){return m}});var s=n(59499),r=n(4730),a=n(67294),i=n(13677),c=n(82359),l=n(85893),o=["className","align","sideOffset"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}var u=i.fC,h=i.xz;i.ee;var m=a.forwardRef(function(e,t){var n=e.className,a=e.align,u=e.sideOffset,h=(0,r.Z)(e,o);return(0,l.jsx)(i.h_,{children:(0,l.jsx)(i.VY,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({ref:t,align:void 0===a?"center":a,sideOffset:void 0===u?4:u,className:(0,c.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n)},h))})});m.displayName=i.VY.displayName},10054:function(e,t,n){"use strict";n.d(t,{SP:function(){return f},dr:function(){return x},mQ:function(){return p},nU:function(){return j}});var s=n(59499),r=n(4730),a=n(67294),i=n(60434),c=n(82359),l=n(85893),o=["className"],d=["className"],u=["className"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=i.fC,x=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,o);return(0,l.jsx)(i.aV,m({ref:t,className:(0,c.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n)},s))});x.displayName=i.aV.displayName;var f=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,d);return(0,l.jsx)(i.xz,m({ref:t,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n)},s))});f.displayName=i.xz.displayName;var j=a.forwardRef(function(e,t){var n=e.className,s=(0,r.Z)(e,u);return(0,l.jsx)(i.VY,m({ref:t,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n)},s))});j.displayName=i.VY.displayName},2845:function(e,t,n){"use strict";n.r(t);var s=n(27812),r=n(50029),a=n(59499),i=n(64687),c=n.n(i),l=n(67294),o=n(34145),d=n(23153),u=n(11163),h=n(45007),m=n(375),p=n(74824),x=n(97945),f=n(18190),j=n(25141),g=n(14031),v=n(39498),y=n(33526),w=n(59447),N=n(10054),b=n(82422),k=n(5411),D=n(35843),C=n(85051),O=n(6425),P=n(66953),S=n(23245),T=n(21146),Z=n(59399),I=n(69948),_=n(54386),E=n(69288),F=n(8593),z=n(18664),A=n(68669),Q=n(86439),B=n(55044);n(90785);var V=n(96486),M=n(85893);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.default=function(){var e,t,n,i,U=(0,l.useState)([]),W=U[0],R=U[1],X=(0,l.useState)([]),Y=X[0],q=X[1],J=(0,l.useState)({id:0,taskTitle:"",taskDescription:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:86,status:"Assigned",priority:"low",category:"Complaint",storeId:0,storeName:"",storeCity:"",taskType:"complaint",imageCount:0}),$=J[0],H=J[1],G=(0,u.useRouter)(),K=(0,l.useState)("general"),ee=K[0],et=K[1],en=(0,l.useState)(!1),es=en[0],er=en[1],ea=(0,l.useState)(1),ei=ea[0],ec=ea[1],el=(0,l.useState)({employee:"",priority:"",status:"",search:"",startDate:(0,o.WU)(new Date,"yyyy-MM-dd"),endDate:(0,o.WU)(new Date,"yyyy-MM-dd")}),eo=el[0],ed=el[1],eu=(0,l.useState)(!0),eh=eu[0],em=eu[1],ep=(0,l.useState)([]),ex=ep[0],ef=ep[1],ej=(0,l.useState)([]),eg=ej[0],ev=ej[1],ey=(0,l.useState)([]),ew=ey[0],eN=ey[1],eb=(0,l.useState)(null),ek=eb[0],eD=eb[1],eC=(0,l.useState)(null),eO=eC[0],eP=eC[1],eS=(0,l.useState)(!1),eT=eS[0],eZ=eS[1],eI=(0,l.useState)(null);eI[0],eI[1];var e_=(0,l.useState)(!1),eE=e_[0],eF=e_[1],ez=(0,l.useState)([]),eA=ez[0],eQ=ez[1],eB=(0,l.useState)(0),eV=eB[0],eM=eB[1],eU=(0,l.useState)(!1),eL=eU[0],eW=eU[1],eR=(0,h.v9)(function(e){return e.auth.token}),eX=(0,h.v9)(function(e){return e.auth.role}),eY=(0,h.v9)(function(e){return e.auth.teamId});(0,l.useEffect)(function(){if(ek){var e=setTimeout(function(){eD(null)},2e4);return function(){return clearTimeout(e)}}},[ek]);var eq=function(e,t){var n=L(L({},eo),{},(0,a.Z)({},e,t));if(n.startDate&&n.endDate){var s=new Date(n.startDate),r=new Date(n.endDate);if((0,d.j)(r,s)>30){eD("Date range should not exceed 30 days");return}}ed(n)},eJ=function(e){G.push("/CustomerDetailPage/".concat(e))},e$=function(e){G.push("/SalesExecutive/".concat(e))},eH=(0,l.useCallback)((0,r.Z)(c().mark(function e(){var t,n,s,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return em(!0),e.prev=1,t=(0,o.WU)(new Date(eo.startDate),"yyyy-MM-dd"),n=(0,o.WU)(new Date(eo.endDate),"yyyy-MM-dd"),s="MANAGER"===eX?"https://api.gajkesaristeels.in/task/getByTeamAndDate?start=".concat(t,"&end=").concat(n,"&id=").concat(eY):"https://api.gajkesaristeels.in/task/getByDate?start=".concat(t,"&end=").concat(n),e.next=7,fetch(s,{headers:{Authorization:"Bearer ".concat(eR)}});case 7:return r=e.sent,e.next=10,r.json();case 10:R(e.sent.filter(function(e){return"complaint"===e.taskType}).map(function(e){return L(L({},e),{},{taskDescription:e.taskDescription,assignedToName:e.assignedToName||"Unknown"})}).sort(function(e,t){return new Date(t.dueDate).getTime()-new Date(e.dueDate).getTime()})),em(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error("Error fetching tasks:",e.t0),em(!1);case 20:case"end":return e.stop()}},e,null,[[1,16]])})),[eX,eo,eY,eR]),eG=(0,l.useCallback)((0,r.Z)(c().mark(function e(){var t,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(eR)}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,ef((0,V.sortBy)(n,function(e){return"".concat(e.firstName," ").concat(e.lastName)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),[eR]);(0,l.useEffect)(function(){eG()},[eG]),(0,l.useEffect)(function(){if(W.length>0){var e=(0,V.uniqBy)(W.map(function(e){return{id:e.assignedToId,name:e.assignedToName}}),"id");ev((0,V.sortBy)(e,"name"))}},[W]);var eK=(0,l.useCallback)((0,r.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/store/names",{headers:{Authorization:"Bearer ".concat(eR)}});case 3:return t=e.sent,e.next=6,t.json();case 6:eN(e.sent),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching stores:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),[eR]);(0,l.useEffect)(function(){eH()},[eR,ei,eo,eH]),(0,l.useEffect)(function(){es&&eK()},[es,eR,eK]),(0,l.useEffect)(function(){e0()},[W,eo]);var e0=function(){var e=eo.search.toLowerCase();q(W.filter(function(t){var n,s,r,a;return"complaint"===t.taskType&&(((null===(n=t.taskTitle)||void 0===n?void 0:n.toLowerCase())||"").includes(e)||((null===(s=t.taskDescription)||void 0===s?void 0:s.toLowerCase())||"").includes(e)||((null===(r=t.storeName)||void 0===r?void 0:r.toLowerCase())||"").includes(e)||((null===(a=t.assignedToName)||void 0===a?void 0:a.toLowerCase())||"").includes(e))&&(""===eo.employee||"all"===eo.employee||t.assignedToId===parseInt(eo.employee))&&(""===eo.priority||"all"===eo.priority||t.priority===eo.priority)&&(""===eo.status||"all"===eo.status?"Complete"!==t.status:t.status===eo.status)&&(""===eo.startDate||new Date(t.dueDate)>=new Date(eo.startDate))&&(""===eo.endDate||new Date(t.dueDate)<=new Date(eo.endDate))}))},e1=(e=(0,r.Z)(c().mark(function e(){var t,n,r,a,i,l,o;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=L(L({},$),{},{taskType:"complaint"}),e.next=4,fetch("https://api.gajkesaristeels.in/task/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(eR)},body:JSON.stringify(a)});case 4:return i=e.sent,e.next=7,i.json();case 7:l=e.sent,o=L(L({},$),{},{id:l.id,assignedToName:(null===(t=ex.find(function(e){return e.id===$.assignedToId}))||void 0===t?void 0:t.firstName)+" "+(null===(n=ex.find(function(e){return e.id===$.assignedToId}))||void 0===n?void 0:n.lastName)||"Unknown",storeName:(null===(r=ew.find(function(e){return e.id===$.storeId}))||void 0===r?void 0:r.storeName)||""}),R(function(e){return[o].concat((0,s.Z)(e))}),H({id:0,taskTitle:"",taskDescription:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:86,status:"Assigned",priority:"low",category:"Complaint",storeId:0,storeName:"",storeCity:"",taskType:"complaint",imageCount:0}),er(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error creating task:",e.t0);case 17:case"end":return e.stop()}},e,null,[[0,14]])})),function(){return e.apply(this,arguments)}),e4=(t=(0,r.Z)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/task/updateTask?taskId=".concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(eR)},body:JSON.stringify({status:n})});case 3:e.sent.ok?R(function(e){return e.map(function(e){return e.id===t?L(L({},e),{},{status:n}):e})}):console.error("Failed to update task status"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error updating task status:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,n){return t.apply(this,arguments)}),e2=(n=(0,r.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.gajkesaristeels.in/task/deleteById?taskId=".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(eR)}});case 3:eH(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error deleting task:",e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return n.apply(this,arguments)}),e8=function(e){ec(e)},e6=function(e,t){ed(function(n){return L(L({},n),{},(0,a.Z)({},e,t))}),e0()},e5=function(e){switch(e.toLowerCase()){case"assigned":return{icon:(0,M.jsx)(O.Z,{className:"w-4 h-4"}),color:"bg-purple-100 text-purple-800"};case"work in progress":return{icon:(0,M.jsx)(P.Z,{className:"w-4 h-4 animate-spin"}),color:"bg-blue-100 text-blue-800"};case"complete":return{icon:(0,M.jsx)(S.Z,{className:"w-4 h-4"}),color:"bg-green-100 text-green-800"};default:return{icon:(0,M.jsx)(T.Z,{className:"w-4 h-4"}),color:"bg-gray-100 text-gray-800"}}},e9=(i=(0,r.Z)(c().mark(function e(t){var n,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eW(!0),e.prev=1,e.next=4,fetch("https://api.gajkesaristeels.in/task/getById?id=".concat(t),{headers:{Authorization:"Bearer ".concat(eR)}});case 4:if((n=e.sent).ok){e.next=7;break}throw Error("Failed to fetch task details");case 7:return e.next=9,n.json();case 9:return s=e.sent.attachmentResponse.filter(function(e){return"check-in"===e.tag}).map(function(e){return e.fileName}),e.next=13,Promise.all(s.map(function(){var e=(0,r.Z)(c().mark(function e(n){var s,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.gajkesaristeels.in/task/downloadFile/".concat(t,"/check-in/").concat(n),{headers:{Authorization:"Bearer ".concat(eR)}});case 2:if(!(s=e.sent).ok){e.next=8;break}return e.next=6,s.blob();case 6:return r=e.sent,e.abrupt("return",URL.createObjectURL(r));case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 13:eQ(e.sent.filter(function(e){return null!==e})),eF(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("Error fetching task images:",e.t0);case 21:return e.prev=21,eW(!1),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[1,18,21,24]])})),function(e){return i.apply(this,arguments)}),e3=function(e,t){var n=e5(e.status),s=n.icon,r=n.color,a=eO===e.id;return(0,M.jsx)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},className:"w-full sm:w-1/2 lg:w-1/3 p-2",children:(0,M.jsxs)(b.Zb,{className:"h-full overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300",children:[(0,M.jsxs)(b.Ol,{className:"pb-2",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsxs)(x.C,{className:"".concat(r," px-3 py-1 rounded-full font-semibold flex items-center space-x-2"),children:[s," ",(0,M.jsx)("span",{children:e.status})]}),(0,M.jsxs)(D.h_,{children:[(0,M.jsx)(D.$F,{asChild:!0,children:(0,M.jsx)(p.z,{variant:"ghost",size:"sm",children:(0,M.jsx)(Z.Z,{className:"h-4 w-4"})})}),(0,M.jsxs)(D.AW,{align:"end",children:[(0,M.jsxs)(D.Xi,{onClick:function(){return eJ(e.storeId)},children:[(0,M.jsx)(I.Z,{className:"mr-2 h-4 w-4"})," View Store"]}),(0,M.jsxs)(D.Xi,{onClick:function(){return e$(e.assignedToId)},children:[(0,M.jsx)(_.Z,{className:"mr-2 h-4 w-4"})," View Field Officer"]}),(0,M.jsx)(D.VD,{}),(0,M.jsxs)(D.Xi,{onClick:function(){return e2(e.id)},className:"text-red-600",children:[(0,M.jsx)(E.Z,{className:"mr-2 h-4 w-4"})," Delete Complaint"]})]})]})]}),(0,M.jsx)(b.ll,{className:"text-xl mt-2",children:e.taskTitle||"Untitled Complaint"}),(0,M.jsxs)(b.SZ,{className:"flex items-center mt-1",children:[(0,M.jsx)(I.Z,{className:"w-4 h-4 mr-2 text-gray-500"}),e.storeName]})]}),(0,M.jsxs)(b.aY,{children:[(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)(_.Z,{className:"w-4 h-4 text-indigo-500"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:"text-sm text-gray-500",children:"Assigned to:"}),(0,M.jsx)("p",{className:"font-medium",children:e.assignedToName})]})]}),(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)(F.Z,{className:"w-4 h-4 text-indigo-500"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:"text-sm text-gray-500",children:"Due Date:"}),(0,M.jsx)("p",{className:"font-medium",children:(0,o.WU)(new Date(e.dueDate),"MMM d, yyyy")})]})]})]}),(0,M.jsx)("p",{className:"text-gray-600 ".concat(a?"":"line-clamp-2"),children:e.taskDescription}),e.taskDescription&&e.taskDescription.length>100&&(0,M.jsx)(p.z,{variant:"link",onClick:function(){return eP(a?null:e.id)},className:"mt-2 p-0 h-auto font-normal text-indigo-600",children:a?"Show less":"Show more"}),e.imageCount>0&&(0,M.jsx)("div",{className:"mt-4",children:(0,M.jsxs)(p.z,{variant:"outline",size:"sm",onClick:function(){return e9(e.id)},children:["View Images (",e.imageCount,")"]})})]}),(0,M.jsx)(b.eW,{className:"bg-gray-50 border-t",children:(0,M.jsx)("div",{className:"w-full",children:(0,M.jsxs)(g.Ph,{value:e.status,onValueChange:function(t){return e4(e.id,t)},children:[(0,M.jsx)(g.i4,{id:"status-".concat(e.id),className:"mt-1",children:(0,M.jsx)(g.ki,{placeholder:"Change status"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"Assigned",children:"Assigned"}),(0,M.jsx)(g.Ql,{value:"Work In Progress",children:"Work In Progress"}),(0,M.jsx)(g.Ql,{value:"Complete",children:"Complete"})]})]})})})]})},e.id)};return(0,M.jsxs)("div",{className:"container-complaints mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,M.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Complaints Management"}),(0,M.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[(0,M.jsxs)("div",{className:"flex-grow lg:flex-grow-0 lg:w-64 flex items-center gap-2",children:[(0,M.jsx)(f.I,{placeholder:"Search complaints",value:eo.search,onChange:function(e){return e6("search",e.target.value)},className:"w-full"}),(0,M.jsxs)(p.z,{onClick:function(){return er(!0)},children:[(0,M.jsx)(A.Z,{className:"w-4 h-4 mr-2"})," New"]})]}),(0,M.jsx)("div",{className:"flex-shrink-0",children:(0,M.jsxs)(C.yo,{open:eT,onOpenChange:eZ,children:[(0,M.jsx)(C.aM,{asChild:!0,children:(0,M.jsxs)(p.z,{variant:"outline",size:"sm",className:"lg:hidden",children:[(0,M.jsx)(z.Z,{className:"mr-2 h-4 w-4"}),"Filter"]})}),(0,M.jsxs)(C.ue,{side:"right",className:"w-[300px] sm:w-[400px]",children:[(0,M.jsx)(C.Tu,{children:(0,M.jsx)(C.bC,{children:"Filter Complaints"})}),(0,M.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(j._,{htmlFor:"employee",children:"Employee"}),(0,M.jsxs)(g.Ph,{value:eo.employee,onValueChange:function(e){return e6("employee",e)},children:[(0,M.jsx)(g.i4,{id:"employee",children:(0,M.jsx)(g.ki,{placeholder:"Filter by employee"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"all",children:"All Employees"}),eg.map(function(e){return(0,M.jsx)(g.Ql,{value:e.id.toString(),children:e.name},e.id)})]})]})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(j._,{htmlFor:"priority",children:"Priority"}),(0,M.jsxs)(g.Ph,{value:eo.priority,onValueChange:function(e){return e6("priority",e)},children:[(0,M.jsx)(g.i4,{id:"priority",children:(0,M.jsx)(g.ki,{placeholder:"Filter by priority"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"all",children:"All Priorities"}),(0,M.jsx)(g.Ql,{value:"low",children:"Low"}),(0,M.jsx)(g.Ql,{value:"medium",children:"Medium"}),(0,M.jsx)(g.Ql,{value:"high",children:"High"})]})]})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(j._,{htmlFor:"status",children:"Status"}),(0,M.jsxs)(g.Ph,{value:eo.status,onValueChange:function(e){return e6("status",e)},children:[(0,M.jsx)(g.i4,{id:"status",children:(0,M.jsx)(g.ki,{placeholder:"Filter by status"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"all",children:"All Open Statuses"}),(0,M.jsx)(g.Ql,{value:"Assigned",children:"Assigned"}),(0,M.jsx)(g.Ql,{value:"Work In Progress",children:"Work In Progress"}),(0,M.jsx)(g.Ql,{value:"Complete",children:"Complete"})]})]})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(j._,{htmlFor:"startDate",children:"Start Date"}),(0,M.jsx)(f.I,{id:"startDate",type:"date",value:eo.startDate,onChange:function(e){return eq("startDate",e.target.value)}})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(j._,{htmlFor:"endDate",children:"End Date"}),(0,M.jsx)(f.I,{id:"endDate",type:"date",value:eo.endDate,onChange:function(e){return eq("endDate",e.target.value)}})]})]}),(0,M.jsx)(p.z,{onClick:function(){eH(),eZ(!1)},className:"w-full mt-4",children:"Apply Filters"})]})]})}),(0,M.jsxs)("div",{className:"hidden lg:flex flex-wrap gap-4 items-center",children:[(0,M.jsxs)(g.Ph,{value:eo.employee,onValueChange:function(e){return e6("employee",e)},children:[(0,M.jsx)(g.i4,{className:"w-[200px]",children:(0,M.jsx)(g.ki,{placeholder:"Filter by employee"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"all",children:"All Employees"}),eg.map(function(e){return(0,M.jsx)(g.Ql,{value:e.id.toString(),children:e.name},e.id)})]})]}),(0,M.jsxs)(g.Ph,{value:eo.priority,onValueChange:function(e){return e6("priority",e)},children:[(0,M.jsx)(g.i4,{className:"w-[200px]",children:(0,M.jsx)(g.ki,{placeholder:"Filter by priority"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"all",children:"All Priorities"}),(0,M.jsx)(g.Ql,{value:"low",children:"Low"}),(0,M.jsx)(g.Ql,{value:"medium",children:"Medium"}),(0,M.jsx)(g.Ql,{value:"high",children:"High"})]})]}),(0,M.jsxs)(g.Ph,{value:eo.status,onValueChange:function(e){return e6("status",e)},children:[(0,M.jsx)(g.i4,{className:"w-[200px]",children:(0,M.jsx)(g.ki,{placeholder:"Filter by status"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"all",children:"All Open Statuses"}),(0,M.jsx)(g.Ql,{value:"Assigned",children:"Assigned"}),(0,M.jsx)(g.Ql,{value:"Work In Progress",children:"Work In Progress"}),(0,M.jsx)(g.Ql,{value:"Complete",children:"Complete"})]})]}),(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)(j._,{htmlFor:"startDate",children:"From:"}),(0,M.jsx)(f.I,{type:"date",id:"startDate",value:eo.startDate,onChange:function(e){return eq("startDate",e.target.value)},className:"w-auto"})]}),(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)(j._,{htmlFor:"endDate",children:"To:"}),(0,M.jsx)(f.I,{type:"date",id:"endDate",value:eo.endDate,onChange:function(e){return eq("endDate",e.target.value)},className:"w-auto"})]})]})]}),(0,M.jsx)(y.Vq,{open:es,onOpenChange:er,children:(0,M.jsxs)(y.cZ,{children:[(0,M.jsxs)(y.fK,{children:[(0,M.jsx)(y.$N,{children:"Create New Complaint"}),(0,M.jsx)(y.Be,{children:"Fill in the details to create a new complaint."})]}),(0,M.jsxs)(N.mQ,{value:ee,className:"w-full",children:[(0,M.jsxs)(N.dr,{className:"grid w-full grid-cols-2",children:[(0,M.jsx)(N.SP,{value:"general",onClick:function(){return et("general")},children:"General"}),(0,M.jsx)(N.SP,{value:"details",onClick:function(){return et("details")},children:"Details"})]}),(0,M.jsx)(N.nU,{value:"general",children:(0,M.jsxs)("div",{className:"grid gap-4",children:[(0,M.jsxs)("div",{className:"grid gap-2",children:[(0,M.jsx)(j._,{htmlFor:"taskTitle",children:"Complaint Title"}),(0,M.jsx)(f.I,{id:"taskTitle",placeholder:"Enter complaint title",value:$.taskTitle,onChange:function(e){return H(L(L({},$),{},{taskTitle:e.target.value}))}})]}),(0,M.jsxs)("div",{className:"grid gap-2",children:[(0,M.jsx)(j._,{htmlFor:"taskDescription",children:"Complaint Description"}),(0,M.jsx)(f.I,{id:"taskDescription",placeholder:"Enter complaint description",value:$.taskDescription,onChange:function(e){return H(L(L({},$),{},{taskDescription:e.target.value}))}})]}),(0,M.jsxs)("div",{className:"grid gap-2",children:[(0,M.jsx)(j._,{htmlFor:"category",children:"Category"}),(0,M.jsxs)(g.Ph,{value:$.category,onValueChange:function(e){return H(L(L({},$),{},{category:e}))},children:[(0,M.jsx)(g.i4,{className:"w-[280px]",children:(0,M.jsx)(g.ki,{placeholder:"Select a category"})}),(0,M.jsx)(g.Bw,{children:(0,M.jsx)(g.Ql,{value:"Complaint",children:"Complaint"})})]})]}),(0,M.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,M.jsx)(p.z,{variant:"outline",onClick:function(){return er(!1)},children:"Cancel"}),(0,M.jsx)(p.z,{onClick:function(){et("details")},children:"Next"})]})]})}),(0,M.jsx)(N.nU,{value:"details",children:(0,M.jsxs)("div",{className:"grid gap-4",children:[(0,M.jsxs)("div",{className:"grid gap-2",children:[(0,M.jsx)(j._,{htmlFor:"dueDate",children:"Due Date"}),(0,M.jsxs)(w.J2,{children:[(0,M.jsx)(w.xo,{asChild:!0,children:(0,M.jsxs)(p.z,{variant:"outline",className:"w-[280px] justify-start text-left font-normal ".concat(!$.dueDate&&"text-muted-foreground"),children:[(0,M.jsx)(F.Z,{className:"mr-2 h-4 w-4"}),$.dueDate?(0,o.WU)(new Date($.dueDate),"PPP"):(0,M.jsx)("span",{children:"Pick a date"})]})}),(0,M.jsx)(w.yk,{className:"w-auto p-0",children:(0,M.jsx)(v.f,{mode:"single",selected:$.dueDate?new Date($.dueDate):void 0,onSelect:function(e){return H(L(L({},$),{},{dueDate:(null==e?void 0:e.toISOString())||""}))},initialFocus:!0})})]})]}),(0,M.jsxs)("div",{className:"grid gap-2",children:[(0,M.jsx)(j._,{htmlFor:"assignedToId",children:"Assigned To"}),(0,M.jsxs)(g.Ph,{value:$.assignedToId?$.assignedToId.toString():"",onValueChange:function(e){var t=ex.find(function(t){return t.id===parseInt(e)});H(L(L({},$),{},{assignedToId:parseInt(e),assignedToName:t?"".concat(t.firstName," ").concat(t.lastName):"Unknown"}))},children:[(0,M.jsx)(g.i4,{className:"w-[280px]",children:(0,M.jsx)(g.ki,{placeholder:"Select an employee"})}),(0,M.jsx)(g.Bw,{children:ex.map(function(e){return(0,M.jsxs)(g.Ql,{value:e.id.toString(),children:[e.firstName," ",e.lastName]},e.id)})})]})]}),(0,M.jsxs)("div",{className:"grid gap-2",children:[(0,M.jsx)(j._,{htmlFor:"priority",children:"Priority"}),(0,M.jsxs)(g.Ph,{value:$.priority,onValueChange:function(e){return H(L(L({},$),{},{priority:e}))},children:[(0,M.jsx)(g.i4,{className:"w-[280px]",children:(0,M.jsx)(g.ki,{placeholder:"Select a priority"})}),(0,M.jsxs)(g.Bw,{children:[(0,M.jsx)(g.Ql,{value:"low",children:"Low"}),(0,M.jsx)(g.Ql,{value:"medium",children:"Medium"}),(0,M.jsx)(g.Ql,{value:"high",children:"High"})]})]})]}),(0,M.jsxs)("div",{className:"grid gap-2",children:[(0,M.jsx)(j._,{htmlFor:"storeId",children:"Store"}),(0,M.jsxs)(g.Ph,{value:$.storeId?$.storeId.toString():"",onValueChange:function(e){return H(L(L({},$),{},{storeId:parseInt(e)}))},children:[(0,M.jsx)(g.i4,{className:"w-[280px]",children:(0,M.jsx)(g.ki,{placeholder:"Select a store"})}),(0,M.jsx)(g.Bw,{children:ew.map(function(e){return(0,M.jsx)(g.Ql,{value:e.id.toString(),children:e.storeName},e.id)})})]})]}),(0,M.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,M.jsx)(p.z,{variant:"outline",onClick:function(){et("general")},children:"Back"}),(0,M.jsx)(p.z,{onClick:e1,children:"Create Complaint"})]})]})})]})]})}),eh?(0,M.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,M.jsx)(P.Z,{className:"w-8 h-8 animate-spin text-primary"})}):0===Y.length?(0,M.jsxs)("div",{className:"text-center py-10",children:[(0,M.jsx)(T.Z,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),(0,M.jsx)("p",{className:"text-xl font-semibold",children:"No complaints found."}),(0,M.jsx)("p",{className:"text-gray-500 mt-2",children:"Try adjusting your filters or create a new complaint."})]}):(0,M.jsx)("div",{className:"flex flex-wrap -mx-2",children:Y.slice((ei-1)*10,10*ei).map(function(e,t){return e3(e,t)})}),(0,M.jsx)("div",{className:"mt-8 flex justify-center",children:function(){var e=Math.ceil(Y.length/10),t=[],n=Math.max(ei-Math.floor(2.5),1),s=n+5-1;s>e&&(n=Math.max((s=e)-5+1,1));for(var r=n;r<=s;r++)t.push(r);return(0,M.jsx)(k.tl,{children:(0,M.jsxs)(k.ng,{children:[1!==ei&&(0,M.jsx)(k.dN,{onClick:function(){return e8(ei-1)}}),n>1&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.nt,{children:(0,M.jsx)(k.kN,{onClick:function(){return e8(1)},children:"1"})}),n>2&&(0,M.jsx)(k.nt,{children:(0,M.jsx)(k.kN,{children:"..."})})]}),t.map(function(e){return(0,M.jsx)(k.nt,{children:(0,M.jsx)(k.kN,{isActive:e===ei,onClick:function(){return e8(e)},children:e})},e)}),s<e&&(0,M.jsxs)(M.Fragment,{children:[s<e-1&&(0,M.jsx)(k.nt,{children:(0,M.jsx)(k.kN,{children:"..."})}),(0,M.jsx)(k.nt,{children:(0,M.jsx)(k.kN,{onClick:function(){return e8(e)},children:e})})]}),ei!==e&&(0,M.jsx)(k.$0,{onClick:function(){return e8(ei+1)}})]})})}()}),eE&&(0,M.jsx)(y.Vq,{open:eE,onOpenChange:eF,children:(0,M.jsxs)(y.cZ,{className:"max-w-3xl",children:[(0,M.jsx)(y.fK,{children:(0,M.jsx)(y.$N,{children:"Image Preview"})}),eL?(0,M.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,M.jsx)(P.Z,{className:"w-8 h-8 animate-spin text-primary"}),(0,M.jsx)("span",{className:"ml-2",children:"Loading images..."})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)("img",{src:eA[eV],alt:"Image ".concat(eV+1),className:"w-full h-auto"}),eA.length>1&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(p.z,{variant:"outline",size:"icon",className:"absolute left-2 top-1/2 transform -translate-y-1/2",onClick:function(){return eM(function(e){return 0===e?eA.length-1:e-1})},children:(0,M.jsx)(Q.Z,{className:"h-4 w-4"})}),(0,M.jsx)(p.z,{variant:"outline",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:function(){return eM(function(e){return e===eA.length-1?0:e+1})},children:(0,M.jsx)(B.Z,{className:"h-4 w-4"})})]})]}),(0,M.jsxs)("p",{className:"text-center mt-2",children:["Image ",eV+1," of ",eA.length]})]})]})})]})}},28989:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Complaints",function(){return n(2845)}])},90785:function(){}},function(e){e.O(0,[3662,9545,6066,2116,4145,8482,7152,971,6438,2888,9774,179],function(){return e(e.s=28989)}),_N_E=e.O()}]);