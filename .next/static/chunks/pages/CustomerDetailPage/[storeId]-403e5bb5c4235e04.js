(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8147],{5411:function(e,t,s){"use strict";s.d(t,{$0:function(){return w},Dj:function(){return Z},dN:function(){return b},kN:function(){return k},ng:function(){return N},nt:function(){return y},tl:function(){return g}});var n=s(59499),r=s(4730),a=s(67294),i=s(62469),c=s(82359),l=s(74824),o=s(85893),d=["className"],u=["className"],h=["className"],p=["className","isActive","size"],m=["className"],x=["className"],j=["className"];function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var g=function(e){var t=e.className,s=(0,r.Z)(e,d);return(0,o.jsx)("nav",v({role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",t)},s))};g.displayName="Pagination";var N=a.forwardRef(function(e,t){var s=e.className,n=(0,r.Z)(e,u);return(0,o.jsx)("ul",v({ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",s)},n))});N.displayName="PaginationContent";var y=a.forwardRef(function(e,t){var s=e.className,n=(0,r.Z)(e,h);return(0,o.jsx)("li",v({ref:t,className:(0,c.cn)("",s)},n))});y.displayName="PaginationItem";var k=function(e){var t=e.className,s=e.isActive,n=e.size,a=(0,r.Z)(e,p);return(0,o.jsx)("a",v({"aria-current":s?"page":void 0,className:(0,c.cn)((0,l.d)({variant:s?"outline":"ghost",size:void 0===n?"icon":n}),t)},a))};k.displayName="PaginationLink";var b=function(e){var t=e.className,s=(0,r.Z)(e,m);return(0,o.jsxs)(k,v(v({"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",t)},s),{},{children:[(0,o.jsx)(i.wyc,{className:"h-4 w-4"}),(0,o.jsx)("span",{children:"Previous"})]}))};b.displayName="PaginationPrevious";var w=function(e){var t=e.className,s=(0,r.Z)(e,x);return(0,o.jsxs)(k,v(v({"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",t)},s),{},{children:[(0,o.jsx)("span",{children:"Next"}),(0,o.jsx)(i.XCv,{className:"h-4 w-4"})]}))};w.displayName="PaginationNext";var Z=function(e){var t=e.className,s=(0,r.Z)(e,j);return(0,o.jsxs)("span",v(v({"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",t)},s),{},{children:[(0,o.jsx)(i.nWS,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"More pages"})]}))};Z.displayName="PaginationEllipsis"},94973:function(e,t,s){"use strict";s.r(t);var n=s(59499),r=s(50029),a=s(64687),i=s.n(a),c=s(67294),l=s(33526),o=s(10054),d=s(18190),u=s(25141),h=s(74824),p=s(14031),m=s(59447),x=s(39498),j=s(8593),f=s(34145),v=s(87066),g=s(30112),N=s(85893);function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}t.default=function(e){var t,s=e.isOpen,n=e.onClose,a=e.storeId,y=e.createTask,b=(0,c.useState)({taskTitle:"",taskDesciption:"",dueDate:"",assignedToId:0,assignedToName:"",assignedById:86,status:"Assigned",priority:"low",taskType:"requirement",storeId:a,category:"",storeName:""}),w=b[0],Z=b[1],C=(0,c.useState)("general"),P=C[0],S=C[1];(0,c.useEffect)(function(){var e;(e=(0,r.Z)(i().mark(function e(){var t,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat(a,"&start=2024-06-01&end=2024-06-30"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:Array.isArray((t=e.sent).data)&&t.data.length>0&&(s=t.data[0],Z(function(e){return k(k({},e),{},{assignedToId:s.assignedToId,assignedToName:s.assignedToName,storeName:s.storeName})})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching task details:",e.t0),g.ZP.error("Error fetching task details.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return e.apply(this,arguments)})()},[a]);var D=(t=(0,r.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.post("https://api.gajkesaristeels.in/task/create",k(k({},w),{},{dueDate:w.dueDate.split("T")[0],storeId:w.storeId,taskType:"requirement"}),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:e.sent,g.ZP.success("Requirement created successfully!"),y(),n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error creating requirement:",e.t0),g.ZP.error("Error creating requirement.");case 13:case"end":return e.stop()}},e,null,[[0,9]])})),function(){return t.apply(this,arguments)});return(0,N.jsx)(l.Vq,{open:s,onOpenChange:n,children:(0,N.jsxs)(l.cZ,{className:"sm:max-w-[600px]",children:[(0,N.jsxs)(l.fK,{children:[(0,N.jsx)(l.$N,{children:"Create Requirement"}),(0,N.jsx)(l.Be,{children:"Fill in the requirement details."})]}),(0,N.jsxs)(o.mQ,{value:P,children:[(0,N.jsxs)(o.dr,{className:"mb-4",children:[(0,N.jsx)(o.SP,{value:"general",onClick:function(){return S("general")},children:"General"}),(0,N.jsx)(o.SP,{value:"details",onClick:function(){return S("details")},children:"Details"})]}),(0,N.jsx)(o.nU,{value:"general",children:(0,N.jsxs)("div",{className:"grid gap-4",children:[(0,N.jsxs)("div",{className:"grid gap-2",children:[(0,N.jsx)(u._,{htmlFor:"taskTitle",children:"Requirement Title"}),(0,N.jsx)(d.I,{id:"taskTitle",placeholder:"Enter requirement title",value:w.taskTitle,onChange:function(e){return Z(k(k({},w),{},{taskTitle:e.target.value}))}})]}),(0,N.jsxs)("div",{className:"grid gap-2",children:[(0,N.jsx)(u._,{htmlFor:"taskDescription",children:"Requirement Description"}),(0,N.jsx)(d.I,{id:"taskDescription",placeholder:"Enter requirement description",value:w.taskDesciption,onChange:function(e){return Z(k(k({},w),{},{taskDesciption:e.target.value}))}})]}),(0,N.jsxs)("div",{className:"grid gap-2",children:[(0,N.jsx)(u._,{htmlFor:"category",children:"Category"}),(0,N.jsxs)(p.Ph,{value:w.category,onValueChange:function(e){return Z(k(k({},w),{},{category:e}))},children:[(0,N.jsx)(p.i4,{className:"w-[280px]",children:(0,N.jsx)(p.ki,{placeholder:"Select a category"})}),(0,N.jsx)(p.Bw,{children:(0,N.jsx)(p.Ql,{value:"Requirement",children:"Requirement"})})]})]}),(0,N.jsxs)("div",{className:"grid gap-2",children:[(0,N.jsx)(u._,{htmlFor:"storeName",children:"Store"}),(0,N.jsx)(d.I,{id:"storeName",value:w.storeName,disabled:!0,className:"w-[280px] bg-gray-100"})]}),(0,N.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,N.jsx)(h.z,{variant:"outline",onClick:n,children:"Cancel"}),(0,N.jsx)(h.z,{onClick:function(){S("details")},children:"Next"})]})]})}),(0,N.jsx)(o.nU,{value:"details",children:(0,N.jsxs)("div",{className:"grid gap-4",children:[(0,N.jsxs)("div",{className:"grid gap-2",children:[(0,N.jsx)(u._,{htmlFor:"dueDate",children:"Due Date"}),(0,N.jsxs)(m.J2,{children:[(0,N.jsx)(m.xo,{asChild:!0,children:(0,N.jsxs)(h.z,{variant:"outline",className:"w-[280px] justify-start text-left font-normal ".concat(!w.dueDate&&"text-muted-foreground"),children:[(0,N.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),w.dueDate?(0,f.WU)(new Date(w.dueDate),"PPP"):(0,N.jsx)("span",{children:"Pick a date"})]})}),(0,N.jsx)(m.yk,{className:"w-auto p-0",children:(0,N.jsx)(x.f,{mode:"single",selected:w.dueDate?new Date(w.dueDate):void 0,onSelect:function(e){return Z(k(k({},w),{},{dueDate:e?e.toISOString().split("T")[0]:""}))},initialFocus:!0})})]})]}),(0,N.jsxs)("div",{className:"grid gap-2",children:[(0,N.jsx)(u._,{htmlFor:"assignedTo",children:"Assigned To"}),(0,N.jsx)(d.I,{id:"assignedTo",value:w.assignedToName,disabled:!0,className:"w-[280px] bg-gray-100"})]}),(0,N.jsxs)("div",{className:"grid gap-2",children:[(0,N.jsx)(u._,{htmlFor:"priority",children:"Priority"}),(0,N.jsxs)(p.Ph,{value:w.priority,onValueChange:function(e){return Z(k(k({},w),{},{priority:e}))},children:[(0,N.jsx)(p.i4,{className:"w-[280px]",children:(0,N.jsx)(p.ki,{placeholder:"Select a priority"})}),(0,N.jsxs)(p.Bw,{children:[(0,N.jsx)(p.Ql,{value:"low",children:"Low"}),(0,N.jsx)(p.Ql,{value:"medium",children:"Medium"}),(0,N.jsx)(p.Ql,{value:"high",children:"High"})]})]})]}),(0,N.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,N.jsx)(h.z,{variant:"outline",onClick:function(){S("general")},children:"Back"}),(0,N.jsx)(h.z,{onClick:D,children:"Create Requirement"})]})]})})]})]})})}},77372:function(e,t,s){"use strict";s.r(t);var n=s(59499),r=s(67294),a=s(74824),i=s(18190),c=s(25141),l=s(14031),o=s(10054),d=s(33526),u=s(85893);function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach(function(t){(0,n.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var m={storeName:"",clientFirstName:"",clientLastName:"",email:"",primaryContact:"",gstNumber:"",clientType:"",otherClientType:"",addressLine1:"",addressLine2:"",village:"",taluka:"",city:"",state:"",pincode:""},x=["shop","site visit","architect","engineer"];t.default=function(e){var t=e.isOpen,s=e.onClose,h=e.customerData,j=e.onSubmit,f=(0,r.useState)("basic-info"),v=f[0],g=f[1],N=(0,r.useState)(m),y=N[0],k=N[1],b=(0,r.useState)(!1),w=b[0],Z=b[1],C="bg-gray-100 text-gray-800 font-medium cursor-not-allowed";(0,r.useEffect)(function(){if(h){var e,t=(null===(e=h.clientType)||void 0===e?void 0:e.toLowerCase())||"",s=x.includes(t);k(p(p(p({},m),h),{},{village:h.district||"",taluka:h.subDistrict||"",clientType:s?t:"others",otherClientType:s?"":h.clientType||""})),Z(!s)}},[h]);var P=function(e){var t=e.target,s=t.name,r=t.value;k(function(e){return p(p({},e),{},(0,n.Z)({},s,r))})};return(0,u.jsx)(d.Vq,{open:t,onOpenChange:s,children:(0,u.jsxs)(d.cZ,{className:"sm:max-w-[625px]",children:[(0,u.jsx)(d.fK,{children:(0,u.jsx)(d.$N,{children:"Edit Customer"})}),(0,u.jsxs)(o.mQ,{value:v,onValueChange:g,className:"w-full",children:[(0,u.jsxs)(o.dr,{className:"grid w-full grid-cols-2",children:[(0,u.jsx)(o.SP,{value:"basic-info",children:"Basic Info"}),(0,u.jsx)(o.SP,{value:"address-info",children:"Address Info"})]}),(0,u.jsx)(o.nU,{value:"basic-info",children:(0,u.jsxs)("div",{className:"space-y-4 py-4",children:[(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"storeName",children:"Store Name"}),(0,u.jsx)(i.I,{id:"storeName",name:"storeName",value:y.storeName,disabled:!0,className:C})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"gstNumber",children:"GST Number"}),(0,u.jsx)(i.I,{id:"gstNumber",name:"gstNumber",value:y.gstNumber,onChange:P})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"clientFirstName",children:"First Name"}),(0,u.jsx)(i.I,{id:"clientFirstName",name:"clientFirstName",value:y.clientFirstName,onChange:P})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"clientLastName",children:"Last Name"}),(0,u.jsx)(i.I,{id:"clientLastName",name:"clientLastName",value:y.clientLastName,onChange:P})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"email",children:"Email"}),(0,u.jsx)(i.I,{id:"email",name:"email",type:"email",value:y.email,onChange:P})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"primaryContact",children:"Phone"}),(0,u.jsx)(i.I,{id:"primaryContact",name:"primaryContact",value:y.primaryContact,disabled:!0,className:C})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"clientType",children:"Client Type"}),(0,u.jsxs)(l.Ph,{onValueChange:function(e){var t=e.toLowerCase();Z("others"===t),k(function(e){return p(p({},e),{},{clientType:t,otherClientType:"others"===t?e.otherClientType:""})})},value:y.clientType,children:[(0,u.jsx)(l.i4,{children:(0,u.jsx)(l.ki,{placeholder:"Select Client Type"})}),(0,u.jsxs)(l.Bw,{children:[(0,u.jsx)(l.Ql,{value:"shop",children:"Shop"}),(0,u.jsx)(l.Ql,{value:"site visit",children:"Site Visit"}),(0,u.jsx)(l.Ql,{value:"architect",children:"Architect"}),(0,u.jsx)(l.Ql,{value:"engineer",children:"Engineer"}),(0,u.jsx)(l.Ql,{value:"others",children:"Others"})]})]})]}),w&&(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"otherClientType",children:"Please specify"}),(0,u.jsx)(i.I,{id:"otherClientType",name:"otherClientType",value:y.otherClientType,onChange:P})]}),(0,u.jsx)(a.z,{className:"w-full",onClick:function(){return g("address-info")},children:"Next"})]})}),(0,u.jsx)(o.nU,{value:"address-info",children:(0,u.jsxs)("div",{className:"space-y-4 py-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"addressLine1",children:"Address Line 1"}),(0,u.jsx)(i.I,{id:"addressLine1",name:"addressLine1",value:y.addressLine1,onChange:P})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"addressLine2",children:"Address Line 2"}),(0,u.jsx)(i.I,{id:"addressLine2",name:"addressLine2",value:y.addressLine2,onChange:P})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"village",children:"Village (District)"}),(0,u.jsx)(i.I,{id:"village",name:"village",value:y.village,onChange:P})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"taluka",children:"Taluka (Sub District)"}),(0,u.jsx)(i.I,{id:"taluka",name:"taluka",value:y.taluka,onChange:P})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"city",children:"City"}),(0,u.jsx)(i.I,{id:"city",name:"city",value:y.city,onChange:P})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"state",children:"State"}),(0,u.jsx)(i.I,{id:"state",name:"state",value:y.state,onChange:P})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(c._,{htmlFor:"pincode",children:"Pincode"}),(0,u.jsx)(i.I,{id:"pincode",name:"pincode",value:y.pincode,onChange:P})]})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)(a.z,{variant:"outline",onClick:function(){return g("basic-info")},children:"Back"}),(0,u.jsx)(a.z,{onClick:function(){var e=p({},y);w&&(e.clientType=y.otherClientType||"Others"),j(e)},children:"Update Customer"})]})]})})]})]})})}},90093:function(e,t,s){"use strict";s.r(t);var n=s(27812),r=s(59499),a=s(50029),i=s(16835),c=s(64687),l=s.n(c),o=s(67294),d=s(87066),u=s(54293),h=s(90601),p=s(15418),m=s(30112),x=s(6499),j=s(48672),f=s(78166),v=s(85372),g=s(8593),N=s(27484),y=s.n(N),k=s(5411);s(2395);var b=s(85893);function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var C=u.Z.Option,P=h.Z.RangePicker;t.default=function(e){var t,s,r=e.storeId,c=e.token,h=(0,o.useState)([]),N=h[0],w=h[1],S=(0,o.useState)(!1),D=S[0],O=S[1],I=(0,o.useState)(!1),A=I[0],E=I[1],T=(0,o.useState)(null),q=T[0],F=T[1],L=p.Z.useForm(),B=(0,i.Z)(L,1)[0],M=(0,o.useState)(1),z=M[0],_=M[1],R=(0,o.useState)(!1),Y=R[0],V=R[1],U=(0,o.useCallback)((0,a.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("https://api.gajkesaristeels.in/site/getByStore?id=".concat(r),{headers:{Authorization:"Bearer ".concat(c)}});case 3:w(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching sites:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[r,c]);(0,o.useEffect)(function(){r&&U()},[r,U]);var W=function(e){E(!0),F(e),B.setFieldsValue(Z(Z({},e),{},{dateRange:[y()(e.startDate),y()(e.endDate)]})),O(!0)},Q=(t=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.delete("https://api.gajkesaristeels.in/site/delete?id=".concat(t),{headers:{Authorization:"Bearer ".concat(c)}});case 3:w(N.filter(function(e){return e.id!==t})),m.ZP.success("Site deleted successfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting site:",e.t0),m.ZP.error("Error deleting site.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return t.apply(this,arguments)}),G=(s=(0,a.Z)(l().mark(function e(t){var s,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Z(Z({},t),{},{startDate:t.dateRange[0].format("YYYY-MM-DD"),endDate:t.dateRange[1].format("YYYY-MM-DD"),storeId:parseInt(r,10)}),e.prev=1,!(A&&q)){e.next=9;break}return e.next=5,d.Z.put("https://api.gajkesaristeels.in/site/edit?id=".concat(q.id),s,{headers:{Authorization:"Bearer ".concat(c)}});case 5:w(N.map(function(e){return e.id===q.id?Z(Z({},e),s):e})),m.ZP.success("Site updated successfully!"),e.next=14;break;case 9:return e.next=11,d.Z.post("https://api.gajkesaristeels.in/site/add",s,{headers:{Authorization:"Bearer ".concat(c)}});case 11:a=e.sent,w([].concat((0,n.Z)(N),[Z(Z({},s),{},{id:a.data})])),m.ZP.success("Site added successfully!");case 14:O(!1),B.resetFields(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("Error submitting site:",e.t0),m.ZP.error("Error submitting site.");case 22:case"end":return e.stop()}},e,null,[[1,18]])})),function(e){return s.apply(this,arguments)}),$=Y?N.slice((z-1)*4,4*z):N.slice(0,4);return(0,b.jsxs)("div",{className:"sites-container",children:[(0,b.jsx)(x.ZP,{onClick:function(){E(!1),F(null),B.resetFields(),O(!0)},className:"add-site-btn",children:"+ Add Site"}),(0,b.jsx)("div",{className:"sites-list",children:$.map(function(e){return(0,b.jsxs)("div",{className:"site-card",children:[(0,b.jsxs)("div",{className:"site-card-content",children:[(0,b.jsx)("p",{className:"site-name",children:e.siteName}),(0,b.jsxs)("p",{className:"site-info",children:[(0,b.jsx)(v.Z,{size:14})," ",e.city]}),(0,b.jsxs)("p",{className:"site-info",children:[(0,b.jsx)(v.Z,{size:14})," Area: ",e.area]}),(0,b.jsxs)("p",{className:"site-info",children:[(0,b.jsx)(g.Z,{size:14})," ",y()(e.startDate).format("DD/MM/YYYY")," - ",y()(e.endDate).format("DD/MM/YYYY")]})]}),(0,b.jsxs)("div",{className:"site-actions",children:[(0,b.jsxs)("div",{className:"status-indicator ".concat(e.status),children:[(0,b.jsx)("span",{className:"status-dot"}),e.status]}),(0,b.jsxs)("div",{className:"action-buttons",children:[(0,b.jsx)(x.ZP,{type:"link",className:"edit-btn",onClick:function(){return W(e)},children:"Edit"}),(0,b.jsx)(x.ZP,{type:"link",danger:!0,onClick:function(){return Q(e.id)},children:"Delete"})]})]})]},e.id)})}),N.length>4&&(0,b.jsx)(x.ZP,{onClick:function(){V(!Y),_(1)},className:"show-more-btn",children:Y?"Show Less":"Show More"}),Y&&(0,b.jsx)(k.tl,{children:(0,b.jsx)(k.ng,{children:(0,b.jsxs)(k.nt,{children:[(0,b.jsx)(k.dN,{onClick:function(){z>1&&_(function(e){return e-1})},className:1===z?"opacity-50 cursor-not-allowed":""}),(0,b.jsx)(k.$0,{onClick:function(){z<Math.ceil(N.length/4)&&_(function(e){return e+1})},className:z===Math.ceil(N.length/4)?"opacity-50 cursor-not-allowed":""})]})})}),(0,b.jsx)(j.Z,{title:A?"Edit Site":"Add Site",visible:D,onCancel:function(){return O(!1)},footer:null,children:(0,b.jsxs)(p.Z,{form:B,onFinish:G,layout:"vertical",children:[(0,b.jsx)(p.Z.Item,{name:"siteName",label:"Site Name",rules:[{required:!0,message:"Please enter the site name"}],children:(0,b.jsx)(f.Z,{})}),(0,b.jsx)(p.Z.Item,{name:"city",label:"City",rules:[{required:!0,message:"Please enter the city"}],children:(0,b.jsx)(f.Z,{})}),(0,b.jsx)(p.Z.Item,{name:"area",label:"Area",rules:[{required:!0,message:"Please enter the area"}],children:(0,b.jsx)(f.Z,{})}),(0,b.jsx)(p.Z.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select the status"}],children:(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(C,{value:"active",children:"Active"}),(0,b.jsx)(C,{value:"inactive",children:"Inactive"})]})}),(0,b.jsx)(p.Z.Item,{name:"dateRange",label:"Date Range",rules:[{required:!0,message:"Please select the date range"}],children:(0,b.jsx)(P,{})}),(0,b.jsx)(p.Z.Item,{children:(0,b.jsx)(x.ZP,{type:"primary",htmlType:"submit",children:A?"Update Site":"Add Site"})})]})})]})}},97628:function(e,t,s){"use strict";s.r(t);var n=s(27812),r=s(59499),a=s(50029),i=s(16835),c=s(64687),l=s.n(c),o=s(67294),d=s(11163),u=s(9008),h=s.n(u),p=s(4298),m=s.n(p),x=s(87066),j=s(90093),f=s(45007),v=s(77372),g=s(94973),N=s(42103),y=s(78166),k=s(54293),b=s(15418),w=s(30112),Z=s(8395),C=s(6499),P=s(71459),S=s(48672),D=s(90601),O=s(59447),I=s(8593),A=s(49855),E=s(34145),T=s(39498);s(83350);var q=s(5411),F=s(23148),L=s(85893);function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}F.kL.register(F.uw,F.f$,F.od,F.jn,F.Dx,F.u,F.De);var z=y.Z.TextArea,_=k.Z.Option;t.default=function(){var e,t,s,c,u,p,F,B,R,Y,V,U,W,Q,G=(0,d.useRouter)(),$=G.query.storeId,J=(0,o.useState)(null),X=J[0],K=J[1],H=(0,o.useState)([]),ee=H[0],et=H[1],es=(0,o.useState)([]),en=es[0],er=es[1],ea=(0,o.useState)([]),ei=ea[0],ec=ea[1],el=(0,o.useState)([]),eo=el[0],ed=el[1],eu=(0,o.useState)([]),eh=eu[0],ep=eu[1],em=(0,o.useState)([]),ex=em[0],ej=em[1],ef=(0,o.useState)(null);ef[0],ef[1];var ev=(0,o.useState)("leads-info"),eg=ev[0],eN=ev[1],ey=(0,o.useState)(!1),ek=ey[0],eb=ey[1],ew=(0,o.useState)(""),eZ=ew[0],eC=ew[1],eP=(0,o.useState)("visits"),eS=eP[0],eD=eP[1],eO=(0,o.useState)(null),eI=eO[0],eA=eO[1],eE=(0,o.useState)(!1),eT=eE[0],eq=eE[1],eF=(0,o.useState)(!1),eL=eF[0],eB=eF[1],eM=(0,o.useState)(!1),ez=eM[0],e_=eM[1],eR=(0,o.useState)(!1),eY=eR[0],eV=eR[1],eU=(0,o.useState)(!1),eW=eU[0],eQ=eU[1],eG=(0,o.useState)(new Date),e$=eG[0],eJ=eG[1],eX=(0,o.useState)((0,A.E)(new Date,5)),eK=eX[0],eH=eX[1],e0=b.Z.useForm(),e1=(0,i.Z)(e0,1)[0],e2=(0,f.v9)(function(e){return e.auth.token}),e4=(0,f.v9)(function(e){return e.auth.employeeId}),e3=(0,o.useState)(!1),e9=e3[0],e8=e3[1],e7=(0,o.useState)({visits:!1,notes:!1,complaints:!1,requirements:!1}),e5=e7[0],e6=e7[1],te=(0,o.useState)({visits:1,notes:1,complaints:1,requirements:1}),tt=te[0],ts=te[1],tn=(0,o.useState)([]),tr=tn[0],ta=tn[1],ti=(0,o.useState)([]),tc=ti[0],tl=ti[1],to=(0,o.useState)([]),td=to[0],tu=to[1],th=(0,o.useCallback)((e=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/intent-audit/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:tl(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching intent data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(t){return e.apply(this,arguments)}),[e2]),tp=(0,o.useCallback)((t=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/monthly-sale/getByStore?storeId=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:tu(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching sales data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return t.apply(this,arguments)}),[e2]),tm=(s=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.put("https://api.gajkesaristeels.in/store/edit?id=".concat($),M(M({},t),{},{storeId:parseInt($)}),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:K(t),eb(!1),w.ZP.success("Customer updated successfully!"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error updating customer:",e.t0),w.ZP.error("Error updating customer.");case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return s.apply(this,arguments)}),tx=(0,o.useCallback)((c=(0,a.Z)(l().mark(function e(t){var s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/store/getById?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:K((s=e.sent).data),e8(["builder","site visit","architect","engineer"].includes(s.data.clientType.toLowerCase())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching customer data:",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return c.apply(this,arguments)}),[e2]),tj=(0,o.useCallback)((u=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/notes/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:et(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching notes data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return u.apply(this,arguments)}),[e2]),tf=(0,o.useCallback)((p=(0,a.Z)(l().mark(function e(t){var s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/visit/getByStore?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:er((s=e.sent).data),ta(s.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching visits data:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return p.apply(this,arguments)}),[e2]),tv=(0,o.useCallback)((F=(0,a.Z)(l().mark(function e(t,s,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat(t,"&start=").concat(s.toISOString().split("T")[0],"&end=").concat(n.toISOString().split("T")[0]),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ec(e.sent.data.filter(function(e){return"requirement"===e.taskType})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching requirements data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,s){return F.apply(this,arguments)}),[e2]),tg=(0,o.useCallback)((B=(0,a.Z)(l().mark(function e(t,s,n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat(t,"&start=").concat(s.toISOString().split("T")[0],"&end=").concat(n.toISOString().split("T")[0]),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ed(e.sent.data.filter(function(e){return"complaint"===e.taskType})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching complaints data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,s){return B.apply(this,arguments)}),[e2]),tN=(0,o.useCallback)((0,a.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/employee/getAll",{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ep(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching employees:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[e2]),ty=(0,o.useCallback)((0,a.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/store/names",{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ej(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching stores:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[e2]),tk=(R=(0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.post("https://api.gajkesaristeels.in/notes/create",{content:eZ,employeeId:e4,storeId:parseInt($)},{headers:{Authorization:"Bearer ".concat(e2)}});case 3:t=e.sent,et([].concat((0,n.Z)(ee),[t.data])),eC(""),eq(!1),w.ZP.success("Note added successfully!"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error creating note:",e.t0),w.ZP.error("Error creating note.");case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return R.apply(this,arguments)}),tb=function(e){eA(e.id),eC(e.content),eB(!0),eq(!0)},tw=(Y=(0,a.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.put("https://api.gajkesaristeels.in/notes/edit?id=".concat(eI),{content:eZ,employeeId:e4,storeId:parseInt($)},{headers:{Authorization:"Bearer ".concat(e2)}});case 3:et(ee.map(function(e){return e.id===eI?M(M({},e),{},{content:eZ}):e})),eA(null),eC(""),eB(!1),eq(!1),w.ZP.success("Note updated successfully!"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error updating note:",e.t0),w.ZP.error("Error updating note.");case 16:case"end":return e.stop()}},e,null,[[0,12]])})),function(){return Y.apply(this,arguments)}),tZ=(V=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.delete("https://api.gajkesaristeels.in/notes/delete?id=".concat(t),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:et(ee.filter(function(e){return e.id!==t})),w.ZP.success("Note deleted successfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting note:",e.t0),w.ZP.error("Error deleting note.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return V.apply(this,arguments)}),tC=(U=(0,a.Z)(l().mark(function e(t){var s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.post("https://api.gajkesaristeels.in/visit/create",M(M({},t),{},{employeeId:e4,storeId:parseInt($)}),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:s=e.sent,er([].concat((0,n.Z)(en),[s.data])),e_(!1),e1.resetFields(),w.ZP.success("Visit created successfully!"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error creating visit:",e.t0),w.ZP.error("Error creating visit.");case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e){return U.apply(this,arguments)}),tP=function(e,t){ts(function(s){return M(M({},s),{},(0,r.Z)({},e,t))})},tS=function(e){var t,s=[];switch(e){case"visits":t=en.length;break;case"notes":t=ee.length;break;case"complaints":t=eo.length;break;case"requirements":t=ei.length;break;default:t=0}for(var n=Math.ceil(t/3),r=function(t){1===t||t===n||t>=tt[e]-1&&t<=tt[e]+1?s.push((0,L.jsx)(q.nt,{children:(0,L.jsx)(q.kN,{isActive:tt[e]===t,onClick:function(){return tP(e,t)},children:t})},t)):(t===tt[e]-2&&t>2||t===tt[e]+2&&t<n-1)&&s.push((0,L.jsx)(q.nt,{children:(0,L.jsx)(q.Dj,{})},t))},a=1;a<=n;a++)r(a);return s},tD=(W=(0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("https://api.gajkesaristeels.in/task/getByStoreAndDate?storeId=".concat($,"&start=").concat((0,E.WU)(e$,"yyyy-MM-dd"),"&end=").concat((0,E.WU)(eK,"yyyy-MM-dd")),{headers:{Authorization:"Bearer ".concat(e2)}});case 3:ec((t=e.sent).data.filter(function(e){return"requirement"===e.taskType})),ed(t.data.filter(function(e){return"complaint"===e.taskType})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching updated tasks:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return W.apply(this,arguments)}),tO=function(e){return e?e.split(" ").map(function(e){return e[0]}).join(""):""},tI=function(e){return e.visit_date?{emoji:"âœ…",status:"Complete",color:"bg-purple-100 text-purple-800"}:{emoji:"\uD83D\uDCC5",status:"Assigned",color:"bg-blue-100 text-blue-800"}},tA=function(e,t){var s=(t-1)*3;return e.slice(s,s+3)},tE=(Q=(0,a.Z)(l().mark(function e(t,s){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.put("https://api.gajkesaristeels.in/task/updateTask?taskId=".concat(t),{status:s,priority:"Medium"},{headers:{Authorization:"Bearer ".concat(e2)}});case 3:w.ZP.success("Status updated successfully!"),tD(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error updating status:",e.t0),w.ZP.error("Error updating status.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t){return Q.apply(this,arguments)}),tT=function(e){return(0,L.jsxs)(Z.Z,{onClick:function(t){return tE(e,t.key)},children:[(0,L.jsx)(Z.Z.Item,{children:"Assigned"},"Assigned"),(0,L.jsx)(Z.Z.Item,{children:"On Going"},"On Going"),(0,L.jsx)(Z.Z.Item,{children:"Complete"},"Complete")]})},tq={dates:tc.map(function(e){return e.changeDate}),intentLevels:tc.map(function(e){return e.newIntentLevel})};tq.dates,tq.intentLevels;var tF={dates:td.map(function(e){return e.visitDate}),salesAmounts:td.map(function(e){return e.newMonthlySale})};return tF.dates,tF.salesAmounts,(0,o.useEffect)(function(){e2&&$&&(tx($),tj($),tf($),tv($,e$,eK),tg($,e$,eK),tN(),ty(),th($),tp($))},[e2,$,e$,eK,tx,tj,tf,tv,tg,tN,ty,th,tp]),(0,L.jsxs)("div",{className:"container main-content",children:[(0,L.jsxs)(h(),{children:[(0,L.jsx)("title",{children:"Customer Detail Page"}),(0,L.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),(0,L.jsx)(m(),{src:"https://cdn.jsdelivr.net/npm/chart.js",strategy:"afterInteractive"}),(0,L.jsxs)("div",{className:"contact-details",children:[(0,L.jsxs)("aside",{className:"left-panel",children:[(0,L.jsxs)("div",{className:"back-button",onClick:function(){G.push("/CustomerListPage")},children:[(0,L.jsx)("i",{className:"fas fa-arrow-left"})," Back to customers"]}),(0,L.jsxs)("div",{className:"profile",children:[(0,L.jsx)("div",{className:"avatar",children:(0,L.jsx)("span",{children:X?tO("".concat(X.clientFirstName," ").concat(X.clientLastName)):"JB"})}),(0,L.jsx)("h2",{children:X?"".concat(X.clientFirstName," ").concat(X.clientLastName):"Jerome Bell"}),(0,L.jsx)("p",{className:"company",children:X?X.storeName:"Google"})]}),(0,L.jsxs)("div",{className:"action-buttons",children:[(0,L.jsxs)(C.ZP,{className:"action-button",onClick:function(){return eb(!0)},children:[(0,L.jsx)("i",{className:"fas fa-edit"})," Edit Customer"]}),(0,L.jsxs)(C.ZP,{className:"action-button",onClick:function(){return eQ(!0)},children:[(0,L.jsx)("i",{className:"fas fa-envelope"})," Log Complaint"]}),(0,L.jsxs)(C.ZP,{className:"action-button",onClick:function(){return eV(!0)},children:[(0,L.jsx)("i",{className:"fas fa-phone"})," Add Requirement"]})]}),(0,L.jsxs)("div",{className:"info-tabs",children:[(0,L.jsx)("div",{className:"info-tab ".concat("leads-info"===eg?"active":""),onClick:function(){return eN("leads-info")},children:"Leads info"}),(0,L.jsx)("div",{className:"info-tab ".concat("address-info"===eg?"active":""),onClick:function(){return eN("address-info")},children:"Address info"})]}),(0,L.jsx)("div",{className:"info-content ".concat("leads-info"===eg?"active":""),children:X&&(0,L.jsxs)("div",{className:"info-content-inner",children:[(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-user",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"Customer Name"}),(0,L.jsx)("br",{}),X.clientFirstName," ",X.clientLastName]}),(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-envelope",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"Email"}),(0,L.jsx)("br",{}),X.email||"N/A"]}),(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-phone",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"Phone"}),(0,L.jsx)("br",{}),X.primaryContact]}),(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-store",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"Store Name"}),(0,L.jsx)("br",{}),X.storeName]}),(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-user-tag",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"Client Type"}),(0,L.jsx)("br",{}),X.clientType||"N/A"]})]})}),(0,L.jsx)("div",{className:"info-content ".concat("address-info"===eg?"active":""),children:X&&(0,L.jsxs)("div",{className:"info-content-inner",children:[(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-map-marker-alt",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"Address"}),(0,L.jsx)("br",{}),X.addressLine1||"N/A",", ",X.addressLine2||"",", ",X.city,", ",X.state,", ",X.country||"N/A",", ",X.pincode||"N/A"]}),(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-city",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"City"}),(0,L.jsx)("br",{}),X.city]}),(0,L.jsxs)("p",{children:[(0,L.jsx)("i",{className:"fas fa-flag",style:{color:"purple"}})," ",(0,L.jsx)("strong",{children:"State"}),(0,L.jsx)("br",{}),X.state]})]})})]}),(0,L.jsxs)("section",{className:"activity-details",children:[(0,L.jsxs)("div",{className:"tabs",children:[(0,L.jsxs)("button",{className:"tab ".concat("visits"===eS?"active":""),onClick:function(){return eD("visits")},children:[(0,L.jsx)("i",{className:"fas fa-calendar-check"})," Visits"]}),(0,L.jsxs)("button",{className:"tab ".concat("notes"===eS?"active":""),onClick:function(){return eD("notes")},children:[(0,L.jsx)("i",{className:"fas fa-sticky-note"})," Notes"]}),(0,L.jsxs)("button",{className:"tab ".concat("complaints"===eS?"active":""),onClick:function(){return eD("complaints")},children:[(0,L.jsx)("i",{className:"fas fa-exclamation-circle"})," Complaints"]}),(0,L.jsxs)("button",{className:"tab ".concat("requirements"===eS?"active":""),onClick:function(){return eD("requirements")},children:[(0,L.jsx)("i",{className:"fas fa-tasks"})," Requirements"]}),e9&&(0,L.jsxs)("button",{className:"tab ".concat("sites"===eS?"active":""),onClick:function(){return eD("sites")},children:[(0,L.jsx)("i",{className:"fas fa-map-marker-alt"})," Sites"]})]}),e9&&e2&&(0,L.jsx)("div",{className:"tab-content ".concat("sites"===eS?"active":""),children:(0,L.jsx)(j.default,{storeId:"string"==typeof $?$:Array.isArray($)?$[0]:"",token:e2||""})}),(0,L.jsxs)("div",{className:"tab-content ".concat("visits"===eS?"active":""),children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsxs)(k.Z,{placeholder:"Status Filter",onChange:function(e){"All Statuses"===e?ta(en):ta(en.filter(function(t){return tI(t).status===e}))},style:{width:200},children:[(0,L.jsx)(_,{value:"All Statuses",children:"All Statuses"}),(0,L.jsx)(_,{value:"Assigned",children:"Assigned"}),(0,L.jsx)(_,{value:"On Going",children:"On Going"}),(0,L.jsx)(_,{value:"Complete",children:"Complete"})]})}),tA(tr,tt.visits).map(function(e,t){var s=tI(e),n=s.emoji,r=s.status,a=s.color;return(0,L.jsxs)("div",{className:"card task-item",children:[(0,L.jsxs)("div",{className:"task-header",children:[(0,L.jsx)("i",{className:"fas fa-calendar-alt"}),(0,L.jsxs)("span",{children:["Visit scheduled by ",e.employeeName]}),(0,L.jsxs)("span",{className:"due-date",children:["Date: ",new Date(e.visit_date).toLocaleDateString()]})]}),(0,L.jsx)("p",{className:"visit-purpose",children:e.purpose}),(0,L.jsxs)("div",{className:"task-footer",children:[(0,L.jsxs)("div",{className:"task-detail",children:[(0,L.jsx)("span",{children:"Status"}),(0,L.jsxs)("span",{className:"status-tag ".concat(a),children:[n," ",r]})]}),(0,L.jsxs)("div",{className:"task-detail",children:[(0,L.jsx)("span",{children:"Purpose"}),(0,L.jsx)("span",{style:{color:"purple"},children:e.purpose})]}),(0,L.jsxs)("div",{className:"assigned-user",children:[(0,L.jsx)("div",{className:"avatar small",children:tO(e.employeeName)}),(0,L.jsx)("span",{children:e.employeeName})]})]})]},t)}),e5.visits&&en.length>3&&(0,L.jsxs)(q.tl,{children:[(0,L.jsx)(q.dN,{onClick:1===tt.visits?void 0:function(){return ts(function(e){return M(M({},e),{},{visits:Math.max(e.visits-1,1)})})}}),(0,L.jsx)(q.ng,{children:tS("visits")}),(0,L.jsx)(q.$0,{onClick:tt.visits===Math.ceil(en.length/3)?void 0:function(){return ts(function(e){return M(M({},e),{},{visits:Math.min(e.visits+1,Math.ceil(en.length/3))})})}})]}),en.length>3&&(0,L.jsx)(C.ZP,{onClick:function(){return e6(function(e){return M(M({},e),{},{visits:!e.visits})})},children:e5.visits?"Show Less":"Show More"})]}),(0,L.jsxs)("div",{className:"tab-content ".concat("notes"===eS?"active":""),children:[(0,L.jsx)("div",{className:"filter-bar",children:(0,L.jsxs)(C.ZP,{className:"add-note-btn",onClick:function(){eB(!1),eC(""),eq(!0)},children:[(0,L.jsx)("i",{className:"fas fa-plus"})," Add Note"]})}),tA(ee,tt.notes).map(function(e){return(0,L.jsxs)("div",{className:"note-item",children:[(0,L.jsxs)("div",{className:"note-header",children:[(0,L.jsx)("span",{className:"note-date",children:new Date(e.createdDate).toLocaleDateString()}),(0,L.jsxs)("div",{className:"note-actions",children:[(0,L.jsx)("a",{href:"#",onClick:function(){return tb(e)},children:"Edit"}),(0,L.jsx)("a",{href:"#",className:"note-delete",onClick:function(){return tZ(e.id)},children:"Delete"})]})]}),(0,L.jsx)("div",{className:"note-content",children:e.content})]},e.id)}),e5.notes&&ee.length>3&&(0,L.jsxs)(q.tl,{children:[(0,L.jsx)(q.dN,{onClick:1===tt.notes?void 0:function(){return ts(function(e){return M(M({},e),{},{notes:Math.max(e.notes-1,1)})})}}),(0,L.jsx)(q.ng,{children:tS("notes")}),(0,L.jsx)(q.$0,{onClick:tt.notes===Math.ceil(ee.length/3)?void 0:function(){return ts(function(e){return M(M({},e),{},{notes:Math.min(e.notes+1,Math.ceil(ee.length/3))})})}})]}),ee.length>3&&(0,L.jsx)(C.ZP,{onClick:function(){return e6(function(e){return M(M({},e),{},{notes:!e.notes})})},children:e5.notes?"Show Less":"Show More"})]}),(0,L.jsxs)("div",{className:"tab-content ".concat("complaints"===eS?"active":""),children:[(0,L.jsxs)("div",{className:"filter-bar",style:{display:"flex",gap:"10px"},children:[(0,L.jsxs)(O.J2,{children:[(0,L.jsx)(O.xo,{asChild:!0,children:(0,L.jsxs)(C.ZP,{style:{borderColor:"black",borderWidth:"1px"},className:"border w-[280px] justify-start text-left font-normal ".concat(!e$&&"text-muted-foreground"),children:[(0,L.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),e$?(0,E.WU)(new Date(e$),"PPP"):(0,L.jsx)("span",{children:"Start Date"})]})}),(0,L.jsx)(O.yk,{className:"w-auto p-0",children:(0,L.jsx)(T.f,{mode:"single",selected:e$,onSelect:function(e){eJ(e||new Date),eH((0,A.E)(e||new Date,5))},initialFocus:!0})})]}),(0,L.jsxs)(O.J2,{children:[(0,L.jsx)(O.xo,{asChild:!0,children:(0,L.jsxs)(C.ZP,{style:{borderColor:"black",borderWidth:"1px"},className:"border w-[280px] justify-start text-left font-normal ".concat(!eK&&"text-muted-foreground"),children:[(0,L.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),eK?(0,E.WU)(new Date(eK),"PPP"):(0,L.jsx)("span",{children:"End Date"})]})}),(0,L.jsx)(O.yk,{className:"w-auto p-0",children:(0,L.jsx)(T.f,{mode:"single",selected:eK,onSelect:function(e){return eH(e||new Date)},initialFocus:!0})})]})]}),tA(eo,tt.complaints).map(function(e){return(0,L.jsxs)("div",{className:"card task-item",children:[(0,L.jsxs)("div",{className:"task-header",children:[(0,L.jsx)("i",{className:"fas fa-exclamation-circle"}),(0,L.jsx)("span",{children:e.taskTitle}),(0,L.jsxs)("span",{className:"due-date",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]}),(0,L.jsx)("p",{className:"task-desc",children:e.taskDescription}),(0,L.jsxs)("div",{className:"task-footer",children:[(0,L.jsxs)("div",{className:"task-detail",children:[(0,L.jsx)("span",{children:"Status"}),(0,L.jsx)(P.Z,{overlay:tT(e.id),children:(0,L.jsx)(C.ZP,{className:"status-button ".concat(e.status.replace(/ /g,"-").toLowerCase()),children:e.status||"Assigned"})})]}),(0,L.jsxs)("div",{className:"task-detail",children:[(0,L.jsx)("span",{children:"Priority"}),(0,L.jsx)("span",{style:{color:"purple"},children:e.priority})]}),(0,L.jsxs)("div",{className:"assigned-user",children:[(0,L.jsx)("div",{className:"avatar small",children:tO(e.assignedToName)}),(0,L.jsx)("span",{children:e.assignedToName})]})]})]},e.id)}),e5.complaints&&eo.length>3&&(0,L.jsxs)(q.tl,{children:[(0,L.jsx)(q.dN,{onClick:1===tt.complaints?void 0:function(){return ts(function(e){return M(M({},e),{},{complaints:Math.max(e.complaints-1,1)})})}}),(0,L.jsx)(q.ng,{children:tS("complaints")}),(0,L.jsx)(q.$0,{onClick:tt.complaints===Math.ceil(eo.length/3)?void 0:function(){return ts(function(e){return M(M({},e),{},{complaints:Math.min(e.complaints+1,Math.ceil(eo.length/3))})})}})]}),eo.length>3&&(0,L.jsx)(C.ZP,{onClick:function(){return e6(function(e){return M(M({},e),{},{complaints:!e.complaints})})},children:e5.complaints?"Show Less":"Show More"})]}),(0,L.jsxs)("div",{className:"tab-content ".concat("requirements"===eS?"active":""),children:[(0,L.jsxs)("div",{className:"filter-bar",style:{display:"flex",gap:"10px"},children:[(0,L.jsxs)(O.J2,{children:[(0,L.jsx)(O.xo,{asChild:!0,children:(0,L.jsxs)(C.ZP,{style:{borderColor:"black",borderWidth:"1px",borderStyle:"solid"},className:"w-[280px] justify-start text-left font-normal ".concat(!e$&&"text-muted-foreground"),children:[(0,L.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),e$?(0,E.WU)(new Date(e$),"PPP"):(0,L.jsx)("span",{children:"Start Date"})]})}),(0,L.jsx)(O.yk,{className:"w-auto p-0",children:(0,L.jsx)(T.f,{mode:"single",selected:e$,onSelect:function(e){eJ(e||new Date),eH((0,A.E)(e||new Date,5))},initialFocus:!0})})]}),(0,L.jsxs)(O.J2,{children:[(0,L.jsx)(O.xo,{asChild:!0,children:(0,L.jsxs)(C.ZP,{style:{borderColor:"black",borderWidth:"1px",borderStyle:"solid"},className:"w-[280px] justify-start text-left font-normal ".concat(!eK&&"text-muted-foreground"),children:[(0,L.jsx)(I.Z,{className:"mr-2 h-4 w-4"}),eK?(0,E.WU)(new Date(eK),"PPP"):(0,L.jsx)("span",{children:"End Date"})]})}),(0,L.jsx)(O.yk,{className:"w-auto p-0",children:(0,L.jsx)(T.f,{mode:"single",selected:eK,onSelect:function(e){return eH(e||new Date)},initialFocus:!0})})]})]}),tA(ei,tt.requirements).map(function(e){return(0,L.jsxs)("div",{className:"card task-item",children:[(0,L.jsxs)("div",{className:"task-header",children:[(0,L.jsx)("i",{className:"fas fa-tasks"}),(0,L.jsx)("span",{children:e.taskTitle}),(0,L.jsxs)("span",{className:"due-date",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]}),(0,L.jsx)("p",{className:"task-desc",children:e.taskDescription}),(0,L.jsxs)("div",{className:"task-footer",children:[(0,L.jsxs)("div",{className:"task-detail",children:[(0,L.jsx)("span",{children:"Status"}),(0,L.jsx)(P.Z,{overlay:tT(e.id),children:(0,L.jsx)(C.ZP,{className:"status-button ".concat(e.status.replace(/ /g,"-").toLowerCase()),children:e.status||"Assigned"})})]}),(0,L.jsxs)("div",{className:"task-detail",children:[(0,L.jsx)("span",{children:"Priority"}),(0,L.jsx)("span",{style:{color:"purple"},children:e.priority})]}),(0,L.jsxs)("div",{className:"assigned-user",children:[(0,L.jsx)("div",{className:"avatar small",children:tO(e.assignedToName)}),(0,L.jsx)("span",{children:e.assignedToName})]})]})]},e.id)}),e5.requirements&&ei.length>3&&(0,L.jsxs)(q.tl,{children:[(0,L.jsx)(q.dN,{onClick:1===tt.requirements?void 0:function(){return ts(function(e){return M(M({},e),{},{requirements:Math.max(e.requirements-1,1)})})}}),(0,L.jsx)(q.ng,{children:tS("requirements")}),(0,L.jsx)(q.$0,{onClick:tt.requirements===Math.ceil(ei.length/3)?void 0:function(){return ts(function(e){return M(M({},e),{},{requirements:Math.min(e.requirements+1,Math.ceil(ei.length/3))})})}})]}),ei.length>3&&(0,L.jsx)(C.ZP,{onClick:function(){return e6(function(e){return M(M({},e),{},{requirements:!e.requirements})})},children:e5.requirements?"Show Less":"Show More"})]})]}),(0,L.jsx)("aside",{className:"charts"})]}),(0,L.jsx)(S.Z,{title:eL?"Edit Note":"Add Note",visible:eT,onOk:eL?tw:tk,onCancel:function(){return eq(!1)},okText:eL?"Update":"Add",children:(0,L.jsx)(z,{placeholder:"Enter note content",value:eZ,onChange:function(e){return eC(e.target.value)},rows:4})}),(0,L.jsx)(S.Z,{title:"Create Visit",visible:ez,onCancel:function(){return e_(!1)},footer:null,children:(0,L.jsxs)(b.Z,{form:e1,onFinish:tC,layout:"vertical",children:[(0,L.jsx)(b.Z.Item,{name:"purpose",label:"Purpose",rules:[{required:!0,message:"Please enter the purpose of the visit"}],children:(0,L.jsx)(y.Z,{})}),(0,L.jsx)(b.Z.Item,{name:"visit_date",label:"Visit Date",rules:[{required:!0,message:"Please select the visit date"}],children:(0,L.jsx)(D.Z,{})}),(0,L.jsx)(b.Z.Item,{name:"employeeId",label:"Assigned Employee",rules:[{required:!0,message:"Please select an employee"}],children:(0,L.jsx)(k.Z,{placeholder:"Select an employee",children:eh.map(function(e){return(0,L.jsx)(_,{value:e.id,children:e.name},e.id)})})}),(0,L.jsx)(b.Z.Item,{children:(0,L.jsx)(C.ZP,{type:"primary",htmlType:"submit",children:"Create Visit"})})]})}),(0,L.jsx)(g.default,{isOpen:eY,onClose:function(){return eV(!1)},employees:eh,stores:ex,storeId:parseInt($),createTask:tD}),(0,L.jsx)(v.default,{isOpen:ek,onClose:function(){return eb(!1)},customerData:X,onSubmit:tm}),(0,L.jsx)(N.default,{isOpen:eW,onClose:function(){return eQ(!1)},employees:eh,stores:ex,storeId:parseInt($),createTask:tD})]})}},36194:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/CustomerDetailPage/[storeId]",function(){return s(97628)}])},83350:function(){},2395:function(){},4298:function(e,t,s){e.exports=s(88548)}},function(e){e.O(0,[2196,9545,6066,2116,4145,8482,398,4480,9676,8076,2327,4237,2103,2888,9774,179],function(){return e(e.s=36194)}),_N_E=e.O()}]);