(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4029],{74824:function(e,t,r){"use strict";r.d(t,{d:function(){return f},z:function(){return p}});var n=r(59499),s=r(4730),a=r(67294),i=r(88426),c=r(45139),o=r(82359),l=r(85893),u=["className","variant","size","asChild"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var f=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),p=a.forwardRef(function(e,t){var r=e.className,a=e.variant,c=e.size,p=e.asChild,m=(0,s.Z)(e,u),h=void 0!==p&&p?i.g7:"button";return(0,l.jsx)(h,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({className:(0,o.cn)(f({variant:a,size:c,className:r})),ref:t},m))});p.displayName="Button"},5411:function(e,t,r){"use strict";r.d(t,{$0:function(){return w},Dj:function(){return P},dN:function(){return O},kN:function(){return N},ng:function(){return b},nt:function(){return y},tl:function(){return x}});var n=r(59499),s=r(4730),a=r(67294),i=r(62469),c=r(82359),o=r(74824),l=r(85893),u=["className"],d=["className"],f=["className"],p=["className","isActive","size"],m=["className"],h=["className"],j=["className"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=function(e){var t=e.className,r=(0,s.Z)(e,u);return(0,l.jsx)("nav",g({role:"navigation","aria-label":"pagination",className:(0,c.cn)("mx-auto flex w-full justify-center",t)},r))};x.displayName="Pagination";var b=a.forwardRef(function(e,t){var r=e.className,n=(0,s.Z)(e,d);return(0,l.jsx)("ul",g({ref:t,className:(0,c.cn)("flex flex-row items-center gap-1",r)},n))});b.displayName="PaginationContent";var y=a.forwardRef(function(e,t){var r=e.className,n=(0,s.Z)(e,f);return(0,l.jsx)("li",g({ref:t,className:(0,c.cn)("",r)},n))});y.displayName="PaginationItem";var N=function(e){var t=e.className,r=e.isActive,n=e.size,a=(0,s.Z)(e,p);return(0,l.jsx)("a",g({"aria-current":r?"page":void 0,className:(0,c.cn)((0,o.d)({variant:r?"outline":"ghost",size:void 0===n?"icon":n}),t)},a))};N.displayName="PaginationLink";var O=function(e){var t=e.className,r=(0,s.Z)(e,m);return(0,l.jsxs)(N,g(g({"aria-label":"Go to previous page",size:"default",className:(0,c.cn)("gap-1 pl-2.5",t)},r),{},{children:[(0,l.jsx)(i.wyc,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Previous"})]}))};O.displayName="PaginationPrevious";var w=function(e){var t=e.className,r=(0,s.Z)(e,h);return(0,l.jsxs)(N,g(g({"aria-label":"Go to next page",size:"default",className:(0,c.cn)("gap-1 pr-2.5",t)},r),{},{children:[(0,l.jsx)("span",{children:"Next"}),(0,l.jsx)(i.XCv,{className:"h-4 w-4"})]}))};w.displayName="PaginationNext";var P=function(e){var t=e.className,r=(0,s.Z)(e,j);return(0,l.jsxs)("span",g(g({"aria-hidden":!0,className:(0,c.cn)("flex h-9 w-9 items-center justify-center",t)},r),{},{children:[(0,l.jsx)(i.nWS,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"More pages"})]}))};P.displayName="PaginationEllipsis"},90093:function(e,t,r){"use strict";r.r(t);var n=r(27812),s=r(59499),a=r(50029),i=r(16835),c=r(64687),o=r.n(c),l=r(67294),u=r(87066),d=r(54293),f=r(90601),p=r(15418),m=r(30112),h=r(6499),j=r(48672),v=r(78166),g=r(85372),x=r(8593),b=r(27484),y=r.n(b),N=r(5411);r(2395);var O=r(85893);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Z=d.Z.Option,k=f.Z.RangePicker;t.default=function(e){var t,r,s=e.storeId,c=e.token,f=(0,l.useState)([]),b=f[0],w=f[1],D=(0,l.useState)(!1),S=D[0],E=D[1],z=(0,l.useState)(!1),C=z[0],Y=z[1],A=(0,l.useState)(null),M=A[0],_=A[1],I=p.Z.useForm(),R=(0,i.Z)(I,1)[0],B=(0,l.useState)(1),q=B[0],F=B[1],T=(0,l.useState)(!1),X=T[0],G=T[1],L=(0,l.useCallback)((0,a.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.get("https://api.gajkesaristeels.in/site/getByStore?id=".concat(s),{headers:{Authorization:"Bearer ".concat(c)}});case 3:w(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching sites:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[s,c]);(0,l.useEffect)(function(){s&&L()},[s,L]);var V=function(e){Y(!0),_(e),R.setFieldsValue(P(P({},e),{},{dateRange:[y()(e.startDate),y()(e.endDate)]})),E(!0)},$=(t=(0,a.Z)(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.delete("https://api.gajkesaristeels.in/site/delete?id=".concat(t),{headers:{Authorization:"Bearer ".concat(c)}});case 3:w(b.filter(function(e){return e.id!==t})),m.ZP.success("Site deleted successfully!"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting site:",e.t0),m.ZP.error("Error deleting site.");case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return t.apply(this,arguments)}),U=(r=(0,a.Z)(o().mark(function e(t){var r,a;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=P(P({},t),{},{startDate:t.dateRange[0].format("YYYY-MM-DD"),endDate:t.dateRange[1].format("YYYY-MM-DD"),storeId:parseInt(s,10)}),e.prev=1,!(C&&M)){e.next=9;break}return e.next=5,u.Z.put("https://api.gajkesaristeels.in/site/edit?id=".concat(M.id),r,{headers:{Authorization:"Bearer ".concat(c)}});case 5:w(b.map(function(e){return e.id===M.id?P(P({},e),r):e})),m.ZP.success("Site updated successfully!"),e.next=14;break;case 9:return e.next=11,u.Z.post("https://api.gajkesaristeels.in/site/add",r,{headers:{Authorization:"Bearer ".concat(c)}});case 11:a=e.sent,w([].concat((0,n.Z)(b),[P(P({},r),{},{id:a.data})])),m.ZP.success("Site added successfully!");case 14:E(!1),R.resetFields(),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("Error submitting site:",e.t0),m.ZP.error("Error submitting site.");case 22:case"end":return e.stop()}},e,null,[[1,18]])})),function(e){return r.apply(this,arguments)}),W=X?b.slice((q-1)*4,4*q):b.slice(0,4);return(0,O.jsxs)("div",{className:"sites-container",children:[(0,O.jsx)(h.ZP,{onClick:function(){Y(!1),_(null),R.resetFields(),E(!0)},className:"add-site-btn",children:"+ Add Site"}),(0,O.jsx)("div",{className:"sites-list",children:W.map(function(e){return(0,O.jsxs)("div",{className:"site-card",children:[(0,O.jsxs)("div",{className:"site-card-content",children:[(0,O.jsx)("p",{className:"site-name",children:e.siteName}),(0,O.jsxs)("p",{className:"site-info",children:[(0,O.jsx)(g.Z,{size:14})," ",e.city]}),(0,O.jsxs)("p",{className:"site-info",children:[(0,O.jsx)(g.Z,{size:14})," Area: ",e.area]}),(0,O.jsxs)("p",{className:"site-info",children:[(0,O.jsx)(x.Z,{size:14})," ",y()(e.startDate).format("DD/MM/YYYY")," - ",y()(e.endDate).format("DD/MM/YYYY")]})]}),(0,O.jsxs)("div",{className:"site-actions",children:[(0,O.jsxs)("div",{className:"status-indicator ".concat(e.status),children:[(0,O.jsx)("span",{className:"status-dot"}),e.status]}),(0,O.jsxs)("div",{className:"action-buttons",children:[(0,O.jsx)(h.ZP,{type:"link",className:"edit-btn",onClick:function(){return V(e)},children:"Edit"}),(0,O.jsx)(h.ZP,{type:"link",danger:!0,onClick:function(){return $(e.id)},children:"Delete"})]})]})]},e.id)})}),b.length>4&&(0,O.jsx)(h.ZP,{onClick:function(){G(!X),F(1)},className:"show-more-btn",children:X?"Show Less":"Show More"}),X&&(0,O.jsx)(N.tl,{children:(0,O.jsx)(N.ng,{children:(0,O.jsxs)(N.nt,{children:[(0,O.jsx)(N.dN,{onClick:function(){q>1&&F(function(e){return e-1})},className:1===q?"opacity-50 cursor-not-allowed":""}),(0,O.jsx)(N.$0,{onClick:function(){q<Math.ceil(b.length/4)&&F(function(e){return e+1})},className:q===Math.ceil(b.length/4)?"opacity-50 cursor-not-allowed":""})]})})}),(0,O.jsx)(j.Z,{title:C?"Edit Site":"Add Site",visible:S,onCancel:function(){return E(!1)},footer:null,children:(0,O.jsxs)(p.Z,{form:R,onFinish:U,layout:"vertical",children:[(0,O.jsx)(p.Z.Item,{name:"siteName",label:"Site Name",rules:[{required:!0,message:"Please enter the site name"}],children:(0,O.jsx)(v.Z,{})}),(0,O.jsx)(p.Z.Item,{name:"city",label:"City",rules:[{required:!0,message:"Please enter the city"}],children:(0,O.jsx)(v.Z,{})}),(0,O.jsx)(p.Z.Item,{name:"area",label:"Area",rules:[{required:!0,message:"Please enter the area"}],children:(0,O.jsx)(v.Z,{})}),(0,O.jsx)(p.Z.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select the status"}],children:(0,O.jsxs)(d.Z,{children:[(0,O.jsx)(Z,{value:"active",children:"Active"}),(0,O.jsx)(Z,{value:"inactive",children:"Inactive"})]})}),(0,O.jsx)(p.Z.Item,{name:"dateRange",label:"Date Range",rules:[{required:!0,message:"Please select the date range"}],children:(0,O.jsx)(k,{})}),(0,O.jsx)(p.Z.Item,{children:(0,O.jsx)(h.ZP,{type:"primary",htmlType:"submit",children:C?"Update Site":"Add Site"})})]})})]})}},12002:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/CustomerDetailPage/Sites",function(){return r(90093)}])},2395:function(){}},function(e){e.O(0,[398,4480,8076,2327,2888,9774,179],function(){return e(e.s=12002)}),_N_E=e.O()}]);