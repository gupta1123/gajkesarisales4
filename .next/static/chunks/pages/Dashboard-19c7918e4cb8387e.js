(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4156],{65272:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var r=n(59499),a=n(4730),s=n(82359),o=n(85893),c=["className"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){var t=e.className,n=(0,a.Z)(e,c);return(0,o.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",t)},n))}},91102:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(27812),a=n(59499),s=n(16835),o=n(50029),c=n(64687),i=n.n(c),l=n(67294),u=n(34145),d=n(56846),m=n(47034),f=n(11163),p=n(45007),h=n(29062),x=n(4730),v=["title","titleId"],g=l.forwardRef(function(e,t){var n=e.title,r=e.titleId,a=(0,x.Z)(e,v);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}),y=["title","titleId"],b=l.forwardRef(function(e,t){var n=e.title,r=e.titleId,a=(0,x.Z)(e,y);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}),w=["title","titleId"],j=l.forwardRef(function(e,t){var n=e.title,r=e.titleId,a=(0,x.Z)(e,w);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}),k=n(92347),N=n(82422),C=n(74824),E=n(20373),O=n(65272),D=n(84208),L=n(44896),Z=n(22306),S=n(24613),A=n.n(S),M=n(87066);n(15364);var P=n(30443);n(52568);var z=n(85893);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R="https://api.gajkesaristeels.in",V=function(e){var t=e.state,n=e.totalEmployees,r=e.onClick;return(0,z.jsxs)(N.Zb,{className:"cursor-pointer transition-all duration-300 hover:shadow-lg hover:-translate-y-1",onClick:r,children:[(0,z.jsx)(N.Ol,{children:(0,z.jsx)(N.ll,{className:"capitalize",children:t||"Unknown State"})}),(0,z.jsxs)(N.aY,{children:[(0,z.jsx)("p",{className:"text-2xl font-bold",children:n}),(0,z.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Employees"})]})]})},_=function(){var e,t,n,a,c,x=(0,l.useState)([]),v=x[0],y=x[1],w=(0,l.useState)(null),T=w[0],_=w[1],U=(0,l.useState)(null),I=U[0],F=U[1],W=(0,l.useState)((0,u.WU)(new Date,"yyyy-MM-dd")),Y=W[0],q=W[1],G=(0,l.useState)((0,u.WU)(new Date,"yyyy-MM-dd")),X=G[0],H=G[1],J=(0,l.useState)("Today"),K=J[0],Q=J[1],$=(0,l.useState)(1),ee=$[0],et=$[1],en=(0,l.useState)(!1),er=en[0],ea=en[1],es=(0,l.useState)(null),eo=es[0],ec=es[1],ei=(0,l.useState)(!0),el=ei[0],eu=ei[1],ed=(0,l.useState)(null),em=(ed[0],ed[1]),ef=(0,l.useState)([]),ep=ef[0],eh=ef[1],ex=(0,l.useState)([]),ev=ex[0],eg=ex[1],ey=(0,l.useState)([]),eb=ey[0],ew=ey[1],ej=(0,l.useState)(!0),ek=ej[0],eN=ej[1],eC=(0,l.useState)(null),eE=eC[0],eO=eC[1],eD=(0,p.I0)(),eL=(0,p.v9)(function(e){return e.auth.token}),eZ=(0,p.v9)(function(e){return e.auth.role});(0,p.v9)(function(e){return e.auth.teamId});var eS=(0,p.v9)(function(e){return e.auth.username}),eA=(0,f.useRouter)(),eM=eA.query,eP=eM.view,ez=(eM.state,eM.employee),eT=eM.startDate,eB=eM.endDate,eR=(0,l.useRef)(null),eV=(0,l.useRef)(null);(0,l.useEffect)(function(){eL&&eS&&!eZ&&eD((0,h.CS)(eS))},[eD,eL,eS,eZ]),(0,l.useEffect)(function(){eL&&(eq(),e_())},[eL]),(0,l.useEffect)(function(){eL&&"MANAGER"===eZ&&eD((0,h.mR)()).then(function(e){h.mR.fulfilled.match(e)&&e.payload&&eg(e.payload.fieldOfficers.map(function(e){return e.id}))})},[eL,eZ,eD]);var e_=(0,l.useCallback)((0,o.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.Z.get("".concat(R,"/employee/getAll"),{headers:{Authorization:"Bearer ".concat(eL)}});case 3:eh(e.sent.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching employee info:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[eL]),eU=(0,l.useCallback)((e=(0,o.Z)(i().mark(function e(t,n){var r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ea(!0),e.prev=1,e.next=4,fetch("".concat(R,"/report/getCounts?startDate=").concat(t,"&endDate=").concat(n),{headers:{Authorization:"Bearer ".concat(eL)}});case 4:if((r=e.sent).ok){e.next=7;break}throw Error("Failed to fetch visits: ".concat(r.statusText));case 7:return e.next=9,r.json();case 9:a=e.sent,"MANAGER"===eZ?y(a.filter(function(e){return ev.includes(e.employeeId)})):y(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Error fetching visits:",e.t0),y([]);case 17:return e.prev=17,ea(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[1,13,17,20]])})),function(t,n){return e.apply(this,arguments)}),[eL,eZ,ev]),eI=(0,l.useCallback)((t=(0,o.Z)(i().mark(function e(t,n,r){var a,s,o;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ea(!0),e.prev=1,s=null===(a=v.find(function(e){return"".concat(e.employeeFirstName," ").concat(e.employeeLastName).toLowerCase()===t.toLowerCase()}))||void 0===a?void 0:a.employeeId){e.next=5;break}throw Error("Employee not found");case 5:return e.next=7,fetch("".concat(R,"/visit/getByDateRangeAndEmployeeStats?id=").concat(s,"&start=").concat(n,"&end=").concat(r),{headers:{Authorization:"Bearer ".concat(eL)}});case 7:if((o=e.sent).ok){e.next=10;break}throw Error("Failed to fetch employee details: ".concat(o.statusText));case 10:return e.next=12,o.json();case 12:ec(e.sent),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error("Error fetching employee details:",e.t0),ec(null);case 20:return e.prev=20,ea(!1),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[1,16,20,23]])})),function(e,n,r){return t.apply(this,arguments)}),[eL,v]);(0,l.useEffect)(function(){"employeeDetails"===eP&&ez&&eT&&eB&&(F(ez),q(eT),H(eB),eI(ez,eT,eB))},[eP,ez,eT,eB,eI]),(0,l.useEffect)(function(){eL&&eZ&&eU(Y,X)},[eL,eZ,Y,X,eU]),(0,l.useEffect)(function(){"true"===eA.query.reset&&(_(null),F(null),et(1),eA.replace("/Dashboard",void 0,{shallow:!0}))},[eA.query,eA]);var eF=(0,l.useCallback)((n=(0,o.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F(t.trim().toLowerCase()),eA.push({pathname:"/Dashboard",query:{state:T,employee:t.trim().toLowerCase()}},void 0,{shallow:!0}),eI(t,Y,X);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[eI,eA,T,Y,X]),eW=(0,l.useCallback)(function(e,t,n){q(e),H(t),Q(n),I?eI(I,e,t):eU(e,t)},[eI,eU,I]),eY=(0,l.useCallback)(function(e){eA.push({pathname:"/VisitDetailPage/".concat(e),query:{returnTo:"employeeDetails",employeeId:I,startDate:Y,endDate:X}})},[eA,I,Y,X]),eq=(0,l.useCallback)((0,o.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.Z.post("https://account.olamaps.io/realms/olamaps/protocol/openid-connect/token",new URLSearchParams({grant_type:"client_credentials",scope:"openid",client_id:"7ba2810b-f481-4e31-a0c6-d436b0c7c1eb",client_secret:"klymi04gaquWCnpa57hBEpMXR7YPhkLD"}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:eO(e.sent.data.access_token),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error getting access token:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),eG=(0,l.useCallback)(function(e){_(e.trim().toLowerCase()||"unknown"),F(null),eu(!1),eA.push({pathname:"/Dashboard",query:{state:e.trim().toLowerCase()||"unknown"}},void 0,{shallow:!0})},[eA]),eX=(0,l.useCallback)(function(){_(null),F(null),eu(!0),em(null),eH(),eA.push("/Dashboard",void 0,{shallow:!0})},[eA]),eH=(0,l.useCallback)((0,o.Z)(i().mark(function e(){var t,n,r,a;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(eN(!0),em(null),e.prev=2,"MANAGER"!==eZ){e.next=21;break}if(ev.length){e.next=7;break}return ew([]),e.abrupt("return");case 7:return t=ev.map(function(e){return M.Z.get("".concat(R,"/employee/getLiveLocation?id=").concat(e),{headers:{Authorization:"Bearer ".concat(eL)}}).catch(function(t){return console.log("No live location for employee ".concat(e)),null})}),e.next=10,Promise.all(t);case 10:if(ew(n=e.sent.filter(function(e){return null!==e&&e.data}).map(function(e){return e.data}).filter(function(e){return e.latitude&&e.longitude})),!(n.length>0&&eE)){e.next=18;break}return e.next=16,eK(n);case 16:e.next=19;break;case 18:em("No employee locations available");case 19:case 33:e.next=36;break;case 21:return e.next=23,M.Z.get("".concat(R,"/employee/getAll"),{headers:{Authorization:"Bearer ".concat(eL)}});case 23:return r=e.sent.data.map(function(e){return M.Z.get("".concat(R,"/employee/getLiveLocation?id=").concat(e.id),{headers:{Authorization:"Bearer ".concat(eL)}}).catch(function(t){return console.log("No live location for employee ".concat(e.id)),null})}),e.next=27,Promise.all(r);case 27:if(ew(a=e.sent.filter(function(e){return null!==e&&e.data}).map(function(e){return e.data}).filter(function(e){return e.latitude&&e.longitude})),!(a.length>0&&eE)){e.next=35;break}return e.next=33,eK(a);case 35:em("No employee locations available");case 36:e.next=42;break;case 38:e.prev=38,e.t0=e.catch(2),console.error("Error fetching employee locations:",e.t0),em("Failed to fetch employee locations");case 42:return e.prev=42,eN(!1),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[2,38,42,45]])})),[eL,eE,eZ,ev]),eJ=(0,l.useCallback)((a=(0,o.Z)(i().mark(function e(t){var n,r,a,s;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=7>=(n=new Date).getDate()?(0,u.WU)((0,d.k)(n,n.getDate()+23),"yyyy-MM-dd"):(0,u.WU)((0,d.k)(n,30),"yyyy-MM-dd"),a=(0,u.WU)(n,"yyyy-MM-dd"),e.prev=3,e.next=6,M.Z.get("".concat(R,"/visit/getByDateSorted"),{headers:{Authorization:"Bearer ".concat(eL)},params:{startDate:r,endDate:a,page:0,size:1,sort:"visitDate,desc",employeeName:t}});case 6:return s=e.sent.data.content[0],e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(3),console.error("Error fetching latest visit:",e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[3,11]])})),function(e){return a.apply(this,arguments)}),[eL]),eK=(0,l.useCallback)((c=(0,o.Z)(i().mark(function e(t){var n,r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(eR.current&&eE)){e.next=19;break}return eV.current&&eV.current.remove(),e.prev=2,e.next=5,M.Z.get("https://api.olamaps.io/tiles/vector/v1/styles/default-light-standard/style.json",{headers:{Authorization:"Bearer ".concat(eE)}});case 5:(n=e.sent.data).layers=n.layers.filter(function(e){return!["poi-vectordata","poi"].includes(e.id)}),eV.current=new S.Map({container:eR.current,style:n,center:[78.9629,20.5937],zoom:4,transformRequest:function(e,t){if(e.startsWith("https://api.olamaps.io"))return{url:e,headers:{Authorization:"Bearer ".concat(eE)}}}}),r=null,eV.current.on("load",function(){eV.current.addControl(new S.NavigationControl,"top-left"),t.forEach(function(e,t){var n="hsl(".concat(137.508*t%360,", 70%, 50%)"),a=new S.Marker({color:n}).setLngLat([e.longitude,e.latitude]).addTo(eV.current);ep.find(function(t){return t.id===e.empId});var s=(0,m.D)("".concat(e.updatedAt,"T").concat(e.updatedTime)),c=(0,u.WU)(s,"d MMM ''yy h:mm a");a.getElement().addEventListener("mouseenter",(0,o.Z)(i().mark(function t(){var n,s,o,l;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r&&(r.remove(),r=null),t.next=3,eJ(e.empName);case 3:s=(n=t.sent)&&n.checkinTime?(0,u.WU)((0,m.D)("".concat(n.visit_date,"T").concat(n.checkinTime)),"h:mm a"):"N/A",o='\n                <div class="map-popup">\n                  <h3>'.concat(e.empName,"</h3>\n                  <p><strong>Last updated:</strong> ").concat(c,"</p>\n                  ").concat(n?'\n                    <div class="latest-visit">\n                      <p><strong>Latest Visit:</strong> '.concat(n.storeName," at ").concat(s,"</p>\n                    </div>\n                  "):"<p>No recent visits</p>","\n                </div>\n              "),(l=new S.Popup({offset:25}).setHTML(o)).setLngLat(a.getLngLat()),l.addTo(eV.current),r=l;case 10:case"end":return t.stop()}},t)})))});var e=new(A()).LngLatBounds;t.forEach(function(t){e.extend([t.longitude,t.latitude])}),eV.current.fitBounds(e,{padding:50})}),eV.current.on("mousemove",function(){r&&!r.isOpen()&&(r.remove(),r=null)}),eV.current.on("error",function(e){console.error("Map error:",e),em("Map error: ".concat(e.error.message))}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Error initializing map:",e.t0),em("Failed to initialize map");case 19:case"end":return e.stop()}},e,null,[[2,15]])})),function(e){return c.apply(this,arguments)}),[eE,eJ,ep]),eQ=(0,l.useCallback)(function(e){eV.current&&eV.current.flyTo({center:[e.longitude,e.latitude],zoom:14,essential:!0})},[]);(0,l.useEffect)(function(){eL&&eS&&!eZ&&eD((0,h.CS)(eS))},[eD,eL,eS,eZ]),(0,l.useEffect)(function(){eL&&eq()},[eL,eq]),(0,l.useEffect)(function(){eE&&el&&eH()},[eE,eH,el]),(0,l.useEffect)(function(){eL&&eZ&&eU(Y,X)},[eL,eZ,Y,X,eU]);var e$=(0,l.useMemo)(function(){return Object.entries(v.reduce(function(e,t){var n=(t.employeeState||"unknown").trim().toLowerCase();return e[n]||(e[n]={employees:new Set,visits:0}),t.statsDto&&t.statsDto.completedVisitCount>0&&(e[n].employees.add("".concat(t.employeeFirstName||"Unknown"," ").concat(t.employeeLastName||"")),e[n].visits+=t.statsDto.completedVisitCount),e},{})).filter(function(e){var t=(0,s.Z)(e,2);return(t[0],t[1]).employees.size>0}).map(function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,z.jsx)(V,{state:n.charAt(0).toUpperCase()+n.slice(1)||"Unknown State",totalEmployees:r.employees.size,onClick:function(){return eG(n)}},n)})},[v,eG]),e0=(0,l.useMemo)(function(){return T?Object.entries(v.filter(function(e){return(e.employeeState.trim().toLowerCase()||"unknown")===T}).reduce(function(e,t){var n=t.employeeFirstName+" "+t.employeeLastName;return!e[n]&&t.statsDto&&t.statsDto.completedVisitCount>0&&(e[n]=B(B({},t),{},{completedVisitCount:t.statsDto.completedVisitCount})),e},{})).map(function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1];return(0,z.jsx)(D.default,{employeeName:n.charAt(0).toUpperCase()+n.slice(1),totalVisits:r.completedVisitCount,onClick:function(){return eF(n)}},n)}):[]},[T,v,eF]),e1=function(){return(0,z.jsx)(z.Fragment,{children:(0,r.Z)(Array(6)).map(function(e,t){return(0,z.jsx)(N.Zb,{children:(0,z.jsxs)(N.aY,{className:"p-6",children:[(0,z.jsx)(O.O,{className:"h-4 w-[250px] mb-4"}),(0,z.jsx)(O.O,{className:"h-4 w-[200px]"})]})},t)})})};return(0,z.jsx)("div",{className:"container-dashboard mx-auto py-8 px-4",children:T&&!I?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,z.jsx)("h1",{className:"text-3xl font-bold capitalize",children:"unknown"===T?"Unknown State":T}),(0,z.jsxs)(C.z,{variant:"outline",size:"sm",onClick:eX,children:[(0,z.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]}),(0,z.jsx)("div",{className:"mb-8",children:(0,z.jsx)(Z.default,{selectedOption:K,onDateRangeChange:eW})}),(0,z.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:er?e1():e0.length>0?e0:(0,z.jsx)("p",{className:"col-span-full text-center text-muted-foreground",children:"No employees with completed visits in this date range."})})]}):I&&eo?(0,z.jsx)(L.default,{employeeDetails:eo,selectedEmployee:I,setSelectedEmployee:F,handleDateRangeChange:eW,selectedOption:K,handleViewDetails:eY,currentPage:ee,setCurrentPage:et,isLoading:er,onBackClick:eX}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[(0,z.jsx)("h1",{className:"text-3xl font-bold mb-4 md:mb-0",children:"Sales Dashboard"}),(0,z.jsx)(Z.default,{selectedOption:K,onDateRangeChange:eW})]}),(0,z.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,z.jsxs)(N.Zb,{children:[(0,z.jsxs)(N.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,z.jsx)(N.ll,{className:"text-sm font-medium",children:"Total Visits"}),(0,z.jsx)(g,{className:"h-4 w-4 text-muted-foreground"})]}),(0,z.jsxs)(N.aY,{children:[(0,z.jsx)("div",{className:"text-2xl font-bold",children:v.reduce(function(e,t){var n;return e+((null===(n=t.statsDto)||void 0===n?void 0:n.completedVisitCount)||0)},0)}),(0,z.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+",v.filter(function(e){return new Date(e.visit_date)>=(0,d.k)(new Date,7)}).length," from last week"]})]})]}),(0,z.jsxs)(N.Zb,{children:[(0,z.jsxs)(N.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,z.jsx)(N.ll,{className:"text-sm font-medium",children:"Active Employees"}),(0,z.jsx)(b,{className:"h-4 w-4 text-muted-foreground"})]}),(0,z.jsxs)(N.aY,{children:[(0,z.jsx)("div",{className:"text-2xl font-bold",children:new Set(v.map(function(e){return e.employeeId})).size}),(0,z.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Across ",new Set(v.map(function(e){return e.employeeState})).size," states"]})]})]}),(0,z.jsxs)(N.Zb,{children:[(0,z.jsxs)(N.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,z.jsx)(N.ll,{className:"text-sm font-medium",children:"Live Locations"}),(0,z.jsx)(j,{className:"h-4 w-4 text-muted-foreground"})]}),(0,z.jsxs)(N.aY,{children:[(0,z.jsx)("div",{className:"text-2xl font-bold",children:eb.length}),(0,z.jsx)("p",{className:"text-xs text-muted-foreground",children:"Employees currently tracked"})]})]})]}),(0,z.jsxs)("div",{className:"mb-8",children:[(0,z.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"States Overview"}),(0,z.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:er?e1():e$.length>0?e$:(0,z.jsx)("p",{className:"col-span-full text-center text-muted-foreground",children:"No states with active employees in this date range."})})]}),(0,z.jsx)("div",{className:"mb-8",children:(0,z.jsxs)(N.Zb,{children:[(0,z.jsx)(N.Ol,{children:(0,z.jsx)(N.ll,{children:"Live Employee Locations"})}),(0,z.jsx)(N.aY,{children:ek?(0,z.jsx)("div",{className:"flex justify-center items-center h-[600px]",children:(0,z.jsx)(E.Z,{color:"#4A90E2",size:50})}):(0,z.jsx)(z.Fragment,{children:eb.length>0?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{ref:eR,className:"rounded-lg border-2 border-gray-300 shadow-lg mb-4",style:{width:"100%",height:"600px"}}),(0,z.jsx)(P.default,{employeeLocations:eb,onEmployeeClick:eQ})]}):(0,z.jsx)("div",{className:"flex justify-center items-center h-[600px]",children:(0,z.jsx)("p",{className:"text-muted-foreground",children:"No live location data available"})})})})]})})]})})}},84208:function(e,t,n){"use strict";n.r(t),n(67294);var r=n(85893);t.default=function(e){var t=e.employeeName,n=e.totalVisits,a=e.onClick;return(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 cursor-pointer transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-105",onClick:a,children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 capitalize",children:t}),(0,r.jsx)("div",{className:"flex justify-between",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["Total Completed Visits: ",(0,r.jsx)("span",{className:"font-bold",children:n})]})})]})}},30443:function(e,t,n){"use strict";n.r(t),n(67294);var r=n(82422),a=n(85893),s=function(e,t){var n=new Date("".concat(e,"T").concat(t)),r=n.getDate(),a=n.toLocaleString("en-US",{month:"short"}),s=n.getFullYear().toString().slice(-2),o="".concat(r," ").concat(a,"' ").concat(s),c=n.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return"".concat(o," ").concat(c)};t.default=function(e){var t=e.employeeLocations,n=e.onEmployeeClick;return(0,a.jsxs)(r.Zb,{className:"mt-8",children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{className:"text-2xl font-bold",children:"Live Employee Locations"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(function(e){return(0,a.jsxs)("div",{className:"flex items-center p-4 bg-white rounded-lg shadow-lg transform transition-transform hover:scale-105 cursor-pointer",onClick:function(){return n(e)},children:[(0,a.jsx)("img",{src:"/Address.gif",alt:"Location",className:"h-16 w-16 mr-4 rounded-full border-2 border-gray-300"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.empName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Last updated: ",s(e.updatedAt,e.updatedTime)]})]})]},e.id)})})})]})}},96274:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard",function(){return n(91102)}])},15364:function(){},52568:function(){},92347:function(e,t,n){"use strict";var r=n(4730),a=n(67294),s=["title","titleId"],o=a.forwardRef(function(e,t){var n=e.title,o=e.titleId,c=(0,r.Z)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},c),n?a.createElement("title",{id:o},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});t.Z=o}},function(e){e.O(0,[2644,4145,870,1613,3015,4896,2888,9774,179],function(){return e(e.s=96274)}),_N_E=e.O()}]);